{"/app/app/test/integrations/auth.spec.ts":{"path":"/app/app/test/integrations/auth.spec.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"13":{"start":{"line":12,"column":12},"end":{"line":12,"column":104}},"14":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"15":{"start":{"line":12,"column":57},"end":{"line":12,"column":68}},"16":{"start":{"line":12,"column":69},"end":{"line":12,"column":81}},"17":{"start":{"line":13,"column":4},"end":{"line":13,"column":157}},"18":{"start":{"line":13,"column":138},"end":{"line":13,"column":150}},"19":{"start":{"line":14,"column":23},"end":{"line":14,"column":68}},"20":{"start":{"line":14,"column":45},"end":{"line":14,"column":65}},"21":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"22":{"start":{"line":16,"column":15},"end":{"line":16,"column":70}},"23":{"start":{"line":17,"column":8},"end":{"line":34,"column":66}},"24":{"start":{"line":17,"column":18},"end":{"line":34,"column":66}},"25":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"26":{"start":{"line":18,"column":160},"end":{"line":18,"column":169}},"27":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"28":{"start":{"line":19,"column":26},"end":{"line":19,"column":52}},"29":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"30":{"start":{"line":21,"column":32},"end":{"line":21,"column":39}},"31":{"start":{"line":21,"column":40},"end":{"line":21,"column":46}},"32":{"start":{"line":22,"column":24},"end":{"line":22,"column":34}},"33":{"start":{"line":22,"column":35},"end":{"line":22,"column":72}},"34":{"start":{"line":23,"column":24},"end":{"line":23,"column":34}},"35":{"start":{"line":23,"column":35},"end":{"line":23,"column":45}},"36":{"start":{"line":23,"column":46},"end":{"line":23,"column":55}},"37":{"start":{"line":23,"column":56},"end":{"line":23,"column":65}},"38":{"start":{"line":24,"column":24},"end":{"line":24,"column":41}},"39":{"start":{"line":24,"column":42},"end":{"line":24,"column":55}},"40":{"start":{"line":24,"column":56},"end":{"line":24,"column":65}},"41":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"42":{"start":{"line":26,"column":110},"end":{"line":26,"column":116}},"43":{"start":{"line":26,"column":117},"end":{"line":26,"column":126}},"44":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"45":{"start":{"line":27,"column":81},"end":{"line":27,"column":97}},"46":{"start":{"line":27,"column":98},"end":{"line":27,"column":104}},"47":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"48":{"start":{"line":28,"column":57},"end":{"line":28,"column":72}},"49":{"start":{"line":28,"column":73},"end":{"line":28,"column":80}},"50":{"start":{"line":28,"column":81},"end":{"line":28,"column":87}},"51":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"52":{"start":{"line":29,"column":47},"end":{"line":29,"column":62}},"53":{"start":{"line":29,"column":63},"end":{"line":29,"column":78}},"54":{"start":{"line":29,"column":79},"end":{"line":29,"column":85}},"55":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"56":{"start":{"line":30,"column":30},"end":{"line":30,"column":42}},"57":{"start":{"line":31,"column":20},"end":{"line":31,"column":33}},"58":{"start":{"line":31,"column":34},"end":{"line":31,"column":43}},"59":{"start":{"line":33,"column":12},"end":{"line":33,"column":39}},"60":{"start":{"line":34,"column":22},"end":{"line":34,"column":34}},"61":{"start":{"line":34,"column":35},"end":{"line":34,"column":41}},"62":{"start":{"line":34,"column":54},"end":{"line":34,"column":64}},"63":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"64":{"start":{"line":35,"column":23},"end":{"line":35,"column":35}},"65":{"start":{"line":35,"column":36},"end":{"line":35,"column":89}},"66":{"start":{"line":38,"column":0},"end":{"line":38,"column":62}},"67":{"start":{"line":39,"column":15},"end":{"line":39,"column":32}},"68":{"start":{"line":40,"column":13},"end":{"line":40,"column":39}},"69":{"start":{"line":41,"column":10},"end":{"line":41,"column":30}},"70":{"start":{"line":42,"column":18},"end":{"line":42,"column":40}},"71":{"start":{"line":43,"column":11},"end":{"line":43,"column":26}},"72":{"start":{"line":44,"column":12},"end":{"line":44,"column":28}},"73":{"start":{"line":45,"column":15},"end":{"line":45,"column":35}},"74":{"start":{"line":46,"column":15},"end":{"line":46,"column":47}},"75":{"start":{"line":47,"column":11},"end":{"line":47,"column":48}},"76":{"start":{"line":48,"column":14},"end":{"line":48,"column":45}},"77":{"start":{"line":49,"column":0},"end":{"line":49,"column":122}},"78":{"start":{"line":49,"column":43},"end":{"line":49,"column":119}},"79":{"start":{"line":49,"column":77},"end":{"line":49,"column":112}},"80":{"start":{"line":50,"column":0},"end":{"line":50,"column":120}},"81":{"start":{"line":50,"column":46},"end":{"line":50,"column":117}},"82":{"start":{"line":50,"column":80},"end":{"line":50,"column":110}},"83":{"start":{"line":51,"column":0},"end":{"line":51,"column":19}},"84":{"start":{"line":53,"column":4},"end":{"line":73,"column":7}},"85":{"start":{"line":54,"column":8},"end":{"line":72,"column":11}},"86":{"start":{"line":55,"column":12},"end":{"line":71,"column":13}},"87":{"start":{"line":57,"column":20},"end":{"line":57,"column":108}},"88":{"start":{"line":57,"column":92},"end":{"line":57,"column":104}},"89":{"start":{"line":58,"column":20},"end":{"line":61,"column":59}},"90":{"start":{"line":63,"column":20},"end":{"line":63,"column":30}},"91":{"start":{"line":64,"column":20},"end":{"line":67,"column":70}},"92":{"start":{"line":69,"column":20},"end":{"line":69,"column":30}},"93":{"start":{"line":70,"column":20},"end":{"line":70,"column":42}},"94":{"start":{"line":75,"column":0},"end":{"line":225,"column":3}},"95":{"start":{"line":76,"column":4},"end":{"line":85,"column":7}},"96":{"start":{"line":77,"column":8},"end":{"line":84,"column":11}},"97":{"start":{"line":80,"column":12},"end":{"line":80,"column":51}},"98":{"start":{"line":83,"column":12},"end":{"line":83,"column":45}},"99":{"start":{"line":86,"column":4},"end":{"line":89,"column":7}},"100":{"start":{"line":87,"column":8},"end":{"line":87,"column":24}},"101":{"start":{"line":88,"column":8},"end":{"line":88,"column":49}},"102":{"start":{"line":90,"column":4},"end":{"line":106,"column":11}},"103":{"start":{"line":90,"column":51},"end":{"line":106,"column":7}},"104":{"start":{"line":92,"column":8},"end":{"line":105,"column":11}},"105":{"start":{"line":93,"column":12},"end":{"line":104,"column":13}},"106":{"start":{"line":95,"column":20},"end":{"line":95,"column":108}},"107":{"start":{"line":95,"column":92},"end":{"line":95,"column":104}},"108":{"start":{"line":96,"column":20},"end":{"line":99,"column":59}},"109":{"start":{"line":101,"column":20},"end":{"line":101,"column":36}},"110":{"start":{"line":102,"column":20},"end":{"line":102,"column":65}},"111":{"start":{"line":103,"column":20},"end":{"line":103,"column":42}},"112":{"start":{"line":107,"column":4},"end":{"line":127,"column":11}},"113":{"start":{"line":107,"column":61},"end":{"line":127,"column":7}},"114":{"start":{"line":109,"column":8},"end":{"line":126,"column":11}},"115":{"start":{"line":110,"column":12},"end":{"line":125,"column":13}},"116":{"start":{"line":111,"column":24},"end":{"line":111,"column":61}},"117":{"start":{"line":113,"column":20},"end":{"line":113,"column":30}},"118":{"start":{"line":114,"column":20},"end":{"line":118,"column":69}},"119":{"start":{"line":120,"column":20},"end":{"line":120,"column":36}},"120":{"start":{"line":121,"column":20},"end":{"line":121,"column":131}},"121":{"start":{"line":122,"column":20},"end":{"line":122,"column":135}},"122":{"start":{"line":123,"column":20},"end":{"line":123,"column":69}},"123":{"start":{"line":124,"column":20},"end":{"line":124,"column":42}},"124":{"start":{"line":128,"column":4},"end":{"line":166,"column":11}},"125":{"start":{"line":128,"column":76},"end":{"line":166,"column":7}},"126":{"start":{"line":130,"column":8},"end":{"line":165,"column":11}},"127":{"start":{"line":131,"column":12},"end":{"line":164,"column":13}},"128":{"start":{"line":132,"column":24},"end":{"line":132,"column":61}},"129":{"start":{"line":134,"column":20},"end":{"line":134,"column":30}},"130":{"start":{"line":135,"column":20},"end":{"line":139,"column":69}},"131":{"start":{"line":141,"column":20},"end":{"line":141,"column":41}},"132":{"start":{"line":142,"column":20},"end":{"line":143,"column":125}},"133":{"start":{"line":143,"column":48},"end":{"line":143,"column":78}},"134":{"start":{"line":144,"column":20},"end":{"line":148,"column":70}},"135":{"start":{"line":150,"column":20},"end":{"line":150,"column":36}},"136":{"start":{"line":151,"column":20},"end":{"line":151,"column":131}},"137":{"start":{"line":152,"column":20},"end":{"line":152,"column":135}},"138":{"start":{"line":153,"column":20},"end":{"line":153,"column":69}},"139":{"start":{"line":154,"column":20},"end":{"line":158,"column":70}},"140":{"start":{"line":160,"column":20},"end":{"line":160,"column":42}},"141":{"start":{"line":161,"column":20},"end":{"line":161,"column":92}},"142":{"start":{"line":162,"column":20},"end":{"line":162,"column":75}},"143":{"start":{"line":163,"column":20},"end":{"line":163,"column":42}},"144":{"start":{"line":167,"column":4},"end":{"line":185,"column":11}},"145":{"start":{"line":167,"column":66},"end":{"line":185,"column":7}},"146":{"start":{"line":169,"column":8},"end":{"line":184,"column":11}},"147":{"start":{"line":170,"column":12},"end":{"line":183,"column":13}},"148":{"start":{"line":171,"column":24},"end":{"line":171,"column":61}},"149":{"start":{"line":173,"column":20},"end":{"line":173,"column":30}},"150":{"start":{"line":174,"column":20},"end":{"line":178,"column":70}},"151":{"start":{"line":180,"column":20},"end":{"line":180,"column":42}},"152":{"start":{"line":181,"column":20},"end":{"line":181,"column":75}},"153":{"start":{"line":182,"column":20},"end":{"line":182,"column":42}},"154":{"start":{"line":186,"column":4},"end":{"line":224,"column":11}},"155":{"start":{"line":186,"column":47},"end":{"line":224,"column":7}},"156":{"start":{"line":188,"column":8},"end":{"line":223,"column":11}},"157":{"start":{"line":189,"column":12},"end":{"line":222,"column":13}},"158":{"start":{"line":191,"column":20},"end":{"line":191,"column":113}},"159":{"start":{"line":191,"column":97},"end":{"line":191,"column":109}},"160":{"start":{"line":192,"column":20},"end":{"line":192,"column":57}},"161":{"start":{"line":194,"column":20},"end":{"line":194,"column":30}},"162":{"start":{"line":195,"column":20},"end":{"line":199,"column":69}},"163":{"start":{"line":201,"column":20},"end":{"line":201,"column":36}},"164":{"start":{"line":202,"column":20},"end":{"line":202,"column":79}},"165":{"start":{"line":203,"column":20},"end":{"line":203,"column":89}},"166":{"start":{"line":204,"column":20},"end":{"line":209,"column":70}},"167":{"start":{"line":211,"column":20},"end":{"line":211,"column":42}},"168":{"start":{"line":212,"column":20},"end":{"line":212,"column":75}},"169":{"start":{"line":213,"column":20},"end":{"line":217,"column":145}},"170":{"start":{"line":219,"column":20},"end":{"line":219,"column":47}},"171":{"start":{"line":220,"column":20},"end":{"line":220,"column":80}},"172":{"start":{"line":221,"column":20},"end":{"line":221,"column":42}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":48},"end":{"line":11,"column":49}},"loc":{"start":{"line":11,"column":73},"end":{"line":37,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":12,"column":30},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":41},"end":{"line":12,"column":83}},"line":12},"9":{"name":"(anonymous_9)","decl":{"start":{"line":13,"column":125},"end":{"line":13,"column":126}},"loc":{"start":{"line":13,"column":136},"end":{"line":13,"column":152}},"line":13},"10":{"name":"verb","decl":{"start":{"line":14,"column":13},"end":{"line":14,"column":17}},"loc":{"start":{"line":14,"column":21},"end":{"line":14,"column":70}},"line":14},"11":{"name":"(anonymous_11)","decl":{"start":{"line":14,"column":30},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":43},"end":{"line":14,"column":67}},"line":14},"12":{"name":"step","decl":{"start":{"line":15,"column":13},"end":{"line":15,"column":17}},"loc":{"start":{"line":15,"column":22},"end":{"line":36,"column":5}},"line":15},"13":{"name":"(anonymous_13)","decl":{"start":{"line":49,"column":26},"end":{"line":49,"column":27}},"loc":{"start":{"line":49,"column":41},"end":{"line":49,"column":121}},"line":49},"14":{"name":"(anonymous_14)","decl":{"start":{"line":49,"column":61},"end":{"line":49,"column":62}},"loc":{"start":{"line":49,"column":75},"end":{"line":49,"column":114}},"line":49},"15":{"name":"(anonymous_15)","decl":{"start":{"line":50,"column":29},"end":{"line":50,"column":30}},"loc":{"start":{"line":50,"column":44},"end":{"line":50,"column":119}},"line":50},"16":{"name":"(anonymous_16)","decl":{"start":{"line":50,"column":64},"end":{"line":50,"column":65}},"loc":{"start":{"line":50,"column":78},"end":{"line":50,"column":112}},"line":50},"17":{"name":"registerUser","decl":{"start":{"line":52,"column":9},"end":{"line":52,"column":21}},"loc":{"start":{"line":52,"column":24},"end":{"line":74,"column":1}},"line":52},"18":{"name":"(anonymous_18)","decl":{"start":{"line":53,"column":43},"end":{"line":53,"column":44}},"loc":{"start":{"line":53,"column":55},"end":{"line":73,"column":5}},"line":53},"19":{"name":"(anonymous_19)","decl":{"start":{"line":54,"column":33},"end":{"line":54,"column":34}},"loc":{"start":{"line":54,"column":47},"end":{"line":72,"column":9}},"line":54},"20":{"name":"fakeFn","decl":{"start":{"line":57,"column":81},"end":{"line":57,"column":87}},"loc":{"start":{"line":57,"column":90},"end":{"line":57,"column":106}},"line":57},"21":{"name":"(anonymous_21)","decl":{"start":{"line":75,"column":26},"end":{"line":75,"column":27}},"loc":{"start":{"line":75,"column":38},"end":{"line":225,"column":1}},"line":75},"22":{"name":"(anonymous_22)","decl":{"start":{"line":76,"column":15},"end":{"line":76,"column":16}},"loc":{"start":{"line":76,"column":27},"end":{"line":85,"column":5}},"line":76},"23":{"name":"(anonymous_23)","decl":{"start":{"line":79,"column":18},"end":{"line":79,"column":19}},"loc":{"start":{"line":79,"column":30},"end":{"line":81,"column":9}},"line":79},"24":{"name":"(anonymous_24)","decl":{"start":{"line":82,"column":18},"end":{"line":82,"column":19}},"loc":{"start":{"line":82,"column":30},"end":{"line":84,"column":9}},"line":82},"25":{"name":"(anonymous_25)","decl":{"start":{"line":86,"column":14},"end":{"line":86,"column":15}},"loc":{"start":{"line":86,"column":26},"end":{"line":89,"column":5}},"line":86},"26":{"name":"(anonymous_26)","decl":{"start":{"line":90,"column":37},"end":{"line":90,"column":38}},"loc":{"start":{"line":90,"column":49},"end":{"line":106,"column":9}},"line":90},"27":{"name":"(anonymous_27)","decl":{"start":{"line":90,"column":92},"end":{"line":90,"column":93}},"loc":{"start":{"line":90,"column":104},"end":{"line":106,"column":5}},"line":90},"28":{"name":"(anonymous_28)","decl":{"start":{"line":92,"column":33},"end":{"line":92,"column":34}},"loc":{"start":{"line":92,"column":47},"end":{"line":105,"column":9}},"line":92},"29":{"name":"fakeFn","decl":{"start":{"line":95,"column":81},"end":{"line":95,"column":87}},"loc":{"start":{"line":95,"column":90},"end":{"line":95,"column":106}},"line":95},"30":{"name":"(anonymous_30)","decl":{"start":{"line":107,"column":47},"end":{"line":107,"column":48}},"loc":{"start":{"line":107,"column":59},"end":{"line":127,"column":9}},"line":107},"31":{"name":"(anonymous_31)","decl":{"start":{"line":107,"column":102},"end":{"line":107,"column":103}},"loc":{"start":{"line":107,"column":114},"end":{"line":127,"column":5}},"line":107},"32":{"name":"(anonymous_32)","decl":{"start":{"line":109,"column":33},"end":{"line":109,"column":34}},"loc":{"start":{"line":109,"column":47},"end":{"line":126,"column":9}},"line":109},"33":{"name":"(anonymous_33)","decl":{"start":{"line":128,"column":62},"end":{"line":128,"column":63}},"loc":{"start":{"line":128,"column":74},"end":{"line":166,"column":9}},"line":128},"34":{"name":"(anonymous_34)","decl":{"start":{"line":128,"column":117},"end":{"line":128,"column":118}},"loc":{"start":{"line":128,"column":129},"end":{"line":166,"column":5}},"line":128},"35":{"name":"(anonymous_35)","decl":{"start":{"line":130,"column":33},"end":{"line":130,"column":34}},"loc":{"start":{"line":130,"column":47},"end":{"line":165,"column":9}},"line":130},"36":{"name":"(anonymous_36)","decl":{"start":{"line":143,"column":32},"end":{"line":143,"column":33}},"loc":{"start":{"line":143,"column":46},"end":{"line":143,"column":80}},"line":143},"37":{"name":"(anonymous_37)","decl":{"start":{"line":167,"column":52},"end":{"line":167,"column":53}},"loc":{"start":{"line":167,"column":64},"end":{"line":185,"column":9}},"line":167},"38":{"name":"(anonymous_38)","decl":{"start":{"line":167,"column":107},"end":{"line":167,"column":108}},"loc":{"start":{"line":167,"column":119},"end":{"line":185,"column":5}},"line":167},"39":{"name":"(anonymous_39)","decl":{"start":{"line":169,"column":33},"end":{"line":169,"column":34}},"loc":{"start":{"line":169,"column":47},"end":{"line":184,"column":9}},"line":169},"40":{"name":"(anonymous_40)","decl":{"start":{"line":186,"column":33},"end":{"line":186,"column":34}},"loc":{"start":{"line":186,"column":45},"end":{"line":224,"column":9}},"line":186},"41":{"name":"(anonymous_41)","decl":{"start":{"line":186,"column":88},"end":{"line":186,"column":89}},"loc":{"start":{"line":186,"column":100},"end":{"line":224,"column":5}},"line":186},"42":{"name":"(anonymous_42)","decl":{"start":{"line":188,"column":33},"end":{"line":188,"column":34}},"loc":{"start":{"line":188,"column":47},"end":{"line":223,"column":9}},"line":188},"43":{"name":"fakeFn","decl":{"start":{"line":191,"column":86},"end":{"line":191,"column":92}},"loc":{"start":{"line":191,"column":95},"end":{"line":191,"column":111}},"line":191}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":19},"end":{"line":11,"column":23}},{"start":{"line":11,"column":27},"end":{"line":11,"column":43}},{"start":{"line":11,"column":48},"end":{"line":37,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"type":"if","locations":[{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},{"start":{"line":12,"column":43},"end":{"line":12,"column":68}}],"line":12},"7":{"loc":{"start":{"line":13,"column":71},"end":{"line":13,"column":153}},"type":"binary-expr","locations":[{"start":{"line":13,"column":71},"end":{"line":13,"column":99}},{"start":{"line":13,"column":104},"end":{"line":13,"column":152}}],"line":13},"8":{"loc":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"type":"if","locations":[{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},{"start":{"line":16,"column":8},"end":{"line":16,"column":70}}],"line":16},"9":{"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"type":"if","locations":[{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},{"start":{"line":18,"column":12},"end":{"line":18,"column":169}}],"line":18},"10":{"loc":{"start":{"line":18,"column":23},"end":{"line":18,"column":158}},"type":"binary-expr","locations":[{"start":{"line":18,"column":23},"end":{"line":18,"column":24}},{"start":{"line":18,"column":29},"end":{"line":18,"column":125}},{"start":{"line":18,"column":130},"end":{"line":18,"column":158}}],"line":18},"11":{"loc":{"start":{"line":18,"column":33},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":45},"end":{"line":18,"column":56}},{"start":{"line":18,"column":59},"end":{"line":18,"column":125}}],"line":18},"12":{"loc":{"start":{"line":18,"column":59},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},{"start":{"line":18,"column":119},"end":{"line":18,"column":125}}],"line":18},"13":{"loc":{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},"type":"binary-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":77}},{"start":{"line":18,"column":82},"end":{"line":18,"column":115}}],"line":18},"14":{"loc":{"start":{"line":18,"column":82},"end":{"line":18,"column":112}},"type":"binary-expr","locations":[{"start":{"line":18,"column":83},"end":{"line":18,"column":98}},{"start":{"line":18,"column":103},"end":{"line":18,"column":112}}],"line":18},"15":{"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"type":"if","locations":[{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},{"start":{"line":19,"column":12},"end":{"line":19,"column":52}}],"line":19},"16":{"loc":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"type":"switch","locations":[{"start":{"line":21,"column":16},"end":{"line":21,"column":23}},{"start":{"line":21,"column":24},"end":{"line":21,"column":46}},{"start":{"line":22,"column":16},"end":{"line":22,"column":72}},{"start":{"line":23,"column":16},"end":{"line":23,"column":65}},{"start":{"line":24,"column":16},"end":{"line":24,"column":65}},{"start":{"line":25,"column":16},"end":{"line":31,"column":43}}],"line":20},"17":{"loc":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"type":"if","locations":[{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},{"start":{"line":26,"column":20},"end":{"line":26,"column":128}}],"line":26},"18":{"loc":{"start":{"line":26,"column":24},"end":{"line":26,"column":106}},"type":"binary-expr","locations":[{"start":{"line":26,"column":24},"end":{"line":26,"column":74}},{"start":{"line":26,"column":79},"end":{"line":26,"column":90}},{"start":{"line":26,"column":94},"end":{"line":26,"column":105}}],"line":26},"19":{"loc":{"start":{"line":26,"column":42},"end":{"line":26,"column":73}},"type":"binary-expr","locations":[{"start":{"line":26,"column":42},"end":{"line":26,"column":54}},{"start":{"line":26,"column":58},"end":{"line":26,"column":73}}],"line":26},"20":{"loc":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"type":"if","locations":[{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},{"start":{"line":27,"column":20},"end":{"line":27,"column":106}}],"line":27},"21":{"loc":{"start":{"line":27,"column":24},"end":{"line":27,"column":77}},"type":"binary-expr","locations":[{"start":{"line":27,"column":24},"end":{"line":27,"column":35}},{"start":{"line":27,"column":40},"end":{"line":27,"column":42}},{"start":{"line":27,"column":47},"end":{"line":27,"column":59}},{"start":{"line":27,"column":63},"end":{"line":27,"column":75}}],"line":27},"22":{"loc":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"type":"if","locations":[{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},{"start":{"line":28,"column":20},"end":{"line":28,"column":89}}],"line":28},"23":{"loc":{"start":{"line":28,"column":24},"end":{"line":28,"column":53}},"type":"binary-expr","locations":[{"start":{"line":28,"column":24},"end":{"line":28,"column":35}},{"start":{"line":28,"column":39},"end":{"line":28,"column":53}}],"line":28},"24":{"loc":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"type":"if","locations":[{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},{"start":{"line":29,"column":20},"end":{"line":29,"column":87}}],"line":29},"25":{"loc":{"start":{"line":29,"column":24},"end":{"line":29,"column":43}},"type":"binary-expr","locations":[{"start":{"line":29,"column":24},"end":{"line":29,"column":25}},{"start":{"line":29,"column":29},"end":{"line":29,"column":43}}],"line":29},"26":{"loc":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"type":"if","locations":[{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},{"start":{"line":30,"column":20},"end":{"line":30,"column":42}}],"line":30},"27":{"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},{"start":{"line":35,"column":8},"end":{"line":35,"column":35}}],"line":35},"28":{"loc":{"start":{"line":35,"column":52},"end":{"line":35,"column":74}},"type":"cond-expr","locations":[{"start":{"line":35,"column":60},"end":{"line":35,"column":65}},{"start":{"line":35,"column":68},"end":{"line":35,"column":74}}],"line":35},"29":{"loc":{"start":{"line":55,"column":12},"end":{"line":71,"column":13}},"type":"switch","locations":[{"start":{"line":56,"column":16},"end":{"line":61,"column":59}},{"start":{"line":62,"column":16},"end":{"line":67,"column":70}},{"start":{"line":68,"column":16},"end":{"line":70,"column":42}}],"line":55},"30":{"loc":{"start":{"line":93,"column":12},"end":{"line":104,"column":13}},"type":"switch","locations":[{"start":{"line":94,"column":16},"end":{"line":99,"column":59}},{"start":{"line":100,"column":16},"end":{"line":103,"column":42}}],"line":93},"31":{"loc":{"start":{"line":110,"column":12},"end":{"line":125,"column":13}},"type":"switch","locations":[{"start":{"line":111,"column":16},"end":{"line":111,"column":61}},{"start":{"line":112,"column":16},"end":{"line":118,"column":69}},{"start":{"line":119,"column":16},"end":{"line":124,"column":42}}],"line":110},"32":{"loc":{"start":{"line":131,"column":12},"end":{"line":164,"column":13}},"type":"switch","locations":[{"start":{"line":132,"column":16},"end":{"line":132,"column":61}},{"start":{"line":133,"column":16},"end":{"line":139,"column":69}},{"start":{"line":140,"column":16},"end":{"line":148,"column":70}},{"start":{"line":149,"column":16},"end":{"line":158,"column":70}},{"start":{"line":159,"column":16},"end":{"line":163,"column":42}}],"line":131},"33":{"loc":{"start":{"line":170,"column":12},"end":{"line":183,"column":13}},"type":"switch","locations":[{"start":{"line":171,"column":16},"end":{"line":171,"column":61}},{"start":{"line":172,"column":16},"end":{"line":178,"column":70}},{"start":{"line":179,"column":16},"end":{"line":182,"column":42}}],"line":170},"34":{"loc":{"start":{"line":189,"column":12},"end":{"line":222,"column":13}},"type":"switch","locations":[{"start":{"line":190,"column":16},"end":{"line":192,"column":57}},{"start":{"line":193,"column":16},"end":{"line":199,"column":69}},{"start":{"line":200,"column":16},"end":{"line":209,"column":70}},{"start":{"line":210,"column":16},"end":{"line":217,"column":145}},{"start":{"line":218,"column":16},"end":{"line":221,"column":42}}],"line":189}},"s":{"0":1,"1":21,"2":17,"3":9,"4":21,"5":21,"6":0,"7":0,"8":0,"9":0,"10":30,"11":9,"12":1,"13":9,"14":21,"15":0,"16":21,"17":9,"18":0,"19":27,"20":30,"21":30,"22":0,"23":30,"24":60,"25":60,"26":0,"27":60,"28":0,"29":60,"30":30,"31":30,"32":21,"33":21,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":9,"42":9,"43":9,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":30,"60":0,"61":0,"62":60,"63":9,"64":0,"65":9,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1,"72":1,"73":1,"74":1,"75":1,"76":1,"77":1,"78":5,"79":14,"80":1,"81":5,"82":14,"83":1,"84":4,"85":4,"86":12,"87":4,"88":4,"89":4,"90":4,"91":4,"92":4,"93":4,"94":1,"95":1,"96":5,"97":5,"98":5,"99":1,"100":5,"101":5,"102":1,"103":1,"104":1,"105":2,"106":1,"107":1,"108":1,"109":1,"110":1,"111":1,"112":1,"113":1,"114":1,"115":3,"116":1,"117":1,"118":1,"119":1,"120":1,"121":1,"122":1,"123":1,"124":1,"125":1,"126":1,"127":5,"128":1,"129":1,"130":1,"131":1,"132":1,"133":3,"134":1,"135":1,"136":1,"137":1,"138":1,"139":1,"140":1,"141":1,"142":1,"143":1,"144":1,"145":1,"146":1,"147":3,"148":1,"149":1,"150":1,"151":1,"152":1,"153":1,"154":1,"155":1,"156":1,"157":5,"158":1,"159":0,"160":1,"161":1,"162":1,"163":1,"164":1,"165":1,"166":1,"167":1,"168":1,"169":1,"170":1,"171":1,"172":1},"f":{"0":9,"1":21,"2":17,"3":9,"4":21,"5":0,"6":30,"7":9,"8":21,"9":0,"10":27,"11":30,"12":30,"13":5,"14":14,"15":5,"16":14,"17":4,"18":4,"19":12,"20":4,"21":1,"22":5,"23":5,"24":5,"25":5,"26":1,"27":1,"28":2,"29":1,"30":1,"31":1,"32":3,"33":1,"34":1,"35":5,"36":3,"37":1,"38":1,"39":3,"40":1,"41":1,"42":5,"43":0},"b":{"0":[1,1,1],"1":[4,17],"2":[9,9],"3":[9,21],"4":[9,9],"5":[1,1,1],"6":[0,21],"7":[9,9],"8":[0,30],"9":[0,60],"10":[60,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,60],"16":[30,30,21,0,0,9],"17":[9,0],"18":[9,9,9],"19":[9,0],"20":[0,0],"21":[0,0,0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,9],"28":[9,0],"29":[4,4,4],"30":[1,1],"31":[1,1,1],"32":[1,1,1,1,1],"33":[1,1,1],"34":[1,1,1,1,1]},"inputSourceMap":{"version":3,"file":"/app/app/test/integrations/auth.spec.ts","sources":["/app/app/test/integrations/auth.spec.ts"],"names":[],"mappings":"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","sourcesContent":["import { strict as assert } from 'assert'\nimport knex from '../../libs/knex'\n\nimport app from '../../../'\nimport {MockedUser, MockedUserCredetials} from './mock.user'\nconst chai = require('chai')\nconst sinon = require('sinon')\nconst chaiHttp = require('chai-http')\nimport {encrypt} from '../../services/crypto'\nimport * as auth from '../../../app/services/auth'\nimport userService from '../../services/users'\nexport const filterAuthToken = (arr) => arr.filter(it => it.includes('token=Bearer'))[0]\nexport const filterRefreshToken = (arr) => arr.filter(it => it.includes('refresh'))[0]\n\nchai.use(chaiHttp)\nasync function registerUser() {\n    sinon.stub(auth, 'sendConfirmationEmail').callsFake(function fakeFn() {return true})\n\n    await chai\n        .request(app)\n        .post('/auth/registration')\n        .send(MockedUser)\n\n    await chai\n        .request(app)\n        .get(`/auth/confirm-email/${encrypt(MockedUser.email)}`)\n        .set('content-type', 'application/json')\n}\ndescribe('routes : auth', () => {\n  beforeEach(() => {\n    return knex.migrate\n        .rollback()\n        .then(() => {\n          return knex.migrate.latest()\n        })\n        .then(() => {\n          return knex.seed.run()\n        })\n  })\n  afterEach(() => {\n    sinon.restore()\n    return knex.migrate.rollback()\n  })\n\n  it('should register a new user', async () => {\n    sinon.stub(auth, 'sendConfirmationEmail').callsFake(function fakeFn() {return true})\n\n    const res = await chai\n                        .request(app)\n                        .post('/auth/registration')\n                        .send(MockedUser)\n    assert.strictEqual(res.status, 200)\n  })\n\n  it('should login user and provide tokens', async () => {\n      await registerUser()\n\n      const res = await chai\n                          .request(app)\n                          .post(`/auth/login`)\n                          .set('content-type', 'application/json')\n                          .send(MockedUserCredetials)\n\n      assert.strictEqual(filterAuthToken(res.headers['set-cookie']).includes('token=Bearer'), true)\n      assert.strictEqual(filterRefreshToken(res.headers['set-cookie']).includes('refreshToken='), true)\n      assert.strictEqual(res.statusCode, 200)\n  })\n\n  it('should give credentials via refresh token only once', async () => {\n      await registerUser()\n\n      const loginRes = await chai\n          .request(app)\n          .post(`/auth/login`)\n          .set('content-type', 'application/json')\n          .send(MockedUserCredetials)\n\n      const refreshToken = loginRes.headers['set-cookie']\n          .filter(it => it.includes('refresh'))[0].split('refreshToken=')[1].split(';')[0]\n\n      const res = await chai\n          .request(app)\n          .post(`/auth/refresh-token`)\n          .send({refreshToken})\n          .set('content-type', 'application/json')\n\n      assert.strictEqual(filterAuthToken(res.headers['set-cookie']).includes('token=Bearer'), true)\n      assert.strictEqual(filterRefreshToken(res.headers['set-cookie']).includes('refreshToken='), true)\n      assert.strictEqual(res.statusCode, 200)\n\n      const secondRes = await chai\n          .request(app)\n          .post(`/auth/refresh-token`)\n          .send({refreshToken})\n          .set('content-type', 'application/json')\n\n      assert.strictEqual(secondRes.headers['set-cookie'], undefined)\n      assert.strictEqual(secondRes.statusCode, 403)\n  })\n\n  it('should update password on forgot password', async () => {\n      await registerUser()\n      const secondRes = await chai\n          .request(app)\n          .post(`/auth/forgot-password`)\n          .send({email: MockedUserCredetials.email})\n          .set('content-type', 'application/json')\n\n      assert.strictEqual(secondRes.statusCode, 200)\n  })\n\n  it('should change password', async () => {\n      sinon.stub(userService, 'sendNewPassword').callsFake(function fakeFn() {return true})\n      await registerUser()\n      const res = await chai\n          .request(app)\n          .post(`/auth/login`)\n          .set('content-type', 'application/json')\n          .send(MockedUserCredetials)\n      const token = filterAuthToken(res.headers['set-cookie'])\n      const refreshToken = filterRefreshToken(res.headers['set-cookie'])\n\n      const secondRes = await chai\n          .request(app)\n          .post(`/auth/change-password`)\n          .send({password: MockedUserCredetials.password+'1'})\n          .set('Cookie', token+';'+refreshToken)\n          .set('content-type', 'application/json')\n      assert.strictEqual(secondRes.statusCode, 200)\n\n      const newPasswordRes = await chai\n          .request(app)\n          .post(`/auth/login`)\n          .set('content-type', 'application/json')\n          .send({email: MockedUserCredetials.email, password:  MockedUserCredetials.password+'1'})\n\n      assert.strictEqual(newPasswordRes.statusCode, 200)\n  })\n})\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"841c406a64f71e147a52a6536fb6a1c05276b12a","contentHash":"8e7b940c820816174d4e07076c599e02a0aff953ab8a03c15967888747b01e6a"},"/app/app/libs/knex/index.ts":{"path":"/app/app/libs/knex/index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":15},"end":{"line":3,"column":38}},"2":{"start":{"line":4,"column":20},"end":{"line":4,"column":50}},"3":{"start":{"line":4,"column":68},"end":{"line":4,"column":98}},"4":{"start":{"line":4,"column":114},"end":{"line":4,"column":142}},"5":{"start":{"line":4,"column":164},"end":{"line":4,"column":198}},"6":{"start":{"line":4,"column":216},"end":{"line":4,"column":246}},"7":{"start":{"line":6,"column":11},"end":{"line":23,"column":2}},"8":{"start":{"line":24,"column":0},"end":{"line":24,"column":23}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/libs/knex/index.ts","sources":["/app/app/libs/knex/index.ts"],"names":[],"mappings":";;AAAA,uCAAiC;AAG/B,IAAA,8CAAa,EACb,8CAAa,EACb,0CAAW,EACX,sDAAiB,EACjB,8CAAa,CACJ;AACX,2BAA2B;AAC3B,IAAM,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;IAC3B,MAAM,EAAE,IAAI;IACZ,OAAO,EAAE,MAAM;IACf,UAAU,EAAE;QACV,IAAI,EAAE,aAAa;QACnB,IAAI,EAAE,aAAa;QACnB,QAAQ,EAAE,iBAAiB;QAC3B,QAAQ,EAAE,WAAW;QACrB,IAAI,EAAE,aAAa;KACpB;IACD,UAAU,EAAE;QACV,SAAS,EAAE,SAAS,GAAG,sBAAsB;QAC7C,SAAS,EAAE,iBAAiB;KAC7B;IACD,KAAK,EAAE;QACL,SAAS,EAAE,SAAS,GAAG,gBAAgB;KACxC;CACF,CAAC,CAAC;AACH,kBAAe,IAAI,CAAC","sourcesContent":["import config from '../../config'\n\nconst {\n  POSTGRES_HOST,\n  POSTGRES_USER,\n  POSTGRES_DB,\n  POSTGRES_PASSWORD,\n  POSTGRES_PORT,\n} = config;\n// tslint:disable-next-line\nconst knex = require('knex')({\n  client: 'pg',\n  version: '11.1',\n  connection: {\n    host: POSTGRES_HOST,\n    user: POSTGRES_USER,\n    password: POSTGRES_PASSWORD,\n    database: POSTGRES_DB,\n    port: POSTGRES_PORT,\n  },\n  migrations: {\n    directory: __dirname + '/../../db/migrations',\n    tableName: 'knex-migrations',\n  },\n  seeds: {\n    directory: __dirname + '/../../db/seed',\n  },\n});\nexport default knex;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3cb20efed12b872ddc8451b8e7184ceb41003e49","contentHash":"72a2d2a4da3f4cef1a872301584e5521fad42073683b94e04a1f652552deaadb"},"/app/app/config/index.ts":{"path":"/app/app/config/index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":13},"end":{"line":3,"column":30}},"2":{"start":{"line":4,"column":0},"end":{"line":6,"column":1}},"3":{"start":{"line":5,"column":4},"end":{"line":5,"column":20}},"4":{"start":{"line":7,"column":0},"end":{"line":25,"column":2}}},"fnMap":{},"branchMap":{"0":{"loc":{"start":{"line":4,"column":0},"end":{"line":6,"column":1}},"type":"if","locations":[{"start":{"line":4,"column":0},"end":{"line":6,"column":1}},{"start":{"line":4,"column":0},"end":{"line":6,"column":1}}],"line":4},"1":{"loc":{"start":{"line":4,"column":4},"end":{"line":4,"column":77}},"type":"binary-expr","locations":[{"start":{"line":4,"column":4},"end":{"line":4,"column":42}},{"start":{"line":4,"column":46},"end":{"line":4,"column":77}}],"line":4},"2":{"loc":{"start":{"line":8,"column":9},"end":{"line":8,"column":46}},"type":"binary-expr","locations":[{"start":{"line":8,"column":9},"end":{"line":8,"column":29}},{"start":{"line":8,"column":33},"end":{"line":8,"column":46}}],"line":8},"3":{"loc":{"start":{"line":10,"column":19},"end":{"line":10,"column":58}},"type":"binary-expr","locations":[{"start":{"line":10,"column":19},"end":{"line":10,"column":44}},{"start":{"line":10,"column":48},"end":{"line":10,"column":58}}],"line":10},"4":{"loc":{"start":{"line":11,"column":19},"end":{"line":11,"column":58}},"type":"binary-expr","locations":[{"start":{"line":11,"column":19},"end":{"line":11,"column":44}},{"start":{"line":11,"column":48},"end":{"line":11,"column":58}}],"line":11},"5":{"loc":{"start":{"line":12,"column":17},"end":{"line":12,"column":54}},"type":"binary-expr","locations":[{"start":{"line":12,"column":17},"end":{"line":12,"column":40}},{"start":{"line":12,"column":44},"end":{"line":12,"column":54}}],"line":12},"6":{"loc":{"start":{"line":13,"column":23},"end":{"line":13,"column":66}},"type":"binary-expr","locations":[{"start":{"line":13,"column":23},"end":{"line":13,"column":52}},{"start":{"line":13,"column":56},"end":{"line":13,"column":66}}],"line":13},"7":{"loc":{"start":{"line":14,"column":19},"end":{"line":14,"column":52}},"type":"binary-expr","locations":[{"start":{"line":14,"column":19},"end":{"line":14,"column":44}},{"start":{"line":14,"column":48},"end":{"line":14,"column":52}}],"line":14},"8":{"loc":{"start":{"line":15,"column":10},"end":{"line":15,"column":48}},"type":"binary-expr","locations":[{"start":{"line":15,"column":10},"end":{"line":15,"column":40}},{"start":{"line":15,"column":44},"end":{"line":15,"column":48}}],"line":15},"9":{"loc":{"start":{"line":22,"column":16},"end":{"line":22,"column":63}},"type":"binary-expr","locations":[{"start":{"line":22,"column":16},"end":{"line":22,"column":38}},{"start":{"line":22,"column":42},"end":{"line":22,"column":63}}],"line":22},"10":{"loc":{"start":{"line":23,"column":10},"end":{"line":23,"column":53}},"type":"binary-expr","locations":[{"start":{"line":23,"column":10},"end":{"line":23,"column":26}},{"start":{"line":23,"column":30},"end":{"line":23,"column":53}}],"line":23},"11":{"loc":{"start":{"line":24,"column":27},"end":{"line":24,"column":70}},"type":"binary-expr","locations":[{"start":{"line":24,"column":27},"end":{"line":24,"column":60}},{"start":{"line":24,"column":64},"end":{"line":24,"column":70}}],"line":24}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{"0":[1,0],"1":[1,1],"2":[1,0],"3":[1,0],"4":[1,0],"5":[1,0],"6":[1,0],"7":[1,0],"8":[1,0],"9":[1,0],"10":[1,0],"11":[1,0]},"inputSourceMap":{"version":3,"file":"/app/app/config/index.ts","sources":["/app/app/config/index.ts"],"names":[],"mappings":";;AAAA,+BAAgC;AAChC,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,aAAa,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,MAAM,EAAE;IAC7E,MAAM,CAAC,MAAM,EAAE,CAAA;CAChB;AACD,kBAAe;IACb,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,QAAQ,IAAI,aAAa;IAC1C,IAAI,EAAE,OAAO,CAAC,GAAG,EAAE;IAEnB,aAAa,EAAE,OAAO,CAAC,GAAG,CAAC,aAAa,IAAI,UAAU;IACtD,aAAa,EAAE,OAAO,CAAC,GAAG,CAAC,aAAa,IAAI,UAAU;IACtD,WAAW,EAAE,OAAO,CAAC,GAAG,CAAC,WAAW,IAAI,UAAU;IAClD,iBAAiB,EAAE,OAAO,CAAC,GAAG,CAAC,iBAAiB,IAAI,UAAU;IAC9D,aAAa,EAAE,OAAO,CAAC,GAAG,CAAC,aAAa,IAAI,IAAI;IAEhD,IAAI,EAAE,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,EAAE,CAAC,IAAG,IAAI;IAE3C,gBAAgB,EAAE,OAAO,CAAC,GAAG,CAAC,gBAAgB;IAC9C,oBAAoB,EAAE,OAAO,CAAC,GAAG,CAAC,oBAAoB;IACtD,mBAAmB,EAAE,OAAO,CAAC,GAAG,CAAC,mBAAmB;IAEpD,mBAAmB,EAAE,OAAO,CAAC,GAAG,CAAC,mBAAmB;IACpD,eAAe,EAAE,OAAO,CAAC,GAAG,CAAC,eAAe;IAC5C,mBAAmB,EAAE,OAAO,CAAC,GAAG,CAAC,mBAAmB;IAEpD,UAAU,EAAE,OAAO,CAAC,GAAG,CAAC,UAAU,IAAI,qBAAqB;IAC3D,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,IAAI,IAAI,uBAAuB;IACjD,qBAAqB,EAAE,OAAO,CAAC,GAAG,CAAC,qBAAqB,IAAI,MAAM;CACnE,CAAC","sourcesContent":["import * as dotEnv from 'dotenv'\nif (process.env.NODE_ENV === 'development' || process.env.NODE_ENV === 'test') {\n  dotEnv.config()\n}\nexport default {\n  env: process.env.NODE_ENV || 'development',\n  root: process.cwd(),\n\n  POSTGRES_HOST: process.env.POSTGRES_HOST || 'postgres',\n  POSTGRES_USER: process.env.POSTGRES_USER || 'postgres',\n  POSTGRES_DB: process.env.POSTGRES_DB || 'postgres',\n  POSTGRES_PASSWORD: process.env.POSTGRES_PASSWORD || 'postgres',\n  POSTGRES_PORT: process.env.POSTGRES_PORT || 5432,\n\n  PORT: parseInt(process.env.PORT, 10)|| 5000,\n\n  GOOGLE_CLIENT_ID: process.env.GOOGLE_CLIENT_ID,\n  GOOGLE_CLIENT_SECRET: process.env.GOOGLE_CLIENT_SECRET,\n  GOOGLE_REDIRECT_URI: process.env.GOOGLE_REDIRECT_URI,\n\n  GMAIL_REFRESH_TOKEN: process.env.GMAIL_REFRESH_TOKEN,\n  GMAIL_CLIENT_ID: process.env.GMAIL_CLIENT_ID,\n  GMAIL_CLIENT_SECRET: process.env.GMAIL_CLIENT_SECRET,\n\n  JWT_SECRET: process.env.JWT_SECRET || 'asdasdasdasdasdssss',\n  HOST: process.env.HOST || 'http://localhost:3050',\n  GAME_CHAT_ROOM_PREFIX: process.env.GAME_CHAT_ROOM_PREFIX || 'game'\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4597d6a1de883994c3b6b2f172b79e22db72dad9","contentHash":"48d159762f5d51d14ff82ed786c7fa6cc94fdc4370cd72b3cfcd4de01afa6052"},"/app/index.ts":{"path":"/app/index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":10},"end":{"line":3,"column":24}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":44}},"3":{"start":{"line":5,"column":13},"end":{"line":5,"column":42}},"4":{"start":{"line":6,"column":17},"end":{"line":6,"column":47}},"5":{"start":{"line":7,"column":10},"end":{"line":7,"column":19}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":41}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":32}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":36}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":32}},"10":{"start":{"line":12,"column":13},"end":{"line":12,"column":44}},"11":{"start":{"line":13,"column":0},"end":{"line":13,"column":37}},"12":{"start":{"line":14,"column":0},"end":{"line":14,"column":25}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/app/index.ts","sources":["/app/index.ts"],"names":[],"mappings":";;AAAA,yBAA0B;AAC1B,6CAA4C;AAC5C,2CAAsD;AACtD,gDAA2C;AAC3C,IAAM,GAAG,GAAG,IAAI,GAAG,EAAE,CAAC;AACtB,GAAG,CAAC,GAAG,CAAC,kBAAQ,CAAC,UAAU,EAAE,CAAC,CAAA;AAC9B,0BAAmB,CAAC,GAAG,CAAC,CAAC;AACzB,gBAAW,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;AAC/B,gBAAW,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AAC3B,IAAM,MAAM,GAAG,gBAAW,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AAC1C,gBAAW,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;AAChC,kBAAe,MAAM,CAAA","sourcesContent":["import * as Koa from 'koa'\nimport ServerUtils from './app/utils/server'\nimport {addSocketsToContext} from './app/sockets/init'\nimport passport from './app/libs/passport';\nconst app = new Koa();\napp.use(passport.initialize())\naddSocketsToContext(app);\nServerUtils.addMiddleware(app);\nServerUtils.addRoutes(app);\nconst server = ServerUtils.runServer(app);\nServerUtils.wrapSockets(server);\nexport default server\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4fbded3da7e2b3f471e4d2545ff6a428c6743d14","contentHash":"29ab1fadf4657796a8923a18d8172f88aff081124edb8c25553688b9a76d6d3f"},"/app/app/utils/server.ts":{"path":"/app/app/utils/server.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":15},"end":{"line":3,"column":35}},"2":{"start":{"line":4,"column":9},"end":{"line":4,"column":22}},"3":{"start":{"line":5,"column":11},"end":{"line":5,"column":26}},"4":{"start":{"line":6,"column":14},"end":{"line":6,"column":36}},"5":{"start":{"line":7,"column":19},"end":{"line":7,"column":40}},"6":{"start":{"line":8,"column":13},"end":{"line":8,"column":39}},"7":{"start":{"line":9,"column":28},"end":{"line":31,"column":3}},"8":{"start":{"line":12,"column":4},"end":{"line":15,"column":6}},"9":{"start":{"line":13,"column":23},"end":{"line":13,"column":94}},"10":{"start":{"line":14,"column":8},"end":{"line":14,"column":113}},"11":{"start":{"line":14,"column":46},"end":{"line":14,"column":109}},"12":{"start":{"line":16,"column":4},"end":{"line":18,"column":6}},"13":{"start":{"line":17,"column":8},"end":{"line":17,"column":129}},"14":{"start":{"line":19,"column":4},"end":{"line":25,"column":6}},"15":{"start":{"line":20,"column":21},"end":{"line":20,"column":23}},"16":{"start":{"line":21,"column":8},"end":{"line":23,"column":11}},"17":{"start":{"line":22,"column":12},"end":{"line":22,"column":103}},"18":{"start":{"line":24,"column":8},"end":{"line":24,"column":33}},"19":{"start":{"line":26,"column":4},"end":{"line":29,"column":6}},"20":{"start":{"line":27,"column":8},"end":{"line":27,"column":68}},"21":{"start":{"line":28,"column":8},"end":{"line":28,"column":65}},"22":{"start":{"line":30,"column":4},"end":{"line":30,"column":18}},"23":{"start":{"line":32,"column":0},"end":{"line":32,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":28},"end":{"line":9,"column":29}},"loc":{"start":{"line":9,"column":40},"end":{"line":31,"column":1}},"line":9},"1":{"name":"Server","decl":{"start":{"line":10,"column":13},"end":{"line":10,"column":19}},"loc":{"start":{"line":10,"column":22},"end":{"line":11,"column":5}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":12,"column":27},"end":{"line":12,"column":28}},"loc":{"start":{"line":12,"column":42},"end":{"line":15,"column":5}},"line":12},"3":{"name":"(anonymous_3)","decl":{"start":{"line":14,"column":25},"end":{"line":14,"column":26}},"loc":{"start":{"line":14,"column":44},"end":{"line":14,"column":111}},"line":14},"4":{"name":"(anonymous_4)","decl":{"start":{"line":16,"column":23},"end":{"line":16,"column":24}},"loc":{"start":{"line":16,"column":41},"end":{"line":18,"column":5}},"line":16},"5":{"name":"(anonymous_5)","decl":{"start":{"line":19,"column":23},"end":{"line":19,"column":24}},"loc":{"start":{"line":19,"column":38},"end":{"line":25,"column":5}},"line":19},"6":{"name":"(anonymous_6)","decl":{"start":{"line":21,"column":68},"end":{"line":21,"column":69}},"loc":{"start":{"line":21,"column":94},"end":{"line":23,"column":9}},"line":21},"7":{"name":"(anonymous_7)","decl":{"start":{"line":26,"column":25},"end":{"line":26,"column":26}},"loc":{"start":{"line":26,"column":43},"end":{"line":29,"column":5}},"line":26}},"branchMap":{"0":{"loc":{"start":{"line":17,"column":15},"end":{"line":17,"column":128}},"type":"cond-expr","locations":[{"start":{"line":17,"column":49},"end":{"line":17,"column":85}},{"start":{"line":17,"column":88},"end":{"line":17,"column":128}}],"line":17}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":4,"12":1,"13":1,"14":1,"15":1,"16":1,"17":3,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1},"f":{"0":1,"1":0,"2":1,"3":4,"4":1,"5":1,"6":3,"7":1},"b":{"0":[0,1]},"inputSourceMap":{"version":3,"file":"/app/app/utils/server.ts","sources":["/app/app/utils/server.ts"],"names":[],"mappings":";;AAAA,oCAA8B;AAC9B,uBAAwB;AACxB,2BAA4B;AAC5B,qCAAsC;AACtC,yCAA+B;AAC/B,wCAAyD;AAEzD;IAAA;IAmBA,CAAC;IAlBU,oBAAa,GAApB,UAAqB,GAAG;QACpB,IAAM,QAAQ,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,0BAA0B,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;QACzF,QAAQ,CAAC,OAAO,CAAC,UAAC,OAAO,IAAK,OAAA,OAAO,CAAC,0BAA0B,GAAG,OAAO,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAvD,CAAuD,CAAC,CAAC;IAC3F,CAAC;IACM,gBAAS,GAAhB,UAAiB,MAAM;QACnB,OAAO,MAAM,KAAK,gBAAM,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,gBAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,gBAAM,CAAC,IAAI,GAAC,CAAC,CAAC,CAAA;IAC5F,CAAC;IACM,gBAAS,GAAhB,UAAiB,GAAG;QAChB,IAAM,MAAM,GAAG,EAAE,CAAC;QAClB,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,aAAa,CAAC,CAAC,CAAC,OAAO,CAAC,UAAC,cAAc;YACvE,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,GAAC,cAAc,CAAC,CAAC,GAAG,CAAC,oBAAM,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,CAAA;QAC9E,CAAC,CAAC,CAAC;QACH,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;IAC7B,CAAC;IACM,kBAAW,GAAlB,UAAmB,MAAM;QACrB,oBAAa,CAAC,MAAM,CAAC,MAAM,EAAE,EAAC,WAAW,EAAE,KAAK,EAAC,CAAC,CAAC;QACnD,iBAAU,CAAC,MAAM,CAAC,MAAM,EAAE,EAAC,WAAW,EAAE,KAAK,EAAC,CAAC,CAAC;IACpD,CAAC;IACL,aAAC;AAAD,CAAC,AAnBD,IAmBC;AACD,kBAAe,MAAM,CAAA","sourcesContent":["import config from '../config'\nimport * as fs from 'fs'\nimport * as path from 'path'\nimport * as compose from 'koa-compose'\nimport cookie from 'koa-cookie'\nimport {gameSocket, generalSocket} from '../sockets/init'\n\nclass Server {\n    static addMiddleware(app): void {\n        const handlers = fs.readdirSync(path.join(__dirname, './../middleware/default/')).sort();\n        handlers.forEach((handler) => require('./../middleware/default/' + handler).init(app));\n    }\n    static runServer(koaApp) {\n        return 'test' !== config.env ? koaApp.listen(config.PORT) : koaApp.listen(config.PORT+2)\n    }\n    static addRoutes(app): void {\n        const routes = [];\n        fs.readdirSync(path.join(__dirname, './../routes')).forEach((middlewarePath) => {\n            routes.push(require('./../routes/'+middlewarePath).use(cookie()).routes())\n        });\n        app.use(compose(routes));\n    }\n    static wrapSockets(server) {\n        generalSocket.attach(server, {pingTimeout: 60000});\n        gameSocket.attach(server, {pingTimeout: 60000});\n    }\n}\nexport default Server\n\n\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"61d64e3f75db61c1a9002b7486bde54a7f5479a7","contentHash":"ea9376dde8a3946512dd63376b5101934d38836f0bed168252fca0513dc42c91"},"/app/app/sockets/init.ts":{"path":"/app/app/sockets/init.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":20},"end":{"line":3,"column":44}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":43}},"3":{"start":{"line":5,"column":23},"end":{"line":5,"column":50}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":49}},"5":{"start":{"line":7,"column":26},"end":{"line":11,"column":5}},"6":{"start":{"line":7,"column":43},"end":{"line":11,"column":3}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":9,"column":4},"end":{"line":9,"column":45}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":18}},"10":{"start":{"line":12,"column":0},"end":{"line":12,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":26},"end":{"line":7,"column":27}},"loc":{"start":{"line":7,"column":41},"end":{"line":11,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":58},"end":{"line":7,"column":59}},"loc":{"start":{"line":7,"column":79},"end":{"line":11,"column":1}},"line":7}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":34,"8":34,"9":34,"10":1},"f":{"0":1,"1":34},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/sockets/init.ts","sources":["/app/app/sockets/init.ts"],"names":[],"mappings":";;AAAA,6CAAsC;AAWpC,qBAXK,qBAAU,CAWL;AAVZ,mDAA4C;AAS1C,wBATK,wBAAa,CASL;AAPf,IAAM,mBAAmB,GAAG,UAAC,GAAG,IAAK,OAAA,GAAG,CAAC,GAAG,CAAC,UAAC,GAAG,EAAE,IAAI;IACrD,GAAG,CAAC,MAAM,GAAG,qBAAU,CAAA;IACvB,GAAG,CAAC,SAAS,GAAG,wBAAa,CAAA;IAC7B,OAAO,IAAI,EAAE,CAAA;AACf,CAAC,CAAC,EAJmC,CAInC,CAAA;AAKA,kDAAmB","sourcesContent":["import gameSocket from './game-socket'\nimport generalSocket from './general-socket'\n\nconst addSocketsToContext = (app) => app.use((ctx, next) => {\n  ctx.ioGame = gameSocket\n  ctx.ioGeneral = generalSocket\n  return next()\n})\n\nexport {\n  generalSocket,\n  gameSocket,\n  addSocketsToContext,\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"23e9f0324ea1f315a810f374ae9c21a756dee8e3","contentHash":"0f9ae718759169255fb0b26fdfe7351fbb01cb408af9285529151f91dd8d0315"},"/app/app/sockets/game-socket.ts":{"path":"/app/app/sockets/game-socket.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":15},"end":{"line":3,"column":35}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":49}},"3":{"start":{"line":5,"column":0},"end":{"line":10,"column":3}},"4":{"start":{"line":6,"column":4},"end":{"line":9,"column":7}},"5":{"start":{"line":7,"column":8},"end":{"line":7,"column":60}},"6":{"start":{"line":8,"column":8},"end":{"line":8,"column":26}},"7":{"start":{"line":11,"column":0},"end":{"line":11,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":28},"end":{"line":5,"column":29}},"loc":{"start":{"line":5,"column":46},"end":{"line":10,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":22},"end":{"line":6,"column":23}},"loc":{"start":{"line":6,"column":38},"end":{"line":9,"column":5}},"line":6}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":1},"f":{"0":0,"1":0},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/sockets/game-socket.ts","sources":["/app/app/sockets/game-socket.ts"],"names":[],"mappings":";;AAAA,oCAAqC;AACrC,IAAM,UAAU,GAAG,QAAQ,CAAC,EAAC,IAAI,EAAE,YAAY,EAAC,CAAC,CAAC;AAClD,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,UAAC,MAAM;IACjC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,UAAC,IAAI;QACrB,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,yBAAuB,IAAM,CAAC,CAAC;QACpD,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;IACnB,CAAC,CAAC,CAAA;AACJ,CAAC,CAAC,CAAC;AACH,kBAAe,UAAU,CAAA","sourcesContent":["import * as socketIo from 'socket.io'\nconst gameSocket = socketIo({path: '/chat/game'});\ngameSocket.on('connection', (socket) => {\n  socket.on('join', (room) => {\n    process.stdout.write(`connected to room - ${room}`);\n    socket.join(room)\n  })\n});\nexport default gameSocket\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ad3707ca837a80371dcd69421574f0d7def298f8","contentHash":"593d13f94916b303b53cf98ef0b41a80dd6315e472630f32d392170ccd0f81ed"},"/app/app/sockets/general-socket.ts":{"path":"/app/app/sockets/general-socket.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":15},"end":{"line":3,"column":35}},"2":{"start":{"line":4,"column":20},"end":{"line":4,"column":55}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/sockets/general-socket.ts","sources":["/app/app/sockets/general-socket.ts"],"names":[],"mappings":";;AAAA,oCAAqC;AACrC,IAAM,aAAa,GAAG,QAAQ,CAAC,EAAC,IAAI,EAAE,eAAe,EAAC,CAAC,CAAC;AACxD,kBAAe,aAAa,CAAA","sourcesContent":["import * as socketIo from 'socket.io'\nconst generalSocket = socketIo({path: '/chat/general'});\nexport default generalSocket\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"44ec64966b4044cbcbd0c3f8f8539c4114026e1d","contentHash":"0caf5ebe257a52f86fb5cd5d40bffc66fe60533610a6aa9834d662b36cc7d518"},"/app/app/libs/passport.ts":{"path":"/app/app/libs/passport.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"13":{"start":{"line":12,"column":12},"end":{"line":12,"column":104}},"14":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"15":{"start":{"line":12,"column":57},"end":{"line":12,"column":68}},"16":{"start":{"line":12,"column":69},"end":{"line":12,"column":81}},"17":{"start":{"line":13,"column":4},"end":{"line":13,"column":157}},"18":{"start":{"line":13,"column":138},"end":{"line":13,"column":150}},"19":{"start":{"line":14,"column":23},"end":{"line":14,"column":68}},"20":{"start":{"line":14,"column":45},"end":{"line":14,"column":65}},"21":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"22":{"start":{"line":16,"column":15},"end":{"line":16,"column":70}},"23":{"start":{"line":17,"column":8},"end":{"line":34,"column":66}},"24":{"start":{"line":17,"column":18},"end":{"line":34,"column":66}},"25":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"26":{"start":{"line":18,"column":160},"end":{"line":18,"column":169}},"27":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"28":{"start":{"line":19,"column":26},"end":{"line":19,"column":52}},"29":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"30":{"start":{"line":21,"column":32},"end":{"line":21,"column":39}},"31":{"start":{"line":21,"column":40},"end":{"line":21,"column":46}},"32":{"start":{"line":22,"column":24},"end":{"line":22,"column":34}},"33":{"start":{"line":22,"column":35},"end":{"line":22,"column":72}},"34":{"start":{"line":23,"column":24},"end":{"line":23,"column":34}},"35":{"start":{"line":23,"column":35},"end":{"line":23,"column":45}},"36":{"start":{"line":23,"column":46},"end":{"line":23,"column":55}},"37":{"start":{"line":23,"column":56},"end":{"line":23,"column":65}},"38":{"start":{"line":24,"column":24},"end":{"line":24,"column":41}},"39":{"start":{"line":24,"column":42},"end":{"line":24,"column":55}},"40":{"start":{"line":24,"column":56},"end":{"line":24,"column":65}},"41":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"42":{"start":{"line":26,"column":110},"end":{"line":26,"column":116}},"43":{"start":{"line":26,"column":117},"end":{"line":26,"column":126}},"44":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"45":{"start":{"line":27,"column":81},"end":{"line":27,"column":97}},"46":{"start":{"line":27,"column":98},"end":{"line":27,"column":104}},"47":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"48":{"start":{"line":28,"column":57},"end":{"line":28,"column":72}},"49":{"start":{"line":28,"column":73},"end":{"line":28,"column":80}},"50":{"start":{"line":28,"column":81},"end":{"line":28,"column":87}},"51":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"52":{"start":{"line":29,"column":47},"end":{"line":29,"column":62}},"53":{"start":{"line":29,"column":63},"end":{"line":29,"column":78}},"54":{"start":{"line":29,"column":79},"end":{"line":29,"column":85}},"55":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"56":{"start":{"line":30,"column":30},"end":{"line":30,"column":42}},"57":{"start":{"line":31,"column":20},"end":{"line":31,"column":33}},"58":{"start":{"line":31,"column":34},"end":{"line":31,"column":43}},"59":{"start":{"line":33,"column":12},"end":{"line":33,"column":39}},"60":{"start":{"line":34,"column":22},"end":{"line":34,"column":34}},"61":{"start":{"line":34,"column":35},"end":{"line":34,"column":41}},"62":{"start":{"line":34,"column":54},"end":{"line":34,"column":64}},"63":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"64":{"start":{"line":35,"column":23},"end":{"line":35,"column":35}},"65":{"start":{"line":35,"column":36},"end":{"line":35,"column":89}},"66":{"start":{"line":38,"column":0},"end":{"line":38,"column":62}},"67":{"start":{"line":39,"column":10},"end":{"line":39,"column":33}},"68":{"start":{"line":40,"column":15},"end":{"line":40,"column":38}},"69":{"start":{"line":41,"column":15},"end":{"line":41,"column":32}},"70":{"start":{"line":42,"column":16},"end":{"line":42,"column":46}},"71":{"start":{"line":43,"column":15},"end":{"line":43,"column":35}},"72":{"start":{"line":44,"column":21},"end":{"line":44,"column":47}},"73":{"start":{"line":45,"column":18},"end":{"line":45,"column":45}},"74":{"start":{"line":46,"column":13},"end":{"line":46,"column":42}},"75":{"start":{"line":47,"column":21},"end":{"line":47,"column":55}},"76":{"start":{"line":48,"column":21},"end":{"line":48,"column":44}},"77":{"start":{"line":49,"column":0},"end":{"line":55,"column":4}},"78":{"start":{"line":54,"column":4},"end":{"line":54,"column":44}},"79":{"start":{"line":56,"column":0},"end":{"line":56,"column":18}},"80":{"start":{"line":58,"column":16},"end":{"line":58,"column":20}},"81":{"start":{"line":59,"column":15},"end":{"line":59,"column":17}},"82":{"start":{"line":60,"column":26},"end":{"line":67,"column":5}},"83":{"start":{"line":61,"column":8},"end":{"line":66,"column":9}},"84":{"start":{"line":62,"column":12},"end":{"line":62,"column":94}},"85":{"start":{"line":65,"column":12},"end":{"line":65,"column":25}},"86":{"start":{"line":68,"column":4},"end":{"line":68,"column":51}},"87":{"start":{"line":69,"column":4},"end":{"line":69,"column":42}},"88":{"start":{"line":70,"column":4},"end":{"line":88,"column":12}},"89":{"start":{"line":70,"column":67},"end":{"line":88,"column":7}},"90":{"start":{"line":72,"column":8},"end":{"line":87,"column":11}},"91":{"start":{"line":73,"column":12},"end":{"line":86,"column":13}},"92":{"start":{"line":75,"column":20},"end":{"line":75,"column":36}},"93":{"start":{"line":76,"column":20},"end":{"line":76,"column":70}},"94":{"start":{"line":78,"column":20},"end":{"line":78,"column":37}},"95":{"start":{"line":79,"column":20},"end":{"line":81,"column":21}},"96":{"start":{"line":80,"column":24},"end":{"line":80,"column":65}},"97":{"start":{"line":82,"column":20},"end":{"line":84,"column":21}},"98":{"start":{"line":83,"column":24},"end":{"line":83,"column":97}},"99":{"start":{"line":85,"column":20},"end":{"line":85,"column":42}},"100":{"start":{"line":89,"column":4},"end":{"line":118,"column":12}},"101":{"start":{"line":89,"column":72},"end":{"line":118,"column":7}},"102":{"start":{"line":91,"column":8},"end":{"line":117,"column":11}},"103":{"start":{"line":92,"column":12},"end":{"line":116,"column":13}},"104":{"start":{"line":94,"column":20},"end":{"line":94,"column":46}},"105":{"start":{"line":95,"column":20},"end":{"line":95,"column":93}},"106":{"start":{"line":96,"column":20},"end":{"line":96,"column":90}},"107":{"start":{"line":98,"column":20},"end":{"line":98,"column":37}},"108":{"start":{"line":99,"column":20},"end":{"line":101,"column":21}},"109":{"start":{"line":100,"column":24},"end":{"line":100,"column":63}},"110":{"start":{"line":102,"column":20},"end":{"line":102,"column":85}},"111":{"start":{"line":104,"column":20},"end":{"line":104,"column":48}},"112":{"start":{"line":105,"column":20},"end":{"line":105,"column":90}},"113":{"start":{"line":107,"column":20},"end":{"line":107,"column":30}},"114":{"start":{"line":108,"column":20},"end":{"line":108,"column":72}},"115":{"start":{"line":109,"column":20},"end":{"line":109,"column":68}},"116":{"start":{"line":110,"column":20},"end":{"line":110,"column":79}},"117":{"start":{"line":111,"column":20},"end":{"line":111,"column":65}},"118":{"start":{"line":113,"column":20},"end":{"line":113,"column":36}},"119":{"start":{"line":114,"column":20},"end":{"line":114,"column":59}},"120":{"start":{"line":115,"column":24},"end":{"line":115,"column":46}},"121":{"start":{"line":120,"column":0},"end":{"line":120,"column":27}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":48},"end":{"line":11,"column":49}},"loc":{"start":{"line":11,"column":73},"end":{"line":37,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":12,"column":30},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":41},"end":{"line":12,"column":83}},"line":12},"9":{"name":"(anonymous_9)","decl":{"start":{"line":13,"column":125},"end":{"line":13,"column":126}},"loc":{"start":{"line":13,"column":136},"end":{"line":13,"column":152}},"line":13},"10":{"name":"verb","decl":{"start":{"line":14,"column":13},"end":{"line":14,"column":17}},"loc":{"start":{"line":14,"column":21},"end":{"line":14,"column":70}},"line":14},"11":{"name":"(anonymous_11)","decl":{"start":{"line":14,"column":30},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":43},"end":{"line":14,"column":67}},"line":14},"12":{"name":"step","decl":{"start":{"line":15,"column":13},"end":{"line":15,"column":17}},"loc":{"start":{"line":15,"column":22},"end":{"line":36,"column":5}},"line":15},"13":{"name":"(anonymous_13)","decl":{"start":{"line":53,"column":3},"end":{"line":53,"column":4}},"loc":{"start":{"line":53,"column":55},"end":{"line":55,"column":1}},"line":53},"14":{"name":"localStrategies","decl":{"start":{"line":57,"column":9},"end":{"line":57,"column":24}},"loc":{"start":{"line":57,"column":27},"end":{"line":119,"column":1}},"line":57},"15":{"name":"(anonymous_15)","decl":{"start":{"line":60,"column":26},"end":{"line":60,"column":27}},"loc":{"start":{"line":60,"column":41},"end":{"line":67,"column":5}},"line":60},"16":{"name":"(anonymous_16)","decl":{"start":{"line":70,"column":40},"end":{"line":70,"column":41}},"loc":{"start":{"line":70,"column":65},"end":{"line":88,"column":9}},"line":70},"17":{"name":"(anonymous_17)","decl":{"start":{"line":70,"column":107},"end":{"line":70,"column":108}},"loc":{"start":{"line":70,"column":119},"end":{"line":88,"column":5}},"line":70},"18":{"name":"(anonymous_18)","decl":{"start":{"line":72,"column":33},"end":{"line":72,"column":34}},"loc":{"start":{"line":72,"column":47},"end":{"line":87,"column":9}},"line":72},"19":{"name":"(anonymous_19)","decl":{"start":{"line":89,"column":51},"end":{"line":89,"column":52}},"loc":{"start":{"line":89,"column":70},"end":{"line":118,"column":9}},"line":89},"20":{"name":"(anonymous_20)","decl":{"start":{"line":89,"column":112},"end":{"line":89,"column":113}},"loc":{"start":{"line":89,"column":124},"end":{"line":118,"column":5}},"line":89},"21":{"name":"(anonymous_21)","decl":{"start":{"line":91,"column":33},"end":{"line":91,"column":34}},"loc":{"start":{"line":91,"column":47},"end":{"line":117,"column":9}},"line":91}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":19},"end":{"line":11,"column":23}},{"start":{"line":11,"column":27},"end":{"line":11,"column":43}},{"start":{"line":11,"column":48},"end":{"line":37,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"type":"if","locations":[{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},{"start":{"line":12,"column":43},"end":{"line":12,"column":68}}],"line":12},"7":{"loc":{"start":{"line":13,"column":71},"end":{"line":13,"column":153}},"type":"binary-expr","locations":[{"start":{"line":13,"column":71},"end":{"line":13,"column":99}},{"start":{"line":13,"column":104},"end":{"line":13,"column":152}}],"line":13},"8":{"loc":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"type":"if","locations":[{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},{"start":{"line":16,"column":8},"end":{"line":16,"column":70}}],"line":16},"9":{"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"type":"if","locations":[{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},{"start":{"line":18,"column":12},"end":{"line":18,"column":169}}],"line":18},"10":{"loc":{"start":{"line":18,"column":23},"end":{"line":18,"column":158}},"type":"binary-expr","locations":[{"start":{"line":18,"column":23},"end":{"line":18,"column":24}},{"start":{"line":18,"column":29},"end":{"line":18,"column":125}},{"start":{"line":18,"column":130},"end":{"line":18,"column":158}}],"line":18},"11":{"loc":{"start":{"line":18,"column":33},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":45},"end":{"line":18,"column":56}},{"start":{"line":18,"column":59},"end":{"line":18,"column":125}}],"line":18},"12":{"loc":{"start":{"line":18,"column":59},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},{"start":{"line":18,"column":119},"end":{"line":18,"column":125}}],"line":18},"13":{"loc":{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},"type":"binary-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":77}},{"start":{"line":18,"column":82},"end":{"line":18,"column":115}}],"line":18},"14":{"loc":{"start":{"line":18,"column":82},"end":{"line":18,"column":112}},"type":"binary-expr","locations":[{"start":{"line":18,"column":83},"end":{"line":18,"column":98}},{"start":{"line":18,"column":103},"end":{"line":18,"column":112}}],"line":18},"15":{"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"type":"if","locations":[{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},{"start":{"line":19,"column":12},"end":{"line":19,"column":52}}],"line":19},"16":{"loc":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"type":"switch","locations":[{"start":{"line":21,"column":16},"end":{"line":21,"column":23}},{"start":{"line":21,"column":24},"end":{"line":21,"column":46}},{"start":{"line":22,"column":16},"end":{"line":22,"column":72}},{"start":{"line":23,"column":16},"end":{"line":23,"column":65}},{"start":{"line":24,"column":16},"end":{"line":24,"column":65}},{"start":{"line":25,"column":16},"end":{"line":31,"column":43}}],"line":20},"17":{"loc":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"type":"if","locations":[{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},{"start":{"line":26,"column":20},"end":{"line":26,"column":128}}],"line":26},"18":{"loc":{"start":{"line":26,"column":24},"end":{"line":26,"column":106}},"type":"binary-expr","locations":[{"start":{"line":26,"column":24},"end":{"line":26,"column":74}},{"start":{"line":26,"column":79},"end":{"line":26,"column":90}},{"start":{"line":26,"column":94},"end":{"line":26,"column":105}}],"line":26},"19":{"loc":{"start":{"line":26,"column":42},"end":{"line":26,"column":73}},"type":"binary-expr","locations":[{"start":{"line":26,"column":42},"end":{"line":26,"column":54}},{"start":{"line":26,"column":58},"end":{"line":26,"column":73}}],"line":26},"20":{"loc":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"type":"if","locations":[{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},{"start":{"line":27,"column":20},"end":{"line":27,"column":106}}],"line":27},"21":{"loc":{"start":{"line":27,"column":24},"end":{"line":27,"column":77}},"type":"binary-expr","locations":[{"start":{"line":27,"column":24},"end":{"line":27,"column":35}},{"start":{"line":27,"column":40},"end":{"line":27,"column":42}},{"start":{"line":27,"column":47},"end":{"line":27,"column":59}},{"start":{"line":27,"column":63},"end":{"line":27,"column":75}}],"line":27},"22":{"loc":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"type":"if","locations":[{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},{"start":{"line":28,"column":20},"end":{"line":28,"column":89}}],"line":28},"23":{"loc":{"start":{"line":28,"column":24},"end":{"line":28,"column":53}},"type":"binary-expr","locations":[{"start":{"line":28,"column":24},"end":{"line":28,"column":35}},{"start":{"line":28,"column":39},"end":{"line":28,"column":53}}],"line":28},"24":{"loc":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"type":"if","locations":[{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},{"start":{"line":29,"column":20},"end":{"line":29,"column":87}}],"line":29},"25":{"loc":{"start":{"line":29,"column":24},"end":{"line":29,"column":43}},"type":"binary-expr","locations":[{"start":{"line":29,"column":24},"end":{"line":29,"column":25}},{"start":{"line":29,"column":29},"end":{"line":29,"column":43}}],"line":29},"26":{"loc":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"type":"if","locations":[{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},{"start":{"line":30,"column":20},"end":{"line":30,"column":42}}],"line":30},"27":{"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},{"start":{"line":35,"column":8},"end":{"line":35,"column":35}}],"line":35},"28":{"loc":{"start":{"line":35,"column":52},"end":{"line":35,"column":74}},"type":"cond-expr","locations":[{"start":{"line":35,"column":60},"end":{"line":35,"column":65}},{"start":{"line":35,"column":68},"end":{"line":35,"column":74}}],"line":35},"29":{"loc":{"start":{"line":73,"column":12},"end":{"line":86,"column":13}},"type":"switch","locations":[{"start":{"line":74,"column":16},"end":{"line":76,"column":70}},{"start":{"line":77,"column":16},"end":{"line":85,"column":42}}],"line":73},"30":{"loc":{"start":{"line":79,"column":20},"end":{"line":81,"column":21}},"type":"if","locations":[{"start":{"line":79,"column":20},"end":{"line":81,"column":21}},{"start":{"line":79,"column":20},"end":{"line":81,"column":21}}],"line":79},"31":{"loc":{"start":{"line":82,"column":20},"end":{"line":84,"column":21}},"type":"if","locations":[{"start":{"line":82,"column":20},"end":{"line":84,"column":21}},{"start":{"line":82,"column":20},"end":{"line":84,"column":21}}],"line":82},"32":{"loc":{"start":{"line":92,"column":12},"end":{"line":116,"column":13}},"type":"switch","locations":[{"start":{"line":93,"column":16},"end":{"line":96,"column":90}},{"start":{"line":97,"column":16},"end":{"line":102,"column":85}},{"start":{"line":103,"column":16},"end":{"line":105,"column":90}},{"start":{"line":106,"column":16},"end":{"line":111,"column":65}},{"start":{"line":112,"column":16},"end":{"line":114,"column":59}},{"start":{"line":115,"column":16},"end":{"line":115,"column":46}}],"line":92},"33":{"loc":{"start":{"line":99,"column":20},"end":{"line":101,"column":21}},"type":"if","locations":[{"start":{"line":99,"column":20},"end":{"line":101,"column":21}},{"start":{"line":99,"column":20},"end":{"line":101,"column":21}}],"line":99}},"s":{"0":1,"1":2,"2":2,"3":3,"4":2,"5":2,"6":0,"7":0,"8":0,"9":0,"10":5,"11":3,"12":1,"13":3,"14":3,"15":0,"16":3,"17":3,"18":0,"19":9,"20":5,"21":5,"22":0,"23":5,"24":12,"25":12,"26":0,"27":12,"28":0,"29":12,"30":5,"31":5,"32":2,"33":2,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":5,"42":3,"43":3,"44":2,"45":0,"46":0,"47":2,"48":1,"49":1,"50":1,"51":1,"52":0,"53":0,"54":0,"55":1,"56":0,"57":1,"58":1,"59":6,"60":1,"61":1,"62":12,"63":3,"64":0,"65":3,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1,"72":1,"73":1,"74":1,"75":1,"76":1,"77":1,"78":0,"79":1,"80":1,"81":1,"82":1,"83":3,"84":3,"85":1,"86":1,"87":1,"88":1,"89":2,"90":2,"91":4,"92":2,"93":2,"94":2,"95":2,"96":0,"97":2,"98":2,"99":0,"100":1,"101":1,"102":1,"103":2,"104":1,"105":1,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":1,"119":1,"120":0,"121":1},"f":{"0":3,"1":2,"2":2,"3":3,"4":2,"5":0,"6":5,"7":3,"8":3,"9":0,"10":9,"11":5,"12":5,"13":0,"14":1,"15":3,"16":2,"17":2,"18":4,"19":1,"20":1,"21":2},"b":{"0":[1,1,1],"1":[0,2],"2":[3,3],"3":[3,2],"4":[3,3],"5":[1,1,1],"6":[0,3],"7":[3,3],"8":[0,5],"9":[0,12],"10":[12,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,12],"16":[5,5,2,0,0,5],"17":[3,2],"18":[5,3,3],"19":[5,2],"20":[0,2],"21":[2,0,0,0],"22":[1,1],"23":[2,1],"24":[0,1],"25":[1,1],"26":[0,1],"27":[0,3],"28":[3,0],"29":[2,2],"30":[0,2],"31":[2,0],"32":[1,0,0,0,1,0],"33":[0,0]},"inputSourceMap":{"version":3,"file":"/app/app/libs/passport.ts","sources":["/app/app/libs/passport.ts"],"names":[],"mappings":"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","sourcesContent":["import * as Jwt from 'passport-jwt'\nimport * as passport from 'koa-passport'\nimport {_} from 'lodash'\nimport  * as userModel from '../db/queries/users'\nimport config from '../config'\nimport * as passportCustom from 'passport-custom';\nimport {IUser} from '../db/queries/interfaces/Iusers';\nimport * as authService from '../services/auth';\nimport authModel from '../db/queries/auth';\nimport * as GoogleStrategy from 'passport-google-oauth20'\nconst CustomStrategy = passportCustom.Strategy;\npassport.use('google', new GoogleStrategy.Strategy({\n        clientID: config.GOOGLE_CLIENT_ID,\n        clientSecret: config.GOOGLE_CLIENT_SECRET,\n        callbackURL: config.GOOGLE_REDIRECT_URI\n    },\n    (accessToken , refreshToken, profile, done) => {\n        return done(null, profile, accessToken);\n    }\n));\n\nlocalStrategies()\n\nfunction localStrategies() {\n    const opts: any = {};\n    const cookieExtractor = (ctx) => {\n        try {\n            return ctx.cookies.request.headers.cookie.split(';')[0].split('token=Bearer ')[1]\n        } catch (e) {\n            return false\n        }\n    };\n    opts.secretOrKey = config.JWT_SECRET;\n    opts.jwtFromRequest = cookieExtractor;\n    passport.use(new Jwt.Strategy(opts, async (payload, done) => {\n        const {id} = payload;\n        const user: IUser = await userModel.getSingleUser(id);\n        if(!user) {\n            return done(null, false)\n        }\n        if (user) {\n            return done(null, _.pick(user, ['id', 'name']))\n        }\n    }));\n    passport.use('jwt-refresh', new CustomStrategy(\n        async (req, cb) => {\n            try {\n                const refreshToken = req.header.cookie.split('refreshToken=')[1].split(';')[0];\n                const user: IUser = await authService.getUserByRefreshToken(refreshToken);\n                if(!user) {\n                    return cb(null, false)\n                }\n                const newRefreshToken = await authService.createJWTRefreshToken(user.id);\n                await authModel.removeRefreshToken(refreshToken);\n                const userPayload = _.pick(user, ['id', 'name']);\n                const token = authService.createJWTToken(userPayload);\n                authService.setAuthTokens(token, newRefreshToken, req.ctx)\n                return cb(null, userPayload);\n            } catch (e) {\n                return cb(null, false);\n            }\n        }\n    ));\n}\n\nexport default passport\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1995896ba54a830741eb4ef596eaaae24b693d64","contentHash":"9a2247a52004f32504ed797bcef40a3c4eeb3bfc784463cbf4c035664d74513c"},"/app/app/db/queries/users.ts":{"path":"/app/app/db/queries/users.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":13},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":13},"end":{"line":4,"column":39}},"3":{"start":{"line":6,"column":4},"end":{"line":9,"column":17}},"4":{"start":{"line":11,"column":0},"end":{"line":11,"column":38}},"5":{"start":{"line":13,"column":4},"end":{"line":16,"column":7}},"6":{"start":{"line":14,"column":19},"end":{"line":14,"column":26}},"7":{"start":{"line":15,"column":8},"end":{"line":15,"column":23}},"8":{"start":{"line":18,"column":0},"end":{"line":18,"column":36}},"9":{"start":{"line":20,"column":4},"end":{"line":23,"column":49}},"10":{"start":{"line":23,"column":31},"end":{"line":23,"column":45}},"11":{"start":{"line":25,"column":0},"end":{"line":25,"column":52}},"12":{"start":{"line":27,"column":15},"end":{"line":27,"column":42}},"13":{"start":{"line":28,"column":4},"end":{"line":39,"column":49}},"14":{"start":{"line":39,"column":31},"end":{"line":39,"column":45}},"15":{"start":{"line":41,"column":0},"end":{"line":41,"column":36}},"16":{"start":{"line":43,"column":4},"end":{"line":43,"column":190}},"17":{"start":{"line":45,"column":0},"end":{"line":45,"column":50}},"18":{"start":{"line":47,"column":4},"end":{"line":47,"column":60}},"19":{"start":{"line":48,"column":4},"end":{"line":51,"column":38}},"20":{"start":{"line":53,"column":0},"end":{"line":53,"column":32}},"21":{"start":{"line":55,"column":4},"end":{"line":56,"column":20}},"22":{"start":{"line":56,"column":8},"end":{"line":56,"column":20}},"23":{"start":{"line":57,"column":15},"end":{"line":57,"column":35}},"24":{"start":{"line":58,"column":4},"end":{"line":58,"column":43}}},"fnMap":{"0":{"name":"getSingleUser","decl":{"start":{"line":5,"column":9},"end":{"line":5,"column":22}},"loc":{"start":{"line":5,"column":27},"end":{"line":10,"column":1}},"line":5},"1":{"name":"confirmEmail","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":21}},"loc":{"start":{"line":12,"column":29},"end":{"line":17,"column":1}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":13,"column":209},"end":{"line":13,"column":210}},"loc":{"start":{"line":13,"column":223},"end":{"line":16,"column":5}},"line":13},"3":{"name":"getSingleUserByEmail","decl":{"start":{"line":19,"column":9},"end":{"line":19,"column":29}},"loc":{"start":{"line":19,"column":37},"end":{"line":24,"column":1}},"line":19},"4":{"name":"(anonymous_4)","decl":{"start":{"line":23,"column":14},"end":{"line":23,"column":15}},"loc":{"start":{"line":23,"column":29},"end":{"line":23,"column":47}},"line":23},"5":{"name":"addLocalUser","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":21}},"loc":{"start":{"line":26,"column":28},"end":{"line":40,"column":1}},"line":26},"6":{"name":"(anonymous_6)","decl":{"start":{"line":39,"column":14},"end":{"line":39,"column":15}},"loc":{"start":{"line":39,"column":29},"end":{"line":39,"column":47}},"line":39},"7":{"name":"updateLocalPassword","decl":{"start":{"line":42,"column":9},"end":{"line":42,"column":28}},"loc":{"start":{"line":42,"column":43},"end":{"line":44,"column":1}},"line":42},"8":{"name":"updateUser","decl":{"start":{"line":46,"column":9},"end":{"line":46,"column":19}},"loc":{"start":{"line":46,"column":26},"end":{"line":52,"column":1}},"line":46},"9":{"name":"hashPassword","decl":{"start":{"line":54,"column":9},"end":{"line":54,"column":21}},"loc":{"start":{"line":54,"column":32},"end":{"line":59,"column":1}},"line":54}},"branchMap":{"0":{"loc":{"start":{"line":35,"column":22},"end":{"line":35,"column":43}},"type":"binary-expr","locations":[{"start":{"line":35,"column":22},"end":{"line":35,"column":35}},{"start":{"line":35,"column":39},"end":{"line":35,"column":43}}],"line":35},"1":{"loc":{"start":{"line":55,"column":4},"end":{"line":56,"column":20}},"type":"if","locations":[{"start":{"line":55,"column":4},"end":{"line":56,"column":20}},{"start":{"line":55,"column":4},"end":{"line":56,"column":20}}],"line":55}},"s":{"0":1,"1":1,"2":1,"3":3,"4":1,"5":6,"6":6,"7":6,"8":1,"9":7,"10":7,"11":1,"12":25,"13":25,"14":25,"15":1,"16":2,"17":1,"18":0,"19":0,"20":1,"21":27,"22":0,"23":27,"24":27},"f":{"0":3,"1":6,"2":6,"3":7,"4":7,"5":25,"6":25,"7":2,"8":0,"9":27},"b":{"0":[25,7],"1":[0,27]},"inputSourceMap":{"version":3,"file":"/app/app/db/queries/users.ts","sources":["/app/app/db/queries/users.ts"],"names":[],"mappings":";;AACA,iCAAkC;AAClC,wCAAkC;AAGlC,SAAS,aAAa,CAAC,EAAU;IAC/B,OAAO,cAAI,CAAC,OAAO,CAAC;SACf,MAAM,CAAC,GAAG,CAAC;SACX,KAAK,CAAC,EAAC,EAAE,EAAE,QAAQ,CAAC,EAAE,EAAE,EAAE,CAAC,EAAC,CAAC;SAC7B,KAAK,EAAE,CAAA;AACd,CAAC;AA0DC,sCAAa;AAxDf,SAAS,YAAY,CAAC,KAAa;IAC/B,OAAO,cAAI,CAAC,GAAG,CAAC,mKAMf,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,UAAC,EAAM;YAAL,cAAI;QAAK,OAAA,IAAI,CAAC,CAAC,CAAC;IAAP,CAAO,CAAC,CAAC;AACzC,CAAC;AAmDC,oCAAY;AAjDd,SAAS,oBAAoB,CAAC,KAAa;IACzC,OAAO,cAAI,CAAC,OAAO,CAAC;SACf,MAAM,CAAC,GAAG,CAAC;SACX,QAAQ,CAAC,mBAAmB,EAAE,CAAC,KAAK,CAAC,CAAC;SACtC,IAAI,CAAC,UAAA,GAAG,IAAI,OAAA,GAAG,CAAC,CAAC,CAAC,EAAN,CAAM,CAAC,CAAA;AAC1B,CAAC;AA0CC,oDAAoB;AAxCtB,SAAS,YAAY,CAAC,IAAyE;IAC7F,IAAM,IAAI,GAAG,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;IACxC,OAAO,cAAI,CAAC,OAAO,CAAC;SACf,MAAM,CAAC;QACJ,MAAM,EAAE,OAAO;QACf,KAAK,EACD;YACI,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI,CAAC,QAAQ,IAAI,IAAI;SAClC;KACR,CAAC;SACD,SAAS,CAAC,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;SAC1B,IAAI,CAAC,UAAC,GAAG,IAAI,OAAA,GAAG,CAAC,CAAC,CAAC,EAAN,CAAM,CAAC,CAAC;AAC5B,CAAC;AA0BC,oCAAY;AAzBd,SAAS,mBAAmB,CAAC,EAAE,EAAE,QAAQ;IACrC,OAAO,cAAI,CAAC,GAAG,CAAC,oFAE0B,YAAY,CAAC,QAAQ,CAAC,8CAE/D,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;AACZ,CAAC;AAqBC,kDAAmB;AApBrB,SAAS,UAAU,CAAC,IAAW;IAC7B,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;IACxD,OAAO,cAAI,CAAC,OAAO,CAAC;SACf,MAAM,CAAC,IAAI,CAAC;SACZ,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE,CAAC;SACpB,SAAS,CAAC,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC,CAAC;AACpC,CAAC;AASC,gCAAU;AAPZ,SAAS,YAAY,CAAC,QAAgB;IACpC,IAAI,CAAC,QAAQ;QAAE,OAAO,IAAI,CAAC;IAC3B,IAAM,IAAI,GAAG,MAAM,CAAC,WAAW,EAAE,CAAC;IAClC,OAAO,MAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;AACzC,CAAC","sourcesContent":["import * as Knex from 'knex'\nimport * as bcrypt from 'bcryptjs'\nimport knex from '../../libs/knex'\nimport {IUser} from './interfaces/Iusers'\n\nfunction getSingleUser(id: string): Promise<IUser> {\n  return knex('users')\n      .select('*')\n      .where({id: parseInt(id, 10)})\n      .first()\n}\n\nfunction confirmEmail(email: string): Knex.QueryBuilder {\n    return knex.raw(`\n        update users set\n        local = local || '{\"verified\": true}'::jsonb\n        where local->>'email'=?\n        returning id, local\n        ;\n    `, [email]).then(({rows})=> rows[0]);\n}\n\nfunction getSingleUserByEmail(email: string): IUser {\n  return knex('users')\n      .select('*')\n      .whereRaw(`local->>'email'=?`, [email])\n      .then(res => res[0])\n}\n\nfunction addLocalUser(user: {name: string, email: string, password: string, verified?: boolean}): Promise<IUser> {\n  const hash = hashPassword(user.password)\n  return knex('users')\n      .insert({\n          method: 'local',\n          local:\n              {\n                  email: user.email,\n                  name: user.name,\n                  password: hash,\n                  verified: user.verified || null\n              },\n      })\n      .returning(['id', 'local'])\n      .then((res)=> res[0]);\n}\nfunction updateLocalPassword(id, password) {\n    return knex.raw(`\n            update users set\n            local = local || '{\"password\": \"${hashPassword(password)}\"}'::jsonb\n            where id=?\n    `, [id])\n}\nfunction updateUser(user: IUser): Knex.QueryBuilder {\n  user.local.password = hashPassword(user.local.password);\n  return knex('users')\n      .update(user)\n      .where('id', user.id)\n      .returning(['name', 'email']);\n}\n\nfunction hashPassword(password: string): string {\n  if (!password) return null;\n  const salt = bcrypt.genSaltSync();\n  return bcrypt.hashSync(password, salt);\n}\n\nexport {\n  updateUser,\n  getSingleUser,\n  getSingleUserByEmail,\n  addLocalUser,\n  confirmEmail,\n  updateLocalPassword\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"58dbc8ba9abe3047a200060b0f79b550ce1ab803","contentHash":"f81888b484c1554be30fbf898617bef53eba85d8f8dda804607d819811242f13"},"/app/app/services/auth.ts":{"path":"/app/app/services/auth.ts","statementMap":{"0":{"start":{"line":2,"column":15},"end":{"line":12,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":10,"column":6}},"2":{"start":{"line":4,"column":8},"end":{"line":8,"column":9}},"3":{"start":{"line":4,"column":24},"end":{"line":4,"column":25}},"4":{"start":{"line":4,"column":31},"end":{"line":4,"column":47}},"5":{"start":{"line":5,"column":12},"end":{"line":5,"column":29}},"6":{"start":{"line":6,"column":12},"end":{"line":7,"column":28}},"7":{"start":{"line":6,"column":29},"end":{"line":7,"column":28}},"8":{"start":{"line":7,"column":16},"end":{"line":7,"column":28}},"9":{"start":{"line":9,"column":8},"end":{"line":9,"column":17}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":43}},"11":{"start":{"line":13,"column":16},"end":{"line":21,"column":1}},"12":{"start":{"line":14,"column":28},"end":{"line":14,"column":110}},"13":{"start":{"line":14,"column":91},"end":{"line":14,"column":106}},"14":{"start":{"line":15,"column":4},"end":{"line":20,"column":7}},"15":{"start":{"line":16,"column":36},"end":{"line":16,"column":97}},"16":{"start":{"line":16,"column":42},"end":{"line":16,"column":70}},"17":{"start":{"line":16,"column":85},"end":{"line":16,"column":95}},"18":{"start":{"line":17,"column":35},"end":{"line":17,"column":100}},"19":{"start":{"line":17,"column":41},"end":{"line":17,"column":73}},"20":{"start":{"line":17,"column":88},"end":{"line":17,"column":98}},"21":{"start":{"line":18,"column":32},"end":{"line":18,"column":116}},"22":{"start":{"line":19,"column":8},"end":{"line":19,"column":78}},"23":{"start":{"line":22,"column":18},"end":{"line":48,"column":1}},"24":{"start":{"line":23,"column":12},"end":{"line":23,"column":104}},"25":{"start":{"line":23,"column":43},"end":{"line":23,"column":68}},"26":{"start":{"line":23,"column":57},"end":{"line":23,"column":68}},"27":{"start":{"line":23,"column":69},"end":{"line":23,"column":81}},"28":{"start":{"line":24,"column":4},"end":{"line":24,"column":157}},"29":{"start":{"line":24,"column":138},"end":{"line":24,"column":150}},"30":{"start":{"line":25,"column":23},"end":{"line":25,"column":68}},"31":{"start":{"line":25,"column":45},"end":{"line":25,"column":65}},"32":{"start":{"line":27,"column":8},"end":{"line":27,"column":70}},"33":{"start":{"line":27,"column":15},"end":{"line":27,"column":70}},"34":{"start":{"line":28,"column":8},"end":{"line":45,"column":66}},"35":{"start":{"line":28,"column":18},"end":{"line":45,"column":66}},"36":{"start":{"line":29,"column":12},"end":{"line":29,"column":169}},"37":{"start":{"line":29,"column":160},"end":{"line":29,"column":169}},"38":{"start":{"line":30,"column":12},"end":{"line":30,"column":52}},"39":{"start":{"line":30,"column":26},"end":{"line":30,"column":52}},"40":{"start":{"line":31,"column":12},"end":{"line":43,"column":13}},"41":{"start":{"line":32,"column":32},"end":{"line":32,"column":39}},"42":{"start":{"line":32,"column":40},"end":{"line":32,"column":46}},"43":{"start":{"line":33,"column":24},"end":{"line":33,"column":34}},"44":{"start":{"line":33,"column":35},"end":{"line":33,"column":72}},"45":{"start":{"line":34,"column":24},"end":{"line":34,"column":34}},"46":{"start":{"line":34,"column":35},"end":{"line":34,"column":45}},"47":{"start":{"line":34,"column":46},"end":{"line":34,"column":55}},"48":{"start":{"line":34,"column":56},"end":{"line":34,"column":65}},"49":{"start":{"line":35,"column":24},"end":{"line":35,"column":41}},"50":{"start":{"line":35,"column":42},"end":{"line":35,"column":55}},"51":{"start":{"line":35,"column":56},"end":{"line":35,"column":65}},"52":{"start":{"line":37,"column":20},"end":{"line":37,"column":128}},"53":{"start":{"line":37,"column":110},"end":{"line":37,"column":116}},"54":{"start":{"line":37,"column":117},"end":{"line":37,"column":126}},"55":{"start":{"line":38,"column":20},"end":{"line":38,"column":106}},"56":{"start":{"line":38,"column":81},"end":{"line":38,"column":97}},"57":{"start":{"line":38,"column":98},"end":{"line":38,"column":104}},"58":{"start":{"line":39,"column":20},"end":{"line":39,"column":89}},"59":{"start":{"line":39,"column":57},"end":{"line":39,"column":72}},"60":{"start":{"line":39,"column":73},"end":{"line":39,"column":80}},"61":{"start":{"line":39,"column":81},"end":{"line":39,"column":87}},"62":{"start":{"line":40,"column":20},"end":{"line":40,"column":87}},"63":{"start":{"line":40,"column":47},"end":{"line":40,"column":62}},"64":{"start":{"line":40,"column":63},"end":{"line":40,"column":78}},"65":{"start":{"line":40,"column":79},"end":{"line":40,"column":85}},"66":{"start":{"line":41,"column":20},"end":{"line":41,"column":42}},"67":{"start":{"line":41,"column":30},"end":{"line":41,"column":42}},"68":{"start":{"line":42,"column":20},"end":{"line":42,"column":33}},"69":{"start":{"line":42,"column":34},"end":{"line":42,"column":43}},"70":{"start":{"line":44,"column":12},"end":{"line":44,"column":39}},"71":{"start":{"line":45,"column":22},"end":{"line":45,"column":34}},"72":{"start":{"line":45,"column":35},"end":{"line":45,"column":41}},"73":{"start":{"line":45,"column":54},"end":{"line":45,"column":64}},"74":{"start":{"line":46,"column":8},"end":{"line":46,"column":35}},"75":{"start":{"line":46,"column":23},"end":{"line":46,"column":35}},"76":{"start":{"line":46,"column":36},"end":{"line":46,"column":89}},"77":{"start":{"line":49,"column":0},"end":{"line":49,"column":62}},"78":{"start":{"line":50,"column":0},"end":{"line":50,"column":24}},"79":{"start":{"line":51,"column":0},"end":{"line":51,"column":31}},"80":{"start":{"line":52,"column":15},"end":{"line":52,"column":32}},"81":{"start":{"line":53,"column":15},"end":{"line":53,"column":35}},"82":{"start":{"line":54,"column":15},"end":{"line":54,"column":34}},"83":{"start":{"line":55,"column":16},"end":{"line":55,"column":46}},"84":{"start":{"line":56,"column":15},"end":{"line":56,"column":40}},"85":{"start":{"line":57,"column":10},"end":{"line":57,"column":33}},"86":{"start":{"line":58,"column":13},"end":{"line":58,"column":42}},"87":{"start":{"line":59,"column":13},"end":{"line":59,"column":28}},"88":{"start":{"line":61,"column":19},"end":{"line":61,"column":178}},"89":{"start":{"line":62,"column":4},"end":{"line":68,"column":7}},"90":{"start":{"line":70,"column":0},"end":{"line":70,"column":54}},"91":{"start":{"line":72,"column":4},"end":{"line":79,"column":7}},"92":{"start":{"line":73,"column":8},"end":{"line":78,"column":11}},"93":{"start":{"line":74,"column":12},"end":{"line":77,"column":13}},"94":{"start":{"line":75,"column":24},"end":{"line":75,"column":85}},"95":{"start":{"line":76,"column":24},"end":{"line":76,"column":57}},"96":{"start":{"line":82,"column":13},"end":{"line":82,"column":18}},"97":{"start":{"line":82,"column":27},"end":{"line":82,"column":34}},"98":{"start":{"line":83,"column":4},"end":{"line":83,"column":105}},"99":{"start":{"line":85,"column":0},"end":{"line":85,"column":40}},"100":{"start":{"line":87,"column":4},"end":{"line":87,"column":52}},"101":{"start":{"line":89,"column":0},"end":{"line":89,"column":48}},"102":{"start":{"line":92,"column":4},"end":{"line":105,"column":7}},"103":{"start":{"line":94,"column":8},"end":{"line":104,"column":11}},"104":{"start":{"line":95,"column":12},"end":{"line":103,"column":13}},"105":{"start":{"line":97,"column":20},"end":{"line":97,"column":37}},"106":{"start":{"line":98,"column":20},"end":{"line":98,"column":136}},"107":{"start":{"line":99,"column":20},"end":{"line":99,"column":96}},"108":{"start":{"line":101,"column":20},"end":{"line":101,"column":30}},"109":{"start":{"line":102,"column":20},"end":{"line":102,"column":49}},"110":{"start":{"line":107,"column":0},"end":{"line":107,"column":54}},"111":{"start":{"line":109,"column":4},"end":{"line":119,"column":7}},"112":{"start":{"line":111,"column":8},"end":{"line":118,"column":11}},"113":{"start":{"line":112,"column":12},"end":{"line":117,"column":13}},"114":{"start":{"line":114,"column":20},"end":{"line":114,"column":51}},"115":{"start":{"line":115,"column":20},"end":{"line":115,"column":72}},"116":{"start":{"line":116,"column":24},"end":{"line":116,"column":57}},"117":{"start":{"line":121,"column":0},"end":{"line":121,"column":36}},"118":{"start":{"line":123,"column":4},"end":{"line":134,"column":7}},"119":{"start":{"line":125,"column":8},"end":{"line":133,"column":11}},"120":{"start":{"line":126,"column":12},"end":{"line":132,"column":13}},"121":{"start":{"line":127,"column":24},"end":{"line":127,"column":86}},"122":{"start":{"line":129,"column":20},"end":{"line":129,"column":50}},"123":{"start":{"line":130,"column":20},"end":{"line":130,"column":75}},"124":{"start":{"line":131,"column":24},"end":{"line":131,"column":57}},"125":{"start":{"line":136,"column":0},"end":{"line":136,"column":54}},"126":{"start":{"line":138,"column":4},"end":{"line":138,"column":40}},"127":{"start":{"line":139,"column":4},"end":{"line":139,"column":48}},"128":{"start":{"line":140,"column":4},"end":{"line":140,"column":50}},"129":{"start":{"line":142,"column":0},"end":{"line":142,"column":38}},"130":{"start":{"line":144,"column":4},"end":{"line":168,"column":7}},"131":{"start":{"line":146,"column":8},"end":{"line":167,"column":11}},"132":{"start":{"line":147,"column":12},"end":{"line":166,"column":13}},"133":{"start":{"line":149,"column":20},"end":{"line":149,"column":46}},"134":{"start":{"line":150,"column":20},"end":{"line":150,"column":47}},"135":{"start":{"line":151,"column":20},"end":{"line":151,"column":70}},"136":{"start":{"line":152,"column":20},"end":{"line":152,"column":78}},"137":{"start":{"line":154,"column":20},"end":{"line":154,"column":36}},"138":{"start":{"line":155,"column":20},"end":{"line":155,"column":84}},"139":{"start":{"line":157,"column":20},"end":{"line":157,"column":37}},"140":{"start":{"line":158,"column":20},"end":{"line":158,"column":73}},"141":{"start":{"line":160,"column":20},"end":{"line":160,"column":45}},"142":{"start":{"line":161,"column":20},"end":{"line":161,"column":90}},"143":{"start":{"line":163,"column":20},"end":{"line":163,"column":30}},"144":{"start":{"line":164,"column":20},"end":{"line":164,"column":104}},"145":{"start":{"line":165,"column":24},"end":{"line":165,"column":46}},"146":{"start":{"line":170,"column":0},"end":{"line":170,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":42},"end":{"line":2,"column":43}},"loc":{"start":{"line":2,"column":54},"end":{"line":12,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":3,"column":32},"end":{"line":3,"column":33}},"loc":{"start":{"line":3,"column":44},"end":{"line":10,"column":5}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":13,"column":44},"end":{"line":13,"column":45}},"loc":{"start":{"line":13,"column":89},"end":{"line":21,"column":1}},"line":13},"3":{"name":"adopt","decl":{"start":{"line":14,"column":13},"end":{"line":14,"column":18}},"loc":{"start":{"line":14,"column":26},"end":{"line":14,"column":112}},"line":14},"4":{"name":"(anonymous_4)","decl":{"start":{"line":14,"column":70},"end":{"line":14,"column":71}},"loc":{"start":{"line":14,"column":89},"end":{"line":14,"column":108}},"line":14},"5":{"name":"(anonymous_5)","decl":{"start":{"line":15,"column":36},"end":{"line":15,"column":37}},"loc":{"start":{"line":15,"column":63},"end":{"line":20,"column":5}},"line":15},"6":{"name":"fulfilled","decl":{"start":{"line":16,"column":17},"end":{"line":16,"column":26}},"loc":{"start":{"line":16,"column":34},"end":{"line":16,"column":99}},"line":16},"7":{"name":"rejected","decl":{"start":{"line":17,"column":17},"end":{"line":17,"column":25}},"loc":{"start":{"line":17,"column":33},"end":{"line":17,"column":102}},"line":17},"8":{"name":"step","decl":{"start":{"line":18,"column":17},"end":{"line":18,"column":21}},"loc":{"start":{"line":18,"column":30},"end":{"line":18,"column":118}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":22,"column":48},"end":{"line":22,"column":49}},"loc":{"start":{"line":22,"column":73},"end":{"line":48,"column":1}},"line":22},"10":{"name":"(anonymous_10)","decl":{"start":{"line":23,"column":30},"end":{"line":23,"column":31}},"loc":{"start":{"line":23,"column":41},"end":{"line":23,"column":83}},"line":23},"11":{"name":"(anonymous_11)","decl":{"start":{"line":24,"column":125},"end":{"line":24,"column":126}},"loc":{"start":{"line":24,"column":136},"end":{"line":24,"column":152}},"line":24},"12":{"name":"verb","decl":{"start":{"line":25,"column":13},"end":{"line":25,"column":17}},"loc":{"start":{"line":25,"column":21},"end":{"line":25,"column":70}},"line":25},"13":{"name":"(anonymous_13)","decl":{"start":{"line":25,"column":30},"end":{"line":25,"column":31}},"loc":{"start":{"line":25,"column":43},"end":{"line":25,"column":67}},"line":25},"14":{"name":"step","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":17}},"loc":{"start":{"line":26,"column":22},"end":{"line":47,"column":5}},"line":26},"15":{"name":"sendConfirmationEmail","decl":{"start":{"line":60,"column":9},"end":{"line":60,"column":30}},"loc":{"start":{"line":60,"column":38},"end":{"line":69,"column":1}},"line":60},"16":{"name":"storeJWTRefreshToken","decl":{"start":{"line":71,"column":9},"end":{"line":71,"column":29}},"loc":{"start":{"line":71,"column":36},"end":{"line":80,"column":1}},"line":71},"17":{"name":"(anonymous_17)","decl":{"start":{"line":72,"column":43},"end":{"line":72,"column":44}},"loc":{"start":{"line":72,"column":55},"end":{"line":79,"column":5}},"line":72},"18":{"name":"(anonymous_18)","decl":{"start":{"line":73,"column":33},"end":{"line":73,"column":34}},"loc":{"start":{"line":73,"column":47},"end":{"line":78,"column":9}},"line":73},"19":{"name":"createJWTToken","decl":{"start":{"line":81,"column":9},"end":{"line":81,"column":23}},"loc":{"start":{"line":81,"column":28},"end":{"line":84,"column":1}},"line":81},"20":{"name":"removeRefreshToken","decl":{"start":{"line":86,"column":9},"end":{"line":86,"column":27}},"loc":{"start":{"line":86,"column":35},"end":{"line":88,"column":1}},"line":86},"21":{"name":"createJWTRefreshToken","decl":{"start":{"line":91,"column":9},"end":{"line":91,"column":30}},"loc":{"start":{"line":91,"column":40},"end":{"line":106,"column":1}},"line":91},"22":{"name":"(anonymous_22)","decl":{"start":{"line":92,"column":43},"end":{"line":92,"column":44}},"loc":{"start":{"line":92,"column":55},"end":{"line":105,"column":5}},"line":92},"23":{"name":"(anonymous_23)","decl":{"start":{"line":94,"column":33},"end":{"line":94,"column":34}},"loc":{"start":{"line":94,"column":47},"end":{"line":104,"column":9}},"line":94},"24":{"name":"confirmEmail","decl":{"start":{"line":108,"column":9},"end":{"line":108,"column":21}},"loc":{"start":{"line":108,"column":28},"end":{"line":120,"column":1}},"line":108},"25":{"name":"(anonymous_25)","decl":{"start":{"line":109,"column":43},"end":{"line":109,"column":44}},"loc":{"start":{"line":109,"column":55},"end":{"line":119,"column":5}},"line":109},"26":{"name":"(anonymous_26)","decl":{"start":{"line":111,"column":33},"end":{"line":111,"column":34}},"loc":{"start":{"line":111,"column":47},"end":{"line":118,"column":9}},"line":111},"27":{"name":"getUserByRefreshToken","decl":{"start":{"line":122,"column":9},"end":{"line":122,"column":30}},"loc":{"start":{"line":122,"column":38},"end":{"line":135,"column":1}},"line":122},"28":{"name":"(anonymous_28)","decl":{"start":{"line":123,"column":43},"end":{"line":123,"column":44}},"loc":{"start":{"line":123,"column":55},"end":{"line":134,"column":5}},"line":123},"29":{"name":"(anonymous_29)","decl":{"start":{"line":125,"column":33},"end":{"line":125,"column":34}},"loc":{"start":{"line":125,"column":47},"end":{"line":133,"column":9}},"line":125},"30":{"name":"setAuthTokens","decl":{"start":{"line":137,"column":9},"end":{"line":137,"column":22}},"loc":{"start":{"line":137,"column":49},"end":{"line":141,"column":1}},"line":137},"31":{"name":"tokenVerification","decl":{"start":{"line":143,"column":9},"end":{"line":143,"column":26}},"loc":{"start":{"line":143,"column":54},"end":{"line":169,"column":1}},"line":143},"32":{"name":"(anonymous_32)","decl":{"start":{"line":144,"column":43},"end":{"line":144,"column":44}},"loc":{"start":{"line":144,"column":55},"end":{"line":168,"column":5}},"line":144},"33":{"name":"(anonymous_33)","decl":{"start":{"line":146,"column":33},"end":{"line":146,"column":34}},"loc":{"start":{"line":146,"column":47},"end":{"line":167,"column":9}},"line":146}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":15},"end":{"line":12,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":16},"end":{"line":2,"column":20}},{"start":{"line":2,"column":24},"end":{"line":2,"column":37}},{"start":{"line":2,"column":42},"end":{"line":12,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":15},"end":{"line":10,"column":5}},"type":"binary-expr","locations":[{"start":{"line":3,"column":15},"end":{"line":3,"column":28}},{"start":{"line":3,"column":32},"end":{"line":10,"column":5}}],"line":3},"2":{"loc":{"start":{"line":6,"column":29},"end":{"line":7,"column":28}},"type":"if","locations":[{"start":{"line":6,"column":29},"end":{"line":7,"column":28}},{"start":{"line":6,"column":29},"end":{"line":7,"column":28}}],"line":6},"3":{"loc":{"start":{"line":13,"column":16},"end":{"line":21,"column":1}},"type":"binary-expr","locations":[{"start":{"line":13,"column":17},"end":{"line":13,"column":21}},{"start":{"line":13,"column":25},"end":{"line":13,"column":39}},{"start":{"line":13,"column":44},"end":{"line":21,"column":1}}],"line":13},"4":{"loc":{"start":{"line":14,"column":35},"end":{"line":14,"column":109}},"type":"cond-expr","locations":[{"start":{"line":14,"column":56},"end":{"line":14,"column":61}},{"start":{"line":14,"column":64},"end":{"line":14,"column":109}}],"line":14},"5":{"loc":{"start":{"line":15,"column":16},"end":{"line":15,"column":34}},"type":"binary-expr","locations":[{"start":{"line":15,"column":16},"end":{"line":15,"column":17}},{"start":{"line":15,"column":22},"end":{"line":15,"column":33}}],"line":15},"6":{"loc":{"start":{"line":18,"column":32},"end":{"line":18,"column":115}},"type":"cond-expr","locations":[{"start":{"line":18,"column":46},"end":{"line":18,"column":67}},{"start":{"line":18,"column":70},"end":{"line":18,"column":115}}],"line":18},"7":{"loc":{"start":{"line":19,"column":51},"end":{"line":19,"column":67}},"type":"binary-expr","locations":[{"start":{"line":19,"column":51},"end":{"line":19,"column":61}},{"start":{"line":19,"column":65},"end":{"line":19,"column":67}}],"line":19},"8":{"loc":{"start":{"line":22,"column":18},"end":{"line":48,"column":1}},"type":"binary-expr","locations":[{"start":{"line":22,"column":19},"end":{"line":22,"column":23}},{"start":{"line":22,"column":27},"end":{"line":22,"column":43}},{"start":{"line":22,"column":48},"end":{"line":48,"column":1}}],"line":22},"9":{"loc":{"start":{"line":23,"column":43},"end":{"line":23,"column":68}},"type":"if","locations":[{"start":{"line":23,"column":43},"end":{"line":23,"column":68}},{"start":{"line":23,"column":43},"end":{"line":23,"column":68}}],"line":23},"10":{"loc":{"start":{"line":24,"column":71},"end":{"line":24,"column":153}},"type":"binary-expr","locations":[{"start":{"line":24,"column":71},"end":{"line":24,"column":99}},{"start":{"line":24,"column":104},"end":{"line":24,"column":152}}],"line":24},"11":{"loc":{"start":{"line":27,"column":8},"end":{"line":27,"column":70}},"type":"if","locations":[{"start":{"line":27,"column":8},"end":{"line":27,"column":70}},{"start":{"line":27,"column":8},"end":{"line":27,"column":70}}],"line":27},"12":{"loc":{"start":{"line":29,"column":12},"end":{"line":29,"column":169}},"type":"if","locations":[{"start":{"line":29,"column":12},"end":{"line":29,"column":169}},{"start":{"line":29,"column":12},"end":{"line":29,"column":169}}],"line":29},"13":{"loc":{"start":{"line":29,"column":23},"end":{"line":29,"column":158}},"type":"binary-expr","locations":[{"start":{"line":29,"column":23},"end":{"line":29,"column":24}},{"start":{"line":29,"column":29},"end":{"line":29,"column":125}},{"start":{"line":29,"column":130},"end":{"line":29,"column":158}}],"line":29},"14":{"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":125}},"type":"cond-expr","locations":[{"start":{"line":29,"column":45},"end":{"line":29,"column":56}},{"start":{"line":29,"column":59},"end":{"line":29,"column":125}}],"line":29},"15":{"loc":{"start":{"line":29,"column":59},"end":{"line":29,"column":125}},"type":"cond-expr","locations":[{"start":{"line":29,"column":67},"end":{"line":29,"column":116}},{"start":{"line":29,"column":119},"end":{"line":29,"column":125}}],"line":29},"16":{"loc":{"start":{"line":29,"column":67},"end":{"line":29,"column":116}},"type":"binary-expr","locations":[{"start":{"line":29,"column":67},"end":{"line":29,"column":77}},{"start":{"line":29,"column":82},"end":{"line":29,"column":115}}],"line":29},"17":{"loc":{"start":{"line":29,"column":82},"end":{"line":29,"column":112}},"type":"binary-expr","locations":[{"start":{"line":29,"column":83},"end":{"line":29,"column":98}},{"start":{"line":29,"column":103},"end":{"line":29,"column":112}}],"line":29},"18":{"loc":{"start":{"line":30,"column":12},"end":{"line":30,"column":52}},"type":"if","locations":[{"start":{"line":30,"column":12},"end":{"line":30,"column":52}},{"start":{"line":30,"column":12},"end":{"line":30,"column":52}}],"line":30},"19":{"loc":{"start":{"line":31,"column":12},"end":{"line":43,"column":13}},"type":"switch","locations":[{"start":{"line":32,"column":16},"end":{"line":32,"column":23}},{"start":{"line":32,"column":24},"end":{"line":32,"column":46}},{"start":{"line":33,"column":16},"end":{"line":33,"column":72}},{"start":{"line":34,"column":16},"end":{"line":34,"column":65}},{"start":{"line":35,"column":16},"end":{"line":35,"column":65}},{"start":{"line":36,"column":16},"end":{"line":42,"column":43}}],"line":31},"20":{"loc":{"start":{"line":37,"column":20},"end":{"line":37,"column":128}},"type":"if","locations":[{"start":{"line":37,"column":20},"end":{"line":37,"column":128}},{"start":{"line":37,"column":20},"end":{"line":37,"column":128}}],"line":37},"21":{"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":106}},"type":"binary-expr","locations":[{"start":{"line":37,"column":24},"end":{"line":37,"column":74}},{"start":{"line":37,"column":79},"end":{"line":37,"column":90}},{"start":{"line":37,"column":94},"end":{"line":37,"column":105}}],"line":37},"22":{"loc":{"start":{"line":37,"column":42},"end":{"line":37,"column":73}},"type":"binary-expr","locations":[{"start":{"line":37,"column":42},"end":{"line":37,"column":54}},{"start":{"line":37,"column":58},"end":{"line":37,"column":73}}],"line":37},"23":{"loc":{"start":{"line":38,"column":20},"end":{"line":38,"column":106}},"type":"if","locations":[{"start":{"line":38,"column":20},"end":{"line":38,"column":106}},{"start":{"line":38,"column":20},"end":{"line":38,"column":106}}],"line":38},"24":{"loc":{"start":{"line":38,"column":24},"end":{"line":38,"column":77}},"type":"binary-expr","locations":[{"start":{"line":38,"column":24},"end":{"line":38,"column":35}},{"start":{"line":38,"column":40},"end":{"line":38,"column":42}},{"start":{"line":38,"column":47},"end":{"line":38,"column":59}},{"start":{"line":38,"column":63},"end":{"line":38,"column":75}}],"line":38},"25":{"loc":{"start":{"line":39,"column":20},"end":{"line":39,"column":89}},"type":"if","locations":[{"start":{"line":39,"column":20},"end":{"line":39,"column":89}},{"start":{"line":39,"column":20},"end":{"line":39,"column":89}}],"line":39},"26":{"loc":{"start":{"line":39,"column":24},"end":{"line":39,"column":53}},"type":"binary-expr","locations":[{"start":{"line":39,"column":24},"end":{"line":39,"column":35}},{"start":{"line":39,"column":39},"end":{"line":39,"column":53}}],"line":39},"27":{"loc":{"start":{"line":40,"column":20},"end":{"line":40,"column":87}},"type":"if","locations":[{"start":{"line":40,"column":20},"end":{"line":40,"column":87}},{"start":{"line":40,"column":20},"end":{"line":40,"column":87}}],"line":40},"28":{"loc":{"start":{"line":40,"column":24},"end":{"line":40,"column":43}},"type":"binary-expr","locations":[{"start":{"line":40,"column":24},"end":{"line":40,"column":25}},{"start":{"line":40,"column":29},"end":{"line":40,"column":43}}],"line":40},"29":{"loc":{"start":{"line":41,"column":20},"end":{"line":41,"column":42}},"type":"if","locations":[{"start":{"line":41,"column":20},"end":{"line":41,"column":42}},{"start":{"line":41,"column":20},"end":{"line":41,"column":42}}],"line":41},"30":{"loc":{"start":{"line":46,"column":8},"end":{"line":46,"column":35}},"type":"if","locations":[{"start":{"line":46,"column":8},"end":{"line":46,"column":35}},{"start":{"line":46,"column":8},"end":{"line":46,"column":35}}],"line":46},"31":{"loc":{"start":{"line":46,"column":52},"end":{"line":46,"column":74}},"type":"cond-expr","locations":[{"start":{"line":46,"column":60},"end":{"line":46,"column":65}},{"start":{"line":46,"column":68},"end":{"line":46,"column":74}}],"line":46},"32":{"loc":{"start":{"line":74,"column":12},"end":{"line":77,"column":13}},"type":"switch","locations":[{"start":{"line":75,"column":16},"end":{"line":75,"column":85}},{"start":{"line":76,"column":16},"end":{"line":76,"column":57}}],"line":74},"33":{"loc":{"start":{"line":95,"column":12},"end":{"line":103,"column":13}},"type":"switch","locations":[{"start":{"line":96,"column":16},"end":{"line":99,"column":96}},{"start":{"line":100,"column":16},"end":{"line":102,"column":49}}],"line":95},"34":{"loc":{"start":{"line":112,"column":12},"end":{"line":117,"column":13}},"type":"switch","locations":[{"start":{"line":113,"column":16},"end":{"line":115,"column":72}},{"start":{"line":116,"column":16},"end":{"line":116,"column":57}}],"line":112},"35":{"loc":{"start":{"line":126,"column":12},"end":{"line":132,"column":13}},"type":"switch","locations":[{"start":{"line":127,"column":16},"end":{"line":127,"column":86}},{"start":{"line":128,"column":16},"end":{"line":130,"column":75}},{"start":{"line":131,"column":16},"end":{"line":131,"column":57}}],"line":126},"36":{"loc":{"start":{"line":147,"column":12},"end":{"line":166,"column":13}},"type":"switch","locations":[{"start":{"line":148,"column":16},"end":{"line":152,"column":78}},{"start":{"line":153,"column":16},"end":{"line":155,"column":84}},{"start":{"line":156,"column":16},"end":{"line":158,"column":73}},{"start":{"line":159,"column":16},"end":{"line":161,"column":90}},{"start":{"line":162,"column":16},"end":{"line":164,"column":104}},{"start":{"line":165,"column":16},"end":{"line":165,"column":46}}],"line":147}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":23,"13":16,"14":23,"15":23,"16":23,"17":1,"18":0,"19":0,"20":0,"21":45,"22":23,"23":1,"24":23,"25":23,"26":0,"27":23,"28":23,"29":0,"30":69,"31":46,"32":46,"33":0,"34":46,"35":93,"36":93,"37":0,"38":93,"39":0,"40":93,"41":46,"42":46,"43":23,"44":23,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":24,"53":23,"54":23,"55":1,"56":0,"57":0,"58":1,"59":0,"60":0,"61":0,"62":1,"63":0,"64":0,"65":0,"66":1,"67":0,"68":1,"69":1,"70":46,"71":1,"72":1,"73":93,"74":23,"75":1,"76":22,"77":1,"78":1,"79":1,"80":1,"81":1,"82":1,"83":1,"84":1,"85":1,"86":1,"87":1,"88":0,"89":0,"90":1,"91":7,"92":7,"93":14,"94":7,"95":7,"96":14,"97":14,"98":14,"99":1,"100":1,"101":1,"102":7,"103":7,"104":14,"105":7,"106":7,"107":7,"108":7,"109":7,"110":1,"111":6,"112":6,"113":12,"114":6,"115":6,"116":6,"117":1,"118":2,"119":2,"120":5,"121":2,"122":2,"123":1,"124":1,"125":1,"126":6,"127":6,"128":6,"129":1,"130":1,"131":1,"132":1,"133":1,"134":1,"135":1,"136":1,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":1},"f":{"0":0,"1":0,"2":23,"3":23,"4":16,"5":23,"6":23,"7":0,"8":45,"9":23,"10":23,"11":0,"12":69,"13":46,"14":46,"15":0,"16":7,"17":7,"18":14,"19":14,"20":1,"21":7,"22":7,"23":14,"24":6,"25":6,"26":12,"27":2,"28":2,"29":5,"30":6,"31":1,"32":1,"33":1},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[1,1,1],"4":[7,16],"5":[23,23],"6":[22,23],"7":[23,23],"8":[1,1,1],"9":[0,23],"10":[23,23],"11":[0,46],"12":[0,93],"13":[93,0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,93],"19":[46,46,23,0,0,24],"20":[23,1],"21":[24,23,22],"22":[24,1],"23":[0,1],"24":[1,0,0,0],"25":[0,1],"26":[1,0],"27":[0,1],"28":[1,1],"29":[0,1],"30":[1,22],"31":[22,0],"32":[7,7],"33":[7,7],"34":[6,6],"35":[2,2,1],"36":[1,0,0,0,0,0]},"inputSourceMap":{"version":3,"file":"/app/app/services/auth.ts","sources":["/app/app/services/auth.ts"],"names":[],"mappings":"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","sourcesContent":["export const JWT_TTL = '10s'\nexport const JWT_REFRESH_TTL = '7d'\nimport {_} from 'lodash'\nimport config from '../config'\nimport {encrypt, decrypt} from './crypto'\nimport * as userModel from '../db/queries/users'\nimport mailer from '../libs/mailer'\nimport * as jwt from 'jsonwebtoken'\nimport authModel from '../db/queries/auth'\nimport {IUser} from '../db/queries/interfaces/Iusers'\nimport { v1 as uuidv1 } from 'uuid'\nimport * as https from 'https'\nimport axios from 'axios'\n\nexport function sendConfirmationEmail(email: string) {\n  const template = `<b>To confirm your account</b>\n  <a href=\"${config.HOST}/api/auth/confirm-email/${encrypt(email)}\">\n      Click here\n  </a>`;\n  mailer.sendMail({\n    from: '\"Football for everyone 👻\" <f4econtacts@gmail.com>',\n    to: email,\n    subject: 'Confirm email account ✔',\n    text: 'Confirm your email account?',\n    html: template,\n  })\n}\nasync function storeJWTRefreshToken(data) {\n  return await authModel.storeRefreshToken(data)\n}\nexport function createJWTToken({id, name}) {\n  return jwt.sign({id, name}, config.JWT_SECRET, { expiresIn: JWT_TTL })\n}\nexport function removeRefreshToken(token: string) {\n  return authModel.removeRefreshToken(token)\n}\n// tslint:disable-next-line\nexport async function createJWTRefreshToken(user_id: number): Promise<string> {\n  const id = uuidv1();\n  const token = jwt.sign({id, user_id}, config.JWT_SECRET, { expiresIn: JWT_REFRESH_TTL });\n  await storeJWTRefreshToken({id: token, user_id});\n  return token\n}\nexport async function confirmEmail(hash: string): Promise<any> {\n  const email = decrypt(hash);\n  return await userModel.confirmEmail(email)\n}\nexport async function getUserByRefreshToken(token: string): Promise<IUser> {\n  const {user_id} = await authModel.checkRefreshToken(token);\n  return await userModel.getSingleUser(user_id)\n}\nexport function setAuthTokens(token, refreshToken, ctx) {\n  ctx.cookies.set('date', Date.now());\n  ctx.cookies.set('token', `Bearer ${token}`);\n  ctx.cookies.set('refreshToken', refreshToken);\n}\nexport async function tokenVerification(\n    token: string,\n    refreshTokenString: string): Promise<IUser & {refreshToken?: string}>{\n  try {\n    const hash = token.split(' ')[1];\n    const u: IUser = jwt.verify(hash, config.JWT_SECRET);\n    return _.pick(u, ['name', 'id'])\n  }\n  catch (e) {\n    const user: IUser = await getUserByRefreshToken(refreshTokenString);\n    const refreshToken = await createJWTRefreshToken(user.id);\n    await authModel.removeRefreshToken(refreshToken);\n    return {... user, refreshToken}\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c0e38af83f6bcb7b214bdd8c5b252b5a2834e7fa","contentHash":"e45d8afc07607265078608839c0ffa4e4ebf45cd575300155c88cfdfc9d75b11"},"/app/app/services/crypto.ts":{"path":"/app/app/services/crypto.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":13},"end":{"line":3,"column":30}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":29}},"3":{"start":{"line":5,"column":15},"end":{"line":5,"column":23}},"4":{"start":{"line":11,"column":17},"end":{"line":11,"column":57}},"5":{"start":{"line":12,"column":18},"end":{"line":12,"column":52}},"6":{"start":{"line":13,"column":4},"end":{"line":13,"column":35}},"7":{"start":{"line":14,"column":4},"end":{"line":14,"column":19}},"8":{"start":{"line":16,"column":0},"end":{"line":16,"column":26}},"9":{"start":{"line":22,"column":19},"end":{"line":22,"column":61}},"10":{"start":{"line":23,"column":14},"end":{"line":23,"column":50}},"11":{"start":{"line":24,"column":4},"end":{"line":24,"column":34}},"12":{"start":{"line":25,"column":4},"end":{"line":25,"column":15}},"13":{"start":{"line":27,"column":0},"end":{"line":27,"column":26}}},"fnMap":{"0":{"name":"encrypt","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":16}},"loc":{"start":{"line":10,"column":23},"end":{"line":15,"column":1}},"line":10},"1":{"name":"decrypt","decl":{"start":{"line":21,"column":9},"end":{"line":21,"column":16}},"loc":{"start":{"line":21,"column":23},"end":{"line":26,"column":1}},"line":21}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":7,"5":7,"6":7,"7":7,"8":1,"9":7,"10":7,"11":7,"12":7,"13":1},"f":{"0":7,"1":7},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/services/crypto.ts","sources":["/app/app/services/crypto.ts"],"names":[],"mappings":";;AAAA,IAAM,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AACjC,IAAM,SAAS,GAAG,aAAa,CAAC;AAChC,IAAM,QAAQ,GAAG,QAAQ,CAAC;AAE1B;;;GAGG;AACH,SAAS,OAAO,CAAC,IAAI;IACnB,IAAM,MAAM,GAAG,MAAM,CAAC,YAAY,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAA;IACvD,IAAI,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,CAAA;IAChD,OAAO,IAAI,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;IAC/B,OAAO,OAAO,CAAC;AACjB,CAAC;AAcC,0BAAO;AAZT;;;GAGG;AACH,SAAS,OAAO,CAAC,IAAI;IACnB,IAAM,QAAQ,GAAG,MAAM,CAAC,cAAc,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAA;IAC3D,IAAI,GAAG,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK,EAAE,MAAM,CAAC,CAAA;IAC9C,GAAG,IAAI,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IAC9B,OAAO,GAAG,CAAC;AACb,CAAC;AAIC,0BAAO","sourcesContent":["const crypto = require('crypto');\nconst algorithm = 'aes-256-ctr';\nconst password = 'qwewqe';\n\n/**\n * @param {string} text\n * @return {string}\n */\nfunction encrypt(text) {\n  const cipher = crypto.createCipher(algorithm, password)\n  let crypted = cipher.update(text, 'utf8', 'hex')\n  crypted += cipher.final('hex');\n  return crypted;\n}\n\n/**\n * @param {string} text\n * @return {string}\n */\nfunction decrypt(text) {\n  const decipher = crypto.createDecipher(algorithm, password)\n  let dec = decipher.update(text, 'hex', 'utf8')\n  dec += decipher.final('utf8');\n  return dec;\n}\n\nexport {\n  encrypt,\n  decrypt,\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8332792b500c73affc58e187f4cd8fb54f110092","contentHash":"55787d0d00f26bcad2f37c3bea15ce4b355863ae32da243baee505561e2a6b75"},"/app/app/libs/mailer/index.ts":{"path":"/app/app/libs/mailer/index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":17},"end":{"line":3,"column":38}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":38}},"3":{"start":{"line":5,"column":18},"end":{"line":14,"column":2}},"4":{"start":{"line":15,"column":0},"end":{"line":15,"column":30}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/libs/mailer/index.ts","sources":["/app/app/libs/mailer/index.ts"],"names":[],"mappings":";;AAAA,uCAAwC;AACxC,uCAAiC;AAEjC,IAAM,WAAW,GAAG,UAAU,CAAC,eAAe,CAAC;IAC3C,OAAO,EAAE,OAAO;IAChB,IAAI,EAAE;QACF,IAAI,EAAE,QAAQ;QACd,IAAI,EAAE,4BAA4B;QAClC,YAAY,EAAE,gBAAM,CAAC,mBAAmB;QACxC,QAAQ,EAAE,gBAAM,CAAC,eAAe;QAChC,YAAY,EAAE,gBAAM,CAAC,mBAAmB;KAC3C;CACJ,CAAC,CAAC;AAEH,kBAAe,WAAW,CAAA","sourcesContent":["import * as nodemailer from 'nodemailer'\nimport config from '../../config'\n\nconst transporter = nodemailer.createTransport({\n    service: 'gmail',\n    auth: {\n        type: 'OAuth2',\n        user: 'f4econtactcenter@gmail.com',\n        refreshToken: config.GMAIL_REFRESH_TOKEN,\n        clientId: config.GMAIL_CLIENT_ID,\n        clientSecret: config.GMAIL_CLIENT_SECRET,\n    },\n});\n\nexport default transporter\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0dff464251ccac7a7b47e0e3aaa7cb4af0a6674c","contentHash":"d078d72aa709495c8a7a2872f78b8fdd6f21fd4f88ac247ce3fb5e7f69efe2e8"},"/app/app/db/queries/auth.ts":{"path":"/app/app/db/queries/auth.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":13},"end":{"line":3,"column":39}},"2":{"start":{"line":4,"column":13},"end":{"line":4,"column":43}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":57}},"4":{"start":{"line":9,"column":4},"end":{"line":9,"column":71}},"5":{"start":{"line":12,"column":4},"end":{"line":14,"column":5}},"6":{"start":{"line":13,"column":8},"end":{"line":13,"column":45}},"7":{"start":{"line":15,"column":4},"end":{"line":19,"column":17}},"8":{"start":{"line":21,"column":0},"end":{"line":25,"column":2}}},"fnMap":{"0":{"name":"storeRefreshToken","decl":{"start":{"line":5,"column":9},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":33},"end":{"line":7,"column":1}},"line":5},"1":{"name":"removeRefreshToken","decl":{"start":{"line":8,"column":9},"end":{"line":8,"column":27}},"loc":{"start":{"line":8,"column":32},"end":{"line":10,"column":1}},"line":8},"2":{"name":"checkRefreshToken","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":26}},"loc":{"start":{"line":11,"column":31},"end":{"line":20,"column":1}},"line":11}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":4},"end":{"line":14,"column":5}},"type":"if","locations":[{"start":{"line":12,"column":4},"end":{"line":14,"column":5}},{"start":{"line":12,"column":4},"end":{"line":14,"column":5}}],"line":12}},"s":{"0":1,"1":1,"2":1,"3":7,"4":1,"5":2,"6":0,"7":2,"8":1},"f":{"0":7,"1":1,"2":2},"b":{"0":[0,2]},"inputSourceMap":{"version":3,"file":"/app/app/db/queries/auth.ts","sources":["/app/app/db/queries/auth.ts"],"names":[],"mappings":";;AAAA,wCAAkC;AAClC,4CAAmD;AAEnD,SAAS,iBAAiB,CAAC,IAAI;IAC3B,OAAO,cAAI,CAAC,gBAAgB,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA;AAC9C,CAAC;AACD,SAAS,kBAAkB,CAAC,EAAU;IAClC,OAAO,cAAI,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,EAAC,EAAE,IAAA,EAAC,CAAC,CAAC,MAAM,EAAE,CAAA;AACtD,CAAC;AACD,SAAS,iBAAiB,CAAC,EAAU;IACjC,IAAI,CAAC,EAAE,EAAE;QACL,MAAM,IAAI,KAAK,CAAC,mBAAmB,CAAC,CAAC;KACxC;IACD,OAAO,cAAI,CAAC,gBAAgB,CAAC;SACxB,KAAK,CAAC,EAAC,EAAE,IAAA,EAAC,CAAC;SACX,QAAQ,CAAC,WAAW,EAAE,GAAG,EAAE,cAAI,CAAC,GAAG,CAAC,uBAAqB,sBAAe,MAAG,CAAC,CAAC;SAC7E,MAAM,CAAC,IAAI,EAAE,SAAS,CAAC;SACvB,KAAK,EAAE,CAAA;AAChB,CAAC;AACD,kBAAe;IACX,iBAAiB,mBAAA;IACjB,iBAAiB,mBAAA;IACjB,kBAAkB,oBAAA;CACrB,CAAA","sourcesContent":["import knex from '../../libs/knex'\nimport {JWT_REFRESH_TTL} from '../../services/auth'\n\nfunction storeRefreshToken(data) {\n    return knex('refresh_tokens').insert(data)\n}\nfunction removeRefreshToken(id: string): Promise<number> {\n    return knex('refresh_tokens').where({id}).delete()\n}\nfunction checkRefreshToken(id: string): Promise<{id: string, user_id: string}> {\n    if (!id) {\n        throw new Error('Invalid arguments');\n    }\n    return knex('refresh_tokens')\n        .where({id})\n        .andWhere('timestamp', '>', knex.raw(`NOW() - INTERVAL '${JWT_REFRESH_TTL}'`))\n        .select('id', 'user_id')\n        .first()\n}\nexport default {\n    storeRefreshToken,\n    checkRefreshToken,\n    removeRefreshToken\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6c748e4d85a381bf305b25581667ad858012db7e","contentHash":"2b69a955320f1e48517f0a79aaccba00ee695efc9fbfd1808688aaa9e93c29b0"},"/app/app/middleware/default/03-logger.ts":{"path":"/app/app/middleware/default/03-logger.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":13},"end":{"line":3,"column":34}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":60}},"3":{"start":{"line":4,"column":32},"end":{"line":4,"column":57}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":15},"end":{"line":4,"column":16}},"loc":{"start":{"line":4,"column":30},"end":{"line":4,"column":59}},"line":4}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{"0":1},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/middleware/default/03-logger.ts","sources":["/app/app/middleware/default/03-logger.ts"],"names":[],"mappings":";;AAAA,mCAAoC;AACpC,OAAO,CAAC,IAAI,GAAG,UAAC,GAAG,IAAK,OAAA,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,EAAjB,CAAiB,CAAC","sourcesContent":["import * as logger from 'koa-logger'\nexports.init = (app) => app.use(logger());\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"182ea5aacdd8c0b42c49914cc52e868f62c5fb2f","contentHash":"d729c4672b7d67eebb6c9c13dca17d69602ea66a6b42ab4eec74af1994864b5e"},"/app/app/middleware/default/04-errors.ts":{"path":"/app/app/middleware/default/04-errors.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"13":{"start":{"line":12,"column":12},"end":{"line":12,"column":104}},"14":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"15":{"start":{"line":12,"column":57},"end":{"line":12,"column":68}},"16":{"start":{"line":12,"column":69},"end":{"line":12,"column":81}},"17":{"start":{"line":13,"column":4},"end":{"line":13,"column":157}},"18":{"start":{"line":13,"column":138},"end":{"line":13,"column":150}},"19":{"start":{"line":14,"column":23},"end":{"line":14,"column":68}},"20":{"start":{"line":14,"column":45},"end":{"line":14,"column":65}},"21":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"22":{"start":{"line":16,"column":15},"end":{"line":16,"column":70}},"23":{"start":{"line":17,"column":8},"end":{"line":34,"column":66}},"24":{"start":{"line":17,"column":18},"end":{"line":34,"column":66}},"25":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"26":{"start":{"line":18,"column":160},"end":{"line":18,"column":169}},"27":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"28":{"start":{"line":19,"column":26},"end":{"line":19,"column":52}},"29":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"30":{"start":{"line":21,"column":32},"end":{"line":21,"column":39}},"31":{"start":{"line":21,"column":40},"end":{"line":21,"column":46}},"32":{"start":{"line":22,"column":24},"end":{"line":22,"column":34}},"33":{"start":{"line":22,"column":35},"end":{"line":22,"column":72}},"34":{"start":{"line":23,"column":24},"end":{"line":23,"column":34}},"35":{"start":{"line":23,"column":35},"end":{"line":23,"column":45}},"36":{"start":{"line":23,"column":46},"end":{"line":23,"column":55}},"37":{"start":{"line":23,"column":56},"end":{"line":23,"column":65}},"38":{"start":{"line":24,"column":24},"end":{"line":24,"column":41}},"39":{"start":{"line":24,"column":42},"end":{"line":24,"column":55}},"40":{"start":{"line":24,"column":56},"end":{"line":24,"column":65}},"41":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"42":{"start":{"line":26,"column":110},"end":{"line":26,"column":116}},"43":{"start":{"line":26,"column":117},"end":{"line":26,"column":126}},"44":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"45":{"start":{"line":27,"column":81},"end":{"line":27,"column":97}},"46":{"start":{"line":27,"column":98},"end":{"line":27,"column":104}},"47":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"48":{"start":{"line":28,"column":57},"end":{"line":28,"column":72}},"49":{"start":{"line":28,"column":73},"end":{"line":28,"column":80}},"50":{"start":{"line":28,"column":81},"end":{"line":28,"column":87}},"51":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"52":{"start":{"line":29,"column":47},"end":{"line":29,"column":62}},"53":{"start":{"line":29,"column":63},"end":{"line":29,"column":78}},"54":{"start":{"line":29,"column":79},"end":{"line":29,"column":85}},"55":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"56":{"start":{"line":30,"column":30},"end":{"line":30,"column":42}},"57":{"start":{"line":31,"column":20},"end":{"line":31,"column":33}},"58":{"start":{"line":31,"column":34},"end":{"line":31,"column":43}},"59":{"start":{"line":33,"column":12},"end":{"line":33,"column":39}},"60":{"start":{"line":34,"column":22},"end":{"line":34,"column":34}},"61":{"start":{"line":34,"column":35},"end":{"line":34,"column":41}},"62":{"start":{"line":34,"column":54},"end":{"line":34,"column":64}},"63":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"64":{"start":{"line":35,"column":23},"end":{"line":35,"column":35}},"65":{"start":{"line":35,"column":36},"end":{"line":35,"column":89}},"66":{"start":{"line":38,"column":0},"end":{"line":38,"column":62}},"67":{"start":{"line":39,"column":15},"end":{"line":39,"column":38}},"68":{"start":{"line":40,"column":0},"end":{"line":65,"column":2}},"69":{"start":{"line":41,"column":4},"end":{"line":64,"column":11}},"70":{"start":{"line":41,"column":42},"end":{"line":64,"column":7}},"71":{"start":{"line":43,"column":8},"end":{"line":63,"column":11}},"72":{"start":{"line":44,"column":12},"end":{"line":62,"column":13}},"73":{"start":{"line":46,"column":20},"end":{"line":46,"column":46}},"74":{"start":{"line":47,"column":20},"end":{"line":47,"column":49}},"75":{"start":{"line":49,"column":20},"end":{"line":49,"column":30}},"76":{"start":{"line":50,"column":20},"end":{"line":50,"column":44}},"77":{"start":{"line":52,"column":20},"end":{"line":52,"column":36}},"78":{"start":{"line":53,"column":20},"end":{"line":55,"column":21}},"79":{"start":{"line":54,"column":24},"end":{"line":54,"column":41}},"80":{"start":{"line":56,"column":20},"end":{"line":56,"column":58}},"81":{"start":{"line":57,"column":20},"end":{"line":59,"column":22}},"82":{"start":{"line":60,"column":20},"end":{"line":60,"column":44}},"83":{"start":{"line":61,"column":24},"end":{"line":61,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":48},"end":{"line":11,"column":49}},"loc":{"start":{"line":11,"column":73},"end":{"line":37,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":12,"column":30},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":41},"end":{"line":12,"column":83}},"line":12},"9":{"name":"(anonymous_9)","decl":{"start":{"line":13,"column":125},"end":{"line":13,"column":126}},"loc":{"start":{"line":13,"column":136},"end":{"line":13,"column":152}},"line":13},"10":{"name":"verb","decl":{"start":{"line":14,"column":13},"end":{"line":14,"column":17}},"loc":{"start":{"line":14,"column":21},"end":{"line":14,"column":70}},"line":14},"11":{"name":"(anonymous_11)","decl":{"start":{"line":14,"column":30},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":43},"end":{"line":14,"column":67}},"line":14},"12":{"name":"step","decl":{"start":{"line":15,"column":13},"end":{"line":15,"column":17}},"loc":{"start":{"line":15,"column":22},"end":{"line":36,"column":5}},"line":15},"13":{"name":"(anonymous_13)","decl":{"start":{"line":40,"column":15},"end":{"line":40,"column":16}},"loc":{"start":{"line":40,"column":30},"end":{"line":65,"column":1}},"line":40},"14":{"name":"(anonymous_14)","decl":{"start":{"line":41,"column":19},"end":{"line":41,"column":20}},"loc":{"start":{"line":41,"column":40},"end":{"line":64,"column":9}},"line":41},"15":{"name":"(anonymous_15)","decl":{"start":{"line":41,"column":83},"end":{"line":41,"column":84}},"loc":{"start":{"line":41,"column":95},"end":{"line":64,"column":5}},"line":41},"16":{"name":"(anonymous_16)","decl":{"start":{"line":43,"column":33},"end":{"line":43,"column":34}},"loc":{"start":{"line":43,"column":47},"end":{"line":63,"column":9}},"line":43}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":19},"end":{"line":11,"column":23}},{"start":{"line":11,"column":27},"end":{"line":11,"column":43}},{"start":{"line":11,"column":48},"end":{"line":37,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"type":"if","locations":[{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},{"start":{"line":12,"column":43},"end":{"line":12,"column":68}}],"line":12},"7":{"loc":{"start":{"line":13,"column":71},"end":{"line":13,"column":153}},"type":"binary-expr","locations":[{"start":{"line":13,"column":71},"end":{"line":13,"column":99}},{"start":{"line":13,"column":104},"end":{"line":13,"column":152}}],"line":13},"8":{"loc":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"type":"if","locations":[{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},{"start":{"line":16,"column":8},"end":{"line":16,"column":70}}],"line":16},"9":{"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"type":"if","locations":[{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},{"start":{"line":18,"column":12},"end":{"line":18,"column":169}}],"line":18},"10":{"loc":{"start":{"line":18,"column":23},"end":{"line":18,"column":158}},"type":"binary-expr","locations":[{"start":{"line":18,"column":23},"end":{"line":18,"column":24}},{"start":{"line":18,"column":29},"end":{"line":18,"column":125}},{"start":{"line":18,"column":130},"end":{"line":18,"column":158}}],"line":18},"11":{"loc":{"start":{"line":18,"column":33},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":45},"end":{"line":18,"column":56}},{"start":{"line":18,"column":59},"end":{"line":18,"column":125}}],"line":18},"12":{"loc":{"start":{"line":18,"column":59},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},{"start":{"line":18,"column":119},"end":{"line":18,"column":125}}],"line":18},"13":{"loc":{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},"type":"binary-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":77}},{"start":{"line":18,"column":82},"end":{"line":18,"column":115}}],"line":18},"14":{"loc":{"start":{"line":18,"column":82},"end":{"line":18,"column":112}},"type":"binary-expr","locations":[{"start":{"line":18,"column":83},"end":{"line":18,"column":98}},{"start":{"line":18,"column":103},"end":{"line":18,"column":112}}],"line":18},"15":{"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"type":"if","locations":[{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},{"start":{"line":19,"column":12},"end":{"line":19,"column":52}}],"line":19},"16":{"loc":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"type":"switch","locations":[{"start":{"line":21,"column":16},"end":{"line":21,"column":23}},{"start":{"line":21,"column":24},"end":{"line":21,"column":46}},{"start":{"line":22,"column":16},"end":{"line":22,"column":72}},{"start":{"line":23,"column":16},"end":{"line":23,"column":65}},{"start":{"line":24,"column":16},"end":{"line":24,"column":65}},{"start":{"line":25,"column":16},"end":{"line":31,"column":43}}],"line":20},"17":{"loc":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"type":"if","locations":[{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},{"start":{"line":26,"column":20},"end":{"line":26,"column":128}}],"line":26},"18":{"loc":{"start":{"line":26,"column":24},"end":{"line":26,"column":106}},"type":"binary-expr","locations":[{"start":{"line":26,"column":24},"end":{"line":26,"column":74}},{"start":{"line":26,"column":79},"end":{"line":26,"column":90}},{"start":{"line":26,"column":94},"end":{"line":26,"column":105}}],"line":26},"19":{"loc":{"start":{"line":26,"column":42},"end":{"line":26,"column":73}},"type":"binary-expr","locations":[{"start":{"line":26,"column":42},"end":{"line":26,"column":54}},{"start":{"line":26,"column":58},"end":{"line":26,"column":73}}],"line":26},"20":{"loc":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"type":"if","locations":[{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},{"start":{"line":27,"column":20},"end":{"line":27,"column":106}}],"line":27},"21":{"loc":{"start":{"line":27,"column":24},"end":{"line":27,"column":77}},"type":"binary-expr","locations":[{"start":{"line":27,"column":24},"end":{"line":27,"column":35}},{"start":{"line":27,"column":40},"end":{"line":27,"column":42}},{"start":{"line":27,"column":47},"end":{"line":27,"column":59}},{"start":{"line":27,"column":63},"end":{"line":27,"column":75}}],"line":27},"22":{"loc":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"type":"if","locations":[{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},{"start":{"line":28,"column":20},"end":{"line":28,"column":89}}],"line":28},"23":{"loc":{"start":{"line":28,"column":24},"end":{"line":28,"column":53}},"type":"binary-expr","locations":[{"start":{"line":28,"column":24},"end":{"line":28,"column":35}},{"start":{"line":28,"column":39},"end":{"line":28,"column":53}}],"line":28},"24":{"loc":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"type":"if","locations":[{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},{"start":{"line":29,"column":20},"end":{"line":29,"column":87}}],"line":29},"25":{"loc":{"start":{"line":29,"column":24},"end":{"line":29,"column":43}},"type":"binary-expr","locations":[{"start":{"line":29,"column":24},"end":{"line":29,"column":25}},{"start":{"line":29,"column":29},"end":{"line":29,"column":43}}],"line":29},"26":{"loc":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"type":"if","locations":[{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},{"start":{"line":30,"column":20},"end":{"line":30,"column":42}}],"line":30},"27":{"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},{"start":{"line":35,"column":8},"end":{"line":35,"column":35}}],"line":35},"28":{"loc":{"start":{"line":35,"column":52},"end":{"line":35,"column":74}},"type":"cond-expr","locations":[{"start":{"line":35,"column":60},"end":{"line":35,"column":65}},{"start":{"line":35,"column":68},"end":{"line":35,"column":74}}],"line":35},"29":{"loc":{"start":{"line":44,"column":12},"end":{"line":62,"column":13}},"type":"switch","locations":[{"start":{"line":45,"column":16},"end":{"line":47,"column":49}},{"start":{"line":48,"column":16},"end":{"line":50,"column":44}},{"start":{"line":51,"column":16},"end":{"line":60,"column":44}},{"start":{"line":61,"column":16},"end":{"line":61,"column":46}}],"line":44},"30":{"loc":{"start":{"line":53,"column":20},"end":{"line":55,"column":21}},"type":"if","locations":[{"start":{"line":53,"column":20},"end":{"line":55,"column":21}},{"start":{"line":53,"column":20},"end":{"line":55,"column":21}}],"line":53}},"s":{"0":1,"1":34,"2":0,"3":34,"4":34,"5":34,"6":0,"7":0,"8":0,"9":0,"10":68,"11":34,"12":1,"13":34,"14":34,"15":0,"16":34,"17":34,"18":0,"19":102,"20":68,"21":68,"22":0,"23":68,"24":204,"25":204,"26":0,"27":204,"28":0,"29":204,"30":68,"31":68,"32":34,"33":34,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":102,"42":34,"43":34,"44":68,"45":34,"46":34,"47":34,"48":0,"49":0,"50":0,"51":34,"52":0,"53":0,"54":0,"55":34,"56":0,"57":34,"58":34,"59":102,"60":0,"61":0,"62":204,"63":34,"64":0,"65":34,"66":1,"67":1,"68":1,"69":1,"70":34,"71":34,"72":102,"73":34,"74":34,"75":34,"76":34,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":34},"f":{"0":34,"1":34,"2":0,"3":34,"4":34,"5":0,"6":68,"7":34,"8":34,"9":0,"10":102,"11":68,"12":68,"13":1,"14":34,"15":34,"16":102},"b":{"0":[1,1,1],"1":[34,0],"2":[34,34],"3":[34,34],"4":[34,34],"5":[1,1,1],"6":[0,34],"7":[34,34],"8":[0,68],"9":[0,204],"10":[204,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,204],"16":[68,68,34,0,0,102],"17":[34,68],"18":[102,68,68],"19":[102,34],"20":[34,34],"21":[68,68,34,34],"22":[0,34],"23":[34,0],"24":[0,34],"25":[34,34],"26":[0,34],"27":[0,34],"28":[34,0],"29":[34,34,0,34],"30":[0,0]},"inputSourceMap":{"version":3,"file":"/app/app/middleware/default/04-errors.ts","sources":["/app/app/middleware/default/04-errors.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,uCAAiC;AACjC,OAAO,CAAC,IAAI,GAAG,UAAC,GAAG;IACf,OAAA,GAAG,CAAC,GAAG,CAAC,UAAO,GAAG,EAAE,IAAI;;;;;;oBAEhB,qBAAM,IAAI,EAAE,EAAA;;oBAAZ,SAAY,CAAC;;;;oBAEb,IAAI,gBAAM,CAAC,GAAG,KAAK,aAAa,EAAE;wBAC9B,OAAO,CAAC,GAAG,CAAC,GAAC,CAAC,CAAA;qBACjB;oBACD,GAAG,CAAC,MAAM,GAAG,QAAQ,CAAC,GAAC,CAAC,MAAM,EAAC,EAAE,CAAC,CAAC;oBACnC,GAAG,CAAC,IAAI,GAAG;wBACP,KAAK,EAAE,GAAC,CAAC,OAAO;qBACnB,CAAC;;;;;SAET,CAAC;AAZF,CAYE,CAAC","sourcesContent":["import config from '../../config'\nexports.init = (app) =>\n    app.use(async (ctx, next) => {\n        try {\n            await next();\n        } catch (e) {\n            if (config.env === 'development') {\n                console.log(e)\n            }\n            ctx.status = parseInt(e.status,10);\n            ctx.body = {\n                error: e.message,\n            };\n        }\n    });\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4cb12e917047d8535f62237ad1208cdf9d383c19","contentHash":"3fa29a971d1cf54676ab1aca5fad9a4d1cf0838b945403f207c44e6097fdf3fe"},"/app/app/middleware/default/07-bodyParser.ts":{"path":"/app/app/middleware/default/07-bodyParser.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":17},"end":{"line":3,"column":42}},"2":{"start":{"line":4,"column":0},"end":{"line":6,"column":7}},"3":{"start":{"line":4,"column":32},"end":{"line":6,"column":4}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":15},"end":{"line":4,"column":16}},"loc":{"start":{"line":4,"column":30},"end":{"line":6,"column":6}},"line":4}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{"0":1},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/middleware/default/07-bodyParser.ts","sources":["/app/app/middleware/default/07-bodyParser.ts"],"names":[],"mappings":";;AAAA,2CAA4C;AAC5C,OAAO,CAAC,IAAI,GAAG,UAAC,GAAG,IAAK,OAAA,GAAG,CAAC,GAAG,CAAC,UAAU,CAAC;IACzC,SAAS,EAAE,MAAM;CAClB,CAAC,CAAC,EAFqB,CAErB,CAAC","sourcesContent":["import * as bodyParser from 'koa-bodyparser'\nexports.init = (app) => app.use(bodyParser({\n  jsonLimit: '56kb',\n}));\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ff93f8caf59138b040f30358c144fcd99ce7ae8b","contentHash":"6fdc2ab38a5bf6666fcf8ac5f200bc606f386bc67e072ef2fab38ce37c3bfcf7"},"/app/app/middleware/default/13-coors.ts":{"path":"/app/app/middleware/default/13-coors.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":11},"end":{"line":3,"column":31}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":58}},"3":{"start":{"line":4,"column":32},"end":{"line":4,"column":55}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":15},"end":{"line":4,"column":16}},"loc":{"start":{"line":4,"column":30},"end":{"line":4,"column":57}},"line":4}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{"0":1},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/middleware/default/13-coors.ts","sources":["/app/app/middleware/default/13-coors.ts"],"names":[],"mappings":";;AAAA,gCAAiC;AACjC,OAAO,CAAC,IAAI,GAAG,UAAC,GAAG,IAAK,OAAA,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAf,CAAe,CAAC","sourcesContent":["import * as cors from 'koa2-cors'\nexports.init = (app) => app.use(cors());\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2e2a897b25ca5cffa19f8f7795f9764b522c0093","contentHash":"53ff25f4043344d188eefbe67d1c266f963434fb3e3585d90e19efbc8d404d7c"},"/app/app/routes/auth.ts":{"path":"/app/app/routes/auth.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":13},"end":{"line":3,"column":42}},"2":{"start":{"line":4,"column":13},"end":{"line":4,"column":34}},"3":{"start":{"line":5,"column":13},"end":{"line":5,"column":43}},"4":{"start":{"line":6,"column":17},"end":{"line":6,"column":44}},"5":{"start":{"line":7,"column":17},"end":{"line":7,"column":48}},"6":{"start":{"line":8,"column":18},"end":{"line":8,"column":200}},"7":{"start":{"line":9,"column":0},"end":{"line":18,"column":76}},"8":{"start":{"line":19,"column":0},"end":{"line":19,"column":28}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/routes/auth.ts","sources":["/app/app/routes/auth.ts"],"names":[],"mappings":";;AAAA,2CAA+C;AAC/C,mCAAoC;AACpC,4CAAgD;AAChD,6CAAuC;AACvC,IAAM,UAAU,GAAG,IAAI,MAAM,CAAC,EAAC,MAAM,EAAE,OAAO,EAAC,CAAC,CAAA;AAChD,IAAM,WAAW,GAAG,kBAAQ,CAAC,YAAY,CAAC,QAAQ,EAAE,EAAC,KAAK,EAAE,CAAC,QAAQ,EAAE,kDAAkD,EAAE,gDAAgD,CAAC,EAAE,OAAO,EAAE,KAAK,EAAC,CAAC,CAAC;AAC/L,UAAU;KACL,GAAG,CAAC,sBAAsB,EAAE,cAAc,CAAC,YAAY,CAAC;KACxD,IAAI,CAAC,eAAe,EAAE,cAAc,CAAC,YAAY,CAAC;KAClD,IAAI,CAAC,gBAAgB,EAAE,cAAc,CAAC,YAAY,CAAC;KACnD,IAAI,CAAC,kBAAkB,EAAE,cAAc,CAAC,cAAc,CAAC;KACvD,IAAI,CAAC,kBAAkB,EAAE,cAAc,EAAE,cAAc,CAAC,cAAc,CAAC;KACvE,IAAI,CAAC,QAAQ,EAAE,cAAc,CAAC,KAAK,CAAC;KACpC,IAAI,CAAC,SAAS,EAAE,cAAc,CAAC,MAAM,CAAC;KACtC,GAAG,CAAC,SAAS,EAAE,WAAW,EAAG,cAAc,CAAC,WAAW,CAAC;KACxD,GAAG,CAAC,wBAAwB,EAAE,WAAW,EAAE,cAAc,CAAC,WAAW,CAAC,CAAA;AAE3E,MAAM,CAAC,OAAO,GAAG,UAAU,CAAC","sourcesContent":["import authMiddleware from '../middleware/auth'\nimport * as Router from 'koa-router'\nimport authController from '../controllers/auth'\nimport passport from '../libs/passport'\nconst authRoutes = new Router({prefix: '/auth'})\nconst googleScope = passport.authenticate('google', {scope: ['openid', 'https://www.googleapis.com/auth/userinfo.profile', 'https://www.googleapis.com/auth/userinfo.email'], session: false});\nauthRoutes\n    .get('/confirm-email/:hash', authController.confirmEmail)\n    .post('/registration', authController.registration)\n    .post('/refresh-token', authController.refreshToken)\n    .post('/forgot-password', authController.forgotPassword)\n    .post('/change-password', authMiddleware, authController.changePassword)\n    .post('/login', authController.login)\n    .post('/logout', authController.logout)\n    .get('/google', googleScope,  authController.secretRoute)\n    .get('/google/oauth/callback', googleScope, authController.googleOAuth)\n\nmodule.exports = authRoutes;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"24eefcbf33fa4767f22fc238f414c63b0403a855","contentHash":"2d08e7d904243169df422aff6606da6f76c226acda104fd2894a1a08872af998"},"/app/app/middleware/auth.ts":{"path":"/app/app/middleware/auth.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"13":{"start":{"line":12,"column":12},"end":{"line":12,"column":104}},"14":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"15":{"start":{"line":12,"column":57},"end":{"line":12,"column":68}},"16":{"start":{"line":12,"column":69},"end":{"line":12,"column":81}},"17":{"start":{"line":13,"column":4},"end":{"line":13,"column":157}},"18":{"start":{"line":13,"column":138},"end":{"line":13,"column":150}},"19":{"start":{"line":14,"column":23},"end":{"line":14,"column":68}},"20":{"start":{"line":14,"column":45},"end":{"line":14,"column":65}},"21":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"22":{"start":{"line":16,"column":15},"end":{"line":16,"column":70}},"23":{"start":{"line":17,"column":8},"end":{"line":34,"column":66}},"24":{"start":{"line":17,"column":18},"end":{"line":34,"column":66}},"25":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"26":{"start":{"line":18,"column":160},"end":{"line":18,"column":169}},"27":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"28":{"start":{"line":19,"column":26},"end":{"line":19,"column":52}},"29":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"30":{"start":{"line":21,"column":32},"end":{"line":21,"column":39}},"31":{"start":{"line":21,"column":40},"end":{"line":21,"column":46}},"32":{"start":{"line":22,"column":24},"end":{"line":22,"column":34}},"33":{"start":{"line":22,"column":35},"end":{"line":22,"column":72}},"34":{"start":{"line":23,"column":24},"end":{"line":23,"column":34}},"35":{"start":{"line":23,"column":35},"end":{"line":23,"column":45}},"36":{"start":{"line":23,"column":46},"end":{"line":23,"column":55}},"37":{"start":{"line":23,"column":56},"end":{"line":23,"column":65}},"38":{"start":{"line":24,"column":24},"end":{"line":24,"column":41}},"39":{"start":{"line":24,"column":42},"end":{"line":24,"column":55}},"40":{"start":{"line":24,"column":56},"end":{"line":24,"column":65}},"41":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"42":{"start":{"line":26,"column":110},"end":{"line":26,"column":116}},"43":{"start":{"line":26,"column":117},"end":{"line":26,"column":126}},"44":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"45":{"start":{"line":27,"column":81},"end":{"line":27,"column":97}},"46":{"start":{"line":27,"column":98},"end":{"line":27,"column":104}},"47":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"48":{"start":{"line":28,"column":57},"end":{"line":28,"column":72}},"49":{"start":{"line":28,"column":73},"end":{"line":28,"column":80}},"50":{"start":{"line":28,"column":81},"end":{"line":28,"column":87}},"51":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"52":{"start":{"line":29,"column":47},"end":{"line":29,"column":62}},"53":{"start":{"line":29,"column":63},"end":{"line":29,"column":78}},"54":{"start":{"line":29,"column":79},"end":{"line":29,"column":85}},"55":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"56":{"start":{"line":30,"column":30},"end":{"line":30,"column":42}},"57":{"start":{"line":31,"column":20},"end":{"line":31,"column":33}},"58":{"start":{"line":31,"column":34},"end":{"line":31,"column":43}},"59":{"start":{"line":33,"column":12},"end":{"line":33,"column":39}},"60":{"start":{"line":34,"column":22},"end":{"line":34,"column":34}},"61":{"start":{"line":34,"column":35},"end":{"line":34,"column":41}},"62":{"start":{"line":34,"column":54},"end":{"line":34,"column":64}},"63":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"64":{"start":{"line":35,"column":23},"end":{"line":35,"column":35}},"65":{"start":{"line":35,"column":36},"end":{"line":35,"column":89}},"66":{"start":{"line":38,"column":0},"end":{"line":38,"column":62}},"67":{"start":{"line":39,"column":15},"end":{"line":39,"column":32}},"68":{"start":{"line":40,"column":18},"end":{"line":40,"column":45}},"69":{"start":{"line":41,"column":0},"end":{"line":65,"column":7}},"70":{"start":{"line":41,"column":42},"end":{"line":65,"column":3}},"71":{"start":{"line":43,"column":4},"end":{"line":64,"column":7}},"72":{"start":{"line":44,"column":8},"end":{"line":63,"column":9}},"73":{"start":{"line":46,"column":16},"end":{"line":46,"column":42}},"74":{"start":{"line":47,"column":16},"end":{"line":47,"column":127}},"75":{"start":{"line":49,"column":16},"end":{"line":49,"column":33}},"76":{"start":{"line":50,"column":16},"end":{"line":52,"column":17}},"77":{"start":{"line":51,"column":20},"end":{"line":51,"column":35}},"78":{"start":{"line":53,"column":16},"end":{"line":53,"column":65}},"79":{"start":{"line":54,"column":16},"end":{"line":54,"column":40}},"80":{"start":{"line":56,"column":16},"end":{"line":56,"column":32}},"81":{"start":{"line":57,"column":16},"end":{"line":57,"column":31}},"82":{"start":{"line":58,"column":16},"end":{"line":58,"column":40}},"83":{"start":{"line":59,"column":20},"end":{"line":59,"column":49}},"84":{"start":{"line":61,"column":16},"end":{"line":61,"column":26}},"85":{"start":{"line":62,"column":16},"end":{"line":62,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":48},"end":{"line":11,"column":49}},"loc":{"start":{"line":11,"column":73},"end":{"line":37,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":12,"column":30},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":41},"end":{"line":12,"column":83}},"line":12},"9":{"name":"(anonymous_9)","decl":{"start":{"line":13,"column":125},"end":{"line":13,"column":126}},"loc":{"start":{"line":13,"column":136},"end":{"line":13,"column":152}},"line":13},"10":{"name":"verb","decl":{"start":{"line":14,"column":13},"end":{"line":14,"column":17}},"loc":{"start":{"line":14,"column":21},"end":{"line":14,"column":70}},"line":14},"11":{"name":"(anonymous_11)","decl":{"start":{"line":14,"column":30},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":43},"end":{"line":14,"column":67}},"line":14},"12":{"name":"step","decl":{"start":{"line":15,"column":13},"end":{"line":15,"column":17}},"loc":{"start":{"line":15,"column":22},"end":{"line":36,"column":5}},"line":15},"13":{"name":"(anonymous_13)","decl":{"start":{"line":41,"column":19},"end":{"line":41,"column":20}},"loc":{"start":{"line":41,"column":40},"end":{"line":65,"column":5}},"line":41},"14":{"name":"(anonymous_14)","decl":{"start":{"line":41,"column":83},"end":{"line":41,"column":84}},"loc":{"start":{"line":41,"column":95},"end":{"line":65,"column":1}},"line":41},"15":{"name":"(anonymous_15)","decl":{"start":{"line":43,"column":29},"end":{"line":43,"column":30}},"loc":{"start":{"line":43,"column":43},"end":{"line":64,"column":5}},"line":43}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":19},"end":{"line":11,"column":23}},{"start":{"line":11,"column":27},"end":{"line":11,"column":43}},{"start":{"line":11,"column":48},"end":{"line":37,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"type":"if","locations":[{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},{"start":{"line":12,"column":43},"end":{"line":12,"column":68}}],"line":12},"7":{"loc":{"start":{"line":13,"column":71},"end":{"line":13,"column":153}},"type":"binary-expr","locations":[{"start":{"line":13,"column":71},"end":{"line":13,"column":99}},{"start":{"line":13,"column":104},"end":{"line":13,"column":152}}],"line":13},"8":{"loc":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"type":"if","locations":[{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},{"start":{"line":16,"column":8},"end":{"line":16,"column":70}}],"line":16},"9":{"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"type":"if","locations":[{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},{"start":{"line":18,"column":12},"end":{"line":18,"column":169}}],"line":18},"10":{"loc":{"start":{"line":18,"column":23},"end":{"line":18,"column":158}},"type":"binary-expr","locations":[{"start":{"line":18,"column":23},"end":{"line":18,"column":24}},{"start":{"line":18,"column":29},"end":{"line":18,"column":125}},{"start":{"line":18,"column":130},"end":{"line":18,"column":158}}],"line":18},"11":{"loc":{"start":{"line":18,"column":33},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":45},"end":{"line":18,"column":56}},{"start":{"line":18,"column":59},"end":{"line":18,"column":125}}],"line":18},"12":{"loc":{"start":{"line":18,"column":59},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},{"start":{"line":18,"column":119},"end":{"line":18,"column":125}}],"line":18},"13":{"loc":{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},"type":"binary-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":77}},{"start":{"line":18,"column":82},"end":{"line":18,"column":115}}],"line":18},"14":{"loc":{"start":{"line":18,"column":82},"end":{"line":18,"column":112}},"type":"binary-expr","locations":[{"start":{"line":18,"column":83},"end":{"line":18,"column":98}},{"start":{"line":18,"column":103},"end":{"line":18,"column":112}}],"line":18},"15":{"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"type":"if","locations":[{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},{"start":{"line":19,"column":12},"end":{"line":19,"column":52}}],"line":19},"16":{"loc":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"type":"switch","locations":[{"start":{"line":21,"column":16},"end":{"line":21,"column":23}},{"start":{"line":21,"column":24},"end":{"line":21,"column":46}},{"start":{"line":22,"column":16},"end":{"line":22,"column":72}},{"start":{"line":23,"column":16},"end":{"line":23,"column":65}},{"start":{"line":24,"column":16},"end":{"line":24,"column":65}},{"start":{"line":25,"column":16},"end":{"line":31,"column":43}}],"line":20},"17":{"loc":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"type":"if","locations":[{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},{"start":{"line":26,"column":20},"end":{"line":26,"column":128}}],"line":26},"18":{"loc":{"start":{"line":26,"column":24},"end":{"line":26,"column":106}},"type":"binary-expr","locations":[{"start":{"line":26,"column":24},"end":{"line":26,"column":74}},{"start":{"line":26,"column":79},"end":{"line":26,"column":90}},{"start":{"line":26,"column":94},"end":{"line":26,"column":105}}],"line":26},"19":{"loc":{"start":{"line":26,"column":42},"end":{"line":26,"column":73}},"type":"binary-expr","locations":[{"start":{"line":26,"column":42},"end":{"line":26,"column":54}},{"start":{"line":26,"column":58},"end":{"line":26,"column":73}}],"line":26},"20":{"loc":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"type":"if","locations":[{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},{"start":{"line":27,"column":20},"end":{"line":27,"column":106}}],"line":27},"21":{"loc":{"start":{"line":27,"column":24},"end":{"line":27,"column":77}},"type":"binary-expr","locations":[{"start":{"line":27,"column":24},"end":{"line":27,"column":35}},{"start":{"line":27,"column":40},"end":{"line":27,"column":42}},{"start":{"line":27,"column":47},"end":{"line":27,"column":59}},{"start":{"line":27,"column":63},"end":{"line":27,"column":75}}],"line":27},"22":{"loc":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"type":"if","locations":[{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},{"start":{"line":28,"column":20},"end":{"line":28,"column":89}}],"line":28},"23":{"loc":{"start":{"line":28,"column":24},"end":{"line":28,"column":53}},"type":"binary-expr","locations":[{"start":{"line":28,"column":24},"end":{"line":28,"column":35}},{"start":{"line":28,"column":39},"end":{"line":28,"column":53}}],"line":28},"24":{"loc":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"type":"if","locations":[{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},{"start":{"line":29,"column":20},"end":{"line":29,"column":87}}],"line":29},"25":{"loc":{"start":{"line":29,"column":24},"end":{"line":29,"column":43}},"type":"binary-expr","locations":[{"start":{"line":29,"column":24},"end":{"line":29,"column":25}},{"start":{"line":29,"column":29},"end":{"line":29,"column":43}}],"line":29},"26":{"loc":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"type":"if","locations":[{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},{"start":{"line":30,"column":20},"end":{"line":30,"column":42}}],"line":30},"27":{"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},{"start":{"line":35,"column":8},"end":{"line":35,"column":35}}],"line":35},"28":{"loc":{"start":{"line":35,"column":52},"end":{"line":35,"column":74}},"type":"cond-expr","locations":[{"start":{"line":35,"column":60},"end":{"line":35,"column":65}},{"start":{"line":35,"column":68},"end":{"line":35,"column":74}}],"line":35},"29":{"loc":{"start":{"line":44,"column":8},"end":{"line":63,"column":9}},"type":"switch","locations":[{"start":{"line":45,"column":12},"end":{"line":47,"column":127}},{"start":{"line":48,"column":12},"end":{"line":54,"column":40}},{"start":{"line":55,"column":12},"end":{"line":58,"column":40}},{"start":{"line":59,"column":12},"end":{"line":59,"column":49}},{"start":{"line":60,"column":12},"end":{"line":62,"column":38}}],"line":44},"30":{"loc":{"start":{"line":50,"column":16},"end":{"line":52,"column":17}},"type":"if","locations":[{"start":{"line":50,"column":16},"end":{"line":52,"column":17}},{"start":{"line":50,"column":16},"end":{"line":52,"column":17}}],"line":50}},"s":{"0":1,"1":2,"2":0,"3":1,"4":2,"5":2,"6":0,"7":0,"8":0,"9":0,"10":3,"11":1,"12":1,"13":1,"14":2,"15":0,"16":2,"17":1,"18":0,"19":3,"20":3,"21":3,"22":0,"23":3,"24":8,"25":8,"26":0,"27":8,"28":0,"29":8,"30":3,"31":3,"32":2,"33":2,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":3,"42":1,"43":1,"44":2,"45":1,"46":1,"47":1,"48":0,"49":0,"50":0,"51":1,"52":0,"53":0,"54":0,"55":1,"56":0,"57":1,"58":1,"59":4,"60":0,"61":0,"62":8,"63":1,"64":0,"65":1,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1,"72":4,"73":1,"74":1,"75":1,"76":1,"77":0,"78":1,"79":1,"80":0,"81":0,"82":0,"83":1,"84":1,"85":1},"f":{"0":1,"1":2,"2":0,"3":1,"4":2,"5":0,"6":3,"7":1,"8":2,"9":0,"10":3,"11":3,"12":3,"13":1,"14":1,"15":4},"b":{"0":[1,1,1],"1":[2,0],"2":[1,1],"3":[1,2],"4":[1,1],"5":[1,1,1],"6":[0,2],"7":[1,1],"8":[0,3],"9":[0,8],"10":[8,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,8],"16":[3,3,2,0,0,3],"17":[1,2],"18":[3,2,2],"19":[3,1],"20":[1,1],"21":[2,2,1,1],"22":[0,1],"23":[1,0],"24":[0,1],"25":[1,1],"26":[0,1],"27":[0,1],"28":[1,0],"29":[1,1,0,1,1],"30":[0,1]},"inputSourceMap":{"version":3,"file":"/app/app/middleware/auth.ts","sources":["/app/app/middleware/auth.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,iCAAwB;AACxB,8CAA+C;AAC/C,mBAAe,UAAO,GAAG,EAAE,IAAI;;;;;;gBAEd,qBAAM,WAAW,CAAC,iBAAiB,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC,EAAA;;gBAArG,IAAI,GAAG,SAA8F;gBAC3G,IAAI,CAAC,IAAI,EAAE;oBACT,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;iBACf;gBACD,GAAG,CAAC,IAAI,GAAG,UAAC,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,CAAA;;;;gBAEvC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;;oBAEhB,qBAAM,IAAI,EAAE,EAAA;;gBAAZ,SAAY,CAAA;;;;KACb,EAAA","sourcesContent":["import {_} from 'lodash'\nimport * as authService from '../services/auth'\nexport default async (ctx, next) => {\n  try {\n    const data = await authService.tokenVerification(ctx.cookies.get('token'), ctx.cookies.get('refreshToken'))\n    if (!data) {\n      ctx.throw(403)\n    }\n    ctx.user = _.pick(data, ['id', 'name'])\n  } catch (e) {\n    ctx.throw(403)\n  }\n  await next()\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"beb23c99b7bb6838604fd5121edc2274f1cf7e4f","contentHash":"e67ad5682db0dc92cf9dad09f7447679c7189acdb29a6964349c37ea208837ab"},"/app/app/controllers/auth.ts":{"path":"/app/app/controllers/auth.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"13":{"start":{"line":12,"column":12},"end":{"line":12,"column":104}},"14":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"15":{"start":{"line":12,"column":57},"end":{"line":12,"column":68}},"16":{"start":{"line":12,"column":69},"end":{"line":12,"column":81}},"17":{"start":{"line":13,"column":4},"end":{"line":13,"column":157}},"18":{"start":{"line":13,"column":138},"end":{"line":13,"column":150}},"19":{"start":{"line":14,"column":23},"end":{"line":14,"column":68}},"20":{"start":{"line":14,"column":45},"end":{"line":14,"column":65}},"21":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"22":{"start":{"line":16,"column":15},"end":{"line":16,"column":70}},"23":{"start":{"line":17,"column":8},"end":{"line":34,"column":66}},"24":{"start":{"line":17,"column":18},"end":{"line":34,"column":66}},"25":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"26":{"start":{"line":18,"column":160},"end":{"line":18,"column":169}},"27":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"28":{"start":{"line":19,"column":26},"end":{"line":19,"column":52}},"29":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"30":{"start":{"line":21,"column":32},"end":{"line":21,"column":39}},"31":{"start":{"line":21,"column":40},"end":{"line":21,"column":46}},"32":{"start":{"line":22,"column":24},"end":{"line":22,"column":34}},"33":{"start":{"line":22,"column":35},"end":{"line":22,"column":72}},"34":{"start":{"line":23,"column":24},"end":{"line":23,"column":34}},"35":{"start":{"line":23,"column":35},"end":{"line":23,"column":45}},"36":{"start":{"line":23,"column":46},"end":{"line":23,"column":55}},"37":{"start":{"line":23,"column":56},"end":{"line":23,"column":65}},"38":{"start":{"line":24,"column":24},"end":{"line":24,"column":41}},"39":{"start":{"line":24,"column":42},"end":{"line":24,"column":55}},"40":{"start":{"line":24,"column":56},"end":{"line":24,"column":65}},"41":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"42":{"start":{"line":26,"column":110},"end":{"line":26,"column":116}},"43":{"start":{"line":26,"column":117},"end":{"line":26,"column":126}},"44":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"45":{"start":{"line":27,"column":81},"end":{"line":27,"column":97}},"46":{"start":{"line":27,"column":98},"end":{"line":27,"column":104}},"47":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"48":{"start":{"line":28,"column":57},"end":{"line":28,"column":72}},"49":{"start":{"line":28,"column":73},"end":{"line":28,"column":80}},"50":{"start":{"line":28,"column":81},"end":{"line":28,"column":87}},"51":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"52":{"start":{"line":29,"column":47},"end":{"line":29,"column":62}},"53":{"start":{"line":29,"column":63},"end":{"line":29,"column":78}},"54":{"start":{"line":29,"column":79},"end":{"line":29,"column":85}},"55":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"56":{"start":{"line":30,"column":30},"end":{"line":30,"column":42}},"57":{"start":{"line":31,"column":20},"end":{"line":31,"column":33}},"58":{"start":{"line":31,"column":34},"end":{"line":31,"column":43}},"59":{"start":{"line":33,"column":12},"end":{"line":33,"column":39}},"60":{"start":{"line":34,"column":22},"end":{"line":34,"column":34}},"61":{"start":{"line":34,"column":35},"end":{"line":34,"column":41}},"62":{"start":{"line":34,"column":54},"end":{"line":34,"column":64}},"63":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"64":{"start":{"line":35,"column":23},"end":{"line":35,"column":35}},"65":{"start":{"line":35,"column":36},"end":{"line":35,"column":89}},"66":{"start":{"line":38,"column":0},"end":{"line":38,"column":62}},"67":{"start":{"line":39,"column":13},"end":{"line":39,"column":40}},"68":{"start":{"line":40,"column":18},"end":{"line":40,"column":45}},"69":{"start":{"line":41,"column":14},"end":{"line":41,"column":42}},"70":{"start":{"line":42,"column":21},"end":{"line":205,"column":1}},"71":{"start":{"line":44,"column":8},"end":{"line":74,"column":11}},"72":{"start":{"line":46,"column":12},"end":{"line":73,"column":15}},"73":{"start":{"line":47,"column":16},"end":{"line":72,"column":17}},"74":{"start":{"line":49,"column":24},"end":{"line":49,"column":69}},"75":{"start":{"line":50,"column":24},"end":{"line":50,"column":37}},"76":{"start":{"line":52,"column":24},"end":{"line":52,"column":50}},"77":{"start":{"line":53,"column":24},"end":{"line":53,"column":94}},"78":{"start":{"line":55,"column":24},"end":{"line":55,"column":41}},"79":{"start":{"line":56,"column":24},"end":{"line":56,"column":91}},"80":{"start":{"line":58,"column":24},"end":{"line":58,"column":34}},"81":{"start":{"line":59,"column":24},"end":{"line":59,"column":149}},"82":{"start":{"line":60,"column":24},"end":{"line":60,"column":52}},"83":{"start":{"line":61,"column":24},"end":{"line":61,"column":46}},"84":{"start":{"line":62,"column":24},"end":{"line":62,"column":89}},"85":{"start":{"line":64,"column":24},"end":{"line":64,"column":61}},"86":{"start":{"line":65,"column":24},"end":{"line":65,"column":41}},"87":{"start":{"line":66,"column":24},"end":{"line":66,"column":48}},"88":{"start":{"line":68,"column":24},"end":{"line":68,"column":40}},"89":{"start":{"line":69,"column":24},"end":{"line":69,"column":41}},"90":{"start":{"line":70,"column":24},"end":{"line":70,"column":48}},"91":{"start":{"line":71,"column":28},"end":{"line":71,"column":50}},"92":{"start":{"line":77,"column":8},"end":{"line":90,"column":11}},"93":{"start":{"line":79,"column":12},"end":{"line":89,"column":15}},"94":{"start":{"line":80,"column":16},"end":{"line":88,"column":17}},"95":{"start":{"line":82,"column":24},"end":{"line":82,"column":55}},"96":{"start":{"line":83,"column":24},"end":{"line":83,"column":85}},"97":{"start":{"line":85,"column":24},"end":{"line":85,"column":34}},"98":{"start":{"line":86,"column":24},"end":{"line":86,"column":41}},"99":{"start":{"line":87,"column":24},"end":{"line":87,"column":46}},"100":{"start":{"line":93,"column":8},"end":{"line":114,"column":11}},"101":{"start":{"line":95,"column":12},"end":{"line":113,"column":15}},"102":{"start":{"line":96,"column":16},"end":{"line":112,"column":17}},"103":{"start":{"line":98,"column":24},"end":{"line":98,"column":61}},"104":{"start":{"line":99,"column":24},"end":{"line":99,"column":37}},"105":{"start":{"line":101,"column":24},"end":{"line":101,"column":50}},"106":{"start":{"line":102,"column":24},"end":{"line":102,"column":100}},"107":{"start":{"line":104,"column":24},"end":{"line":104,"column":34}},"108":{"start":{"line":105,"column":24},"end":{"line":105,"column":41}},"109":{"start":{"line":106,"column":24},"end":{"line":106,"column":48}},"110":{"start":{"line":108,"column":24},"end":{"line":108,"column":40}},"111":{"start":{"line":109,"column":24},"end":{"line":109,"column":41}},"112":{"start":{"line":110,"column":24},"end":{"line":110,"column":48}},"113":{"start":{"line":111,"column":28},"end":{"line":111,"column":50}},"114":{"start":{"line":117,"column":8},"end":{"line":134,"column":11}},"115":{"start":{"line":119,"column":12},"end":{"line":133,"column":15}},"116":{"start":{"line":120,"column":16},"end":{"line":132,"column":17}},"117":{"start":{"line":122,"column":24},"end":{"line":122,"column":104}},"118":{"start":{"line":123,"column":24},"end":{"line":123,"column":128}},"119":{"start":{"line":125,"column":24},"end":{"line":125,"column":41}},"120":{"start":{"line":126,"column":24},"end":{"line":126,"column":99}},"121":{"start":{"line":127,"column":24},"end":{"line":127,"column":82}},"122":{"start":{"line":129,"column":24},"end":{"line":129,"column":34}},"123":{"start":{"line":130,"column":24},"end":{"line":130,"column":75}},"124":{"start":{"line":131,"column":24},"end":{"line":131,"column":46}},"125":{"start":{"line":137,"column":8},"end":{"line":166,"column":11}},"126":{"start":{"line":139,"column":12},"end":{"line":165,"column":15}},"127":{"start":{"line":140,"column":16},"end":{"line":164,"column":17}},"128":{"start":{"line":142,"column":24},"end":{"line":142,"column":88}},"129":{"start":{"line":143,"column":24},"end":{"line":143,"column":110}},"130":{"start":{"line":145,"column":24},"end":{"line":145,"column":41}},"131":{"start":{"line":146,"column":24},"end":{"line":150,"column":25}},"132":{"start":{"line":147,"column":28},"end":{"line":147,"column":45}},"133":{"start":{"line":148,"column":28},"end":{"line":148,"column":65}},"134":{"start":{"line":149,"column":28},"end":{"line":149,"column":50}},"135":{"start":{"line":151,"column":24},"end":{"line":155,"column":25}},"136":{"start":{"line":152,"column":28},"end":{"line":152,"column":60}},"137":{"start":{"line":153,"column":28},"end":{"line":153,"column":45}},"138":{"start":{"line":154,"column":28},"end":{"line":154,"column":50}},"139":{"start":{"line":156,"column":24},"end":{"line":156,"column":99}},"140":{"start":{"line":157,"column":24},"end":{"line":157,"column":89}},"141":{"start":{"line":159,"column":24},"end":{"line":159,"column":49}},"142":{"start":{"line":160,"column":24},"end":{"line":160,"column":76}},"143":{"start":{"line":161,"column":24},"end":{"line":161,"column":61}},"144":{"start":{"line":162,"column":24},"end":{"line":162,"column":41}},"145":{"start":{"line":163,"column":24},"end":{"line":163,"column":46}},"146":{"start":{"line":169,"column":8},"end":{"line":186,"column":11}},"147":{"start":{"line":171,"column":12},"end":{"line":185,"column":15}},"148":{"start":{"line":172,"column":16},"end":{"line":184,"column":17}},"149":{"start":{"line":174,"column":24},"end":{"line":174,"column":47}},"150":{"start":{"line":175,"column":24},"end":{"line":175,"column":72}},"151":{"start":{"line":177,"column":24},"end":{"line":177,"column":41}},"152":{"start":{"line":178,"column":24},"end":{"line":182,"column":25}},"153":{"start":{"line":179,"column":28},"end":{"line":179,"column":63}},"154":{"start":{"line":180,"column":28},"end":{"line":180,"column":65}},"155":{"start":{"line":181,"column":28},"end":{"line":181,"column":83}},"156":{"start":{"line":183,"column":24},"end":{"line":183,"column":65}},"157":{"start":{"line":189,"column":8},"end":{"line":196,"column":11}},"158":{"start":{"line":190,"column":12},"end":{"line":195,"column":15}},"159":{"start":{"line":191,"column":16},"end":{"line":191,"column":47}},"160":{"start":{"line":192,"column":16},"end":{"line":192,"column":54}},"161":{"start":{"line":193,"column":16},"end":{"line":193,"column":33}},"162":{"start":{"line":194,"column":16},"end":{"line":194,"column":38}},"163":{"start":{"line":199,"column":8},"end":{"line":199,"column":25}},"164":{"start":{"line":202,"column":20},"end":{"line":202,"column":48}},"165":{"start":{"line":203,"column":8},"end":{"line":203,"column":25}},"166":{"start":{"line":206,"column":0},"end":{"line":206,"column":33}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":48},"end":{"line":11,"column":49}},"loc":{"start":{"line":11,"column":73},"end":{"line":37,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":12,"column":30},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":41},"end":{"line":12,"column":83}},"line":12},"9":{"name":"(anonymous_9)","decl":{"start":{"line":13,"column":125},"end":{"line":13,"column":126}},"loc":{"start":{"line":13,"column":136},"end":{"line":13,"column":152}},"line":13},"10":{"name":"verb","decl":{"start":{"line":14,"column":13},"end":{"line":14,"column":17}},"loc":{"start":{"line":14,"column":21},"end":{"line":14,"column":70}},"line":14},"11":{"name":"(anonymous_11)","decl":{"start":{"line":14,"column":30},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":43},"end":{"line":14,"column":67}},"line":14},"12":{"name":"step","decl":{"start":{"line":15,"column":13},"end":{"line":15,"column":17}},"loc":{"start":{"line":15,"column":22},"end":{"line":36,"column":5}},"line":15},"13":{"name":"(anonymous_13)","decl":{"start":{"line":43,"column":18},"end":{"line":43,"column":19}},"loc":{"start":{"line":43,"column":33},"end":{"line":75,"column":5}},"line":43},"14":{"name":"(anonymous_14)","decl":{"start":{"line":44,"column":47},"end":{"line":44,"column":48}},"loc":{"start":{"line":44,"column":59},"end":{"line":74,"column":9}},"line":44},"15":{"name":"(anonymous_15)","decl":{"start":{"line":46,"column":37},"end":{"line":46,"column":38}},"loc":{"start":{"line":46,"column":51},"end":{"line":73,"column":13}},"line":46},"16":{"name":"(anonymous_16)","decl":{"start":{"line":76,"column":20},"end":{"line":76,"column":21}},"loc":{"start":{"line":76,"column":35},"end":{"line":91,"column":5}},"line":76},"17":{"name":"(anonymous_17)","decl":{"start":{"line":77,"column":47},"end":{"line":77,"column":48}},"loc":{"start":{"line":77,"column":59},"end":{"line":90,"column":9}},"line":77},"18":{"name":"(anonymous_18)","decl":{"start":{"line":79,"column":37},"end":{"line":79,"column":38}},"loc":{"start":{"line":79,"column":51},"end":{"line":89,"column":13}},"line":79},"19":{"name":"(anonymous_19)","decl":{"start":{"line":92,"column":20},"end":{"line":92,"column":21}},"loc":{"start":{"line":92,"column":35},"end":{"line":115,"column":5}},"line":92},"20":{"name":"(anonymous_20)","decl":{"start":{"line":93,"column":47},"end":{"line":93,"column":48}},"loc":{"start":{"line":93,"column":59},"end":{"line":114,"column":9}},"line":93},"21":{"name":"(anonymous_21)","decl":{"start":{"line":95,"column":37},"end":{"line":95,"column":38}},"loc":{"start":{"line":95,"column":51},"end":{"line":113,"column":13}},"line":95},"22":{"name":"(anonymous_22)","decl":{"start":{"line":116,"column":18},"end":{"line":116,"column":19}},"loc":{"start":{"line":116,"column":33},"end":{"line":135,"column":5}},"line":116},"23":{"name":"(anonymous_23)","decl":{"start":{"line":117,"column":47},"end":{"line":117,"column":48}},"loc":{"start":{"line":117,"column":59},"end":{"line":134,"column":9}},"line":117},"24":{"name":"(anonymous_24)","decl":{"start":{"line":119,"column":37},"end":{"line":119,"column":38}},"loc":{"start":{"line":119,"column":51},"end":{"line":133,"column":13}},"line":119},"25":{"name":"(anonymous_25)","decl":{"start":{"line":136,"column":11},"end":{"line":136,"column":12}},"loc":{"start":{"line":136,"column":26},"end":{"line":167,"column":5}},"line":136},"26":{"name":"(anonymous_26)","decl":{"start":{"line":137,"column":47},"end":{"line":137,"column":48}},"loc":{"start":{"line":137,"column":59},"end":{"line":166,"column":9}},"line":137},"27":{"name":"(anonymous_27)","decl":{"start":{"line":139,"column":37},"end":{"line":139,"column":38}},"loc":{"start":{"line":139,"column":51},"end":{"line":165,"column":13}},"line":139},"28":{"name":"(anonymous_28)","decl":{"start":{"line":168,"column":18},"end":{"line":168,"column":19}},"loc":{"start":{"line":168,"column":33},"end":{"line":187,"column":5}},"line":168},"29":{"name":"(anonymous_29)","decl":{"start":{"line":169,"column":47},"end":{"line":169,"column":48}},"loc":{"start":{"line":169,"column":59},"end":{"line":186,"column":9}},"line":169},"30":{"name":"(anonymous_30)","decl":{"start":{"line":171,"column":37},"end":{"line":171,"column":38}},"loc":{"start":{"line":171,"column":51},"end":{"line":185,"column":13}},"line":171},"31":{"name":"(anonymous_31)","decl":{"start":{"line":188,"column":12},"end":{"line":188,"column":13}},"loc":{"start":{"line":188,"column":27},"end":{"line":197,"column":5}},"line":188},"32":{"name":"(anonymous_32)","decl":{"start":{"line":189,"column":47},"end":{"line":189,"column":48}},"loc":{"start":{"line":189,"column":59},"end":{"line":196,"column":9}},"line":189},"33":{"name":"(anonymous_33)","decl":{"start":{"line":190,"column":37},"end":{"line":190,"column":38}},"loc":{"start":{"line":190,"column":51},"end":{"line":195,"column":13}},"line":190},"34":{"name":"(anonymous_34)","decl":{"start":{"line":198,"column":17},"end":{"line":198,"column":18}},"loc":{"start":{"line":198,"column":32},"end":{"line":200,"column":5}},"line":198},"35":{"name":"(anonymous_35)","decl":{"start":{"line":201,"column":17},"end":{"line":201,"column":18}},"loc":{"start":{"line":201,"column":32},"end":{"line":204,"column":5}},"line":201}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":19},"end":{"line":11,"column":23}},{"start":{"line":11,"column":27},"end":{"line":11,"column":43}},{"start":{"line":11,"column":48},"end":{"line":37,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"type":"if","locations":[{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},{"start":{"line":12,"column":43},"end":{"line":12,"column":68}}],"line":12},"7":{"loc":{"start":{"line":13,"column":71},"end":{"line":13,"column":153}},"type":"binary-expr","locations":[{"start":{"line":13,"column":71},"end":{"line":13,"column":99}},{"start":{"line":13,"column":104},"end":{"line":13,"column":152}}],"line":13},"8":{"loc":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"type":"if","locations":[{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},{"start":{"line":16,"column":8},"end":{"line":16,"column":70}}],"line":16},"9":{"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"type":"if","locations":[{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},{"start":{"line":18,"column":12},"end":{"line":18,"column":169}}],"line":18},"10":{"loc":{"start":{"line":18,"column":23},"end":{"line":18,"column":158}},"type":"binary-expr","locations":[{"start":{"line":18,"column":23},"end":{"line":18,"column":24}},{"start":{"line":18,"column":29},"end":{"line":18,"column":125}},{"start":{"line":18,"column":130},"end":{"line":18,"column":158}}],"line":18},"11":{"loc":{"start":{"line":18,"column":33},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":45},"end":{"line":18,"column":56}},{"start":{"line":18,"column":59},"end":{"line":18,"column":125}}],"line":18},"12":{"loc":{"start":{"line":18,"column":59},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},{"start":{"line":18,"column":119},"end":{"line":18,"column":125}}],"line":18},"13":{"loc":{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},"type":"binary-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":77}},{"start":{"line":18,"column":82},"end":{"line":18,"column":115}}],"line":18},"14":{"loc":{"start":{"line":18,"column":82},"end":{"line":18,"column":112}},"type":"binary-expr","locations":[{"start":{"line":18,"column":83},"end":{"line":18,"column":98}},{"start":{"line":18,"column":103},"end":{"line":18,"column":112}}],"line":18},"15":{"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"type":"if","locations":[{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},{"start":{"line":19,"column":12},"end":{"line":19,"column":52}}],"line":19},"16":{"loc":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"type":"switch","locations":[{"start":{"line":21,"column":16},"end":{"line":21,"column":23}},{"start":{"line":21,"column":24},"end":{"line":21,"column":46}},{"start":{"line":22,"column":16},"end":{"line":22,"column":72}},{"start":{"line":23,"column":16},"end":{"line":23,"column":65}},{"start":{"line":24,"column":16},"end":{"line":24,"column":65}},{"start":{"line":25,"column":16},"end":{"line":31,"column":43}}],"line":20},"17":{"loc":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"type":"if","locations":[{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},{"start":{"line":26,"column":20},"end":{"line":26,"column":128}}],"line":26},"18":{"loc":{"start":{"line":26,"column":24},"end":{"line":26,"column":106}},"type":"binary-expr","locations":[{"start":{"line":26,"column":24},"end":{"line":26,"column":74}},{"start":{"line":26,"column":79},"end":{"line":26,"column":90}},{"start":{"line":26,"column":94},"end":{"line":26,"column":105}}],"line":26},"19":{"loc":{"start":{"line":26,"column":42},"end":{"line":26,"column":73}},"type":"binary-expr","locations":[{"start":{"line":26,"column":42},"end":{"line":26,"column":54}},{"start":{"line":26,"column":58},"end":{"line":26,"column":73}}],"line":26},"20":{"loc":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"type":"if","locations":[{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},{"start":{"line":27,"column":20},"end":{"line":27,"column":106}}],"line":27},"21":{"loc":{"start":{"line":27,"column":24},"end":{"line":27,"column":77}},"type":"binary-expr","locations":[{"start":{"line":27,"column":24},"end":{"line":27,"column":35}},{"start":{"line":27,"column":40},"end":{"line":27,"column":42}},{"start":{"line":27,"column":47},"end":{"line":27,"column":59}},{"start":{"line":27,"column":63},"end":{"line":27,"column":75}}],"line":27},"22":{"loc":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"type":"if","locations":[{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},{"start":{"line":28,"column":20},"end":{"line":28,"column":89}}],"line":28},"23":{"loc":{"start":{"line":28,"column":24},"end":{"line":28,"column":53}},"type":"binary-expr","locations":[{"start":{"line":28,"column":24},"end":{"line":28,"column":35}},{"start":{"line":28,"column":39},"end":{"line":28,"column":53}}],"line":28},"24":{"loc":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"type":"if","locations":[{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},{"start":{"line":29,"column":20},"end":{"line":29,"column":87}}],"line":29},"25":{"loc":{"start":{"line":29,"column":24},"end":{"line":29,"column":43}},"type":"binary-expr","locations":[{"start":{"line":29,"column":24},"end":{"line":29,"column":25}},{"start":{"line":29,"column":29},"end":{"line":29,"column":43}}],"line":29},"26":{"loc":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"type":"if","locations":[{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},{"start":{"line":30,"column":20},"end":{"line":30,"column":42}}],"line":30},"27":{"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},{"start":{"line":35,"column":8},"end":{"line":35,"column":35}}],"line":35},"28":{"loc":{"start":{"line":35,"column":52},"end":{"line":35,"column":74}},"type":"cond-expr","locations":[{"start":{"line":35,"column":60},"end":{"line":35,"column":65}},{"start":{"line":35,"column":68},"end":{"line":35,"column":74}}],"line":35},"29":{"loc":{"start":{"line":47,"column":16},"end":{"line":72,"column":17}},"type":"switch","locations":[{"start":{"line":48,"column":20},"end":{"line":50,"column":37}},{"start":{"line":51,"column":20},"end":{"line":53,"column":94}},{"start":{"line":54,"column":20},"end":{"line":56,"column":91}},{"start":{"line":57,"column":20},"end":{"line":62,"column":89}},{"start":{"line":63,"column":20},"end":{"line":66,"column":48}},{"start":{"line":67,"column":20},"end":{"line":70,"column":48}},{"start":{"line":71,"column":20},"end":{"line":71,"column":50}}],"line":47},"30":{"loc":{"start":{"line":59,"column":109},"end":{"line":59,"column":144}},"type":"binary-expr","locations":[{"start":{"line":59,"column":109},"end":{"line":59,"column":124}},{"start":{"line":59,"column":128},"end":{"line":59,"column":144}}],"line":59},"31":{"loc":{"start":{"line":80,"column":16},"end":{"line":88,"column":17}},"type":"switch","locations":[{"start":{"line":81,"column":20},"end":{"line":83,"column":85}},{"start":{"line":84,"column":20},"end":{"line":87,"column":46}}],"line":80},"32":{"loc":{"start":{"line":96,"column":16},"end":{"line":112,"column":17}},"type":"switch","locations":[{"start":{"line":97,"column":20},"end":{"line":99,"column":37}},{"start":{"line":100,"column":20},"end":{"line":102,"column":100}},{"start":{"line":103,"column":20},"end":{"line":106,"column":48}},{"start":{"line":107,"column":20},"end":{"line":110,"column":48}},{"start":{"line":111,"column":20},"end":{"line":111,"column":50}}],"line":96},"33":{"loc":{"start":{"line":120,"column":16},"end":{"line":132,"column":17}},"type":"switch","locations":[{"start":{"line":121,"column":20},"end":{"line":123,"column":128}},{"start":{"line":124,"column":20},"end":{"line":127,"column":82}},{"start":{"line":128,"column":20},"end":{"line":131,"column":46}}],"line":120},"34":{"loc":{"start":{"line":140,"column":16},"end":{"line":164,"column":17}},"type":"switch","locations":[{"start":{"line":141,"column":20},"end":{"line":143,"column":110}},{"start":{"line":144,"column":20},"end":{"line":157,"column":89}},{"start":{"line":158,"column":20},"end":{"line":163,"column":46}}],"line":140},"35":{"loc":{"start":{"line":146,"column":24},"end":{"line":150,"column":25}},"type":"if","locations":[{"start":{"line":146,"column":24},"end":{"line":150,"column":25}},{"start":{"line":146,"column":24},"end":{"line":150,"column":25}}],"line":146},"36":{"loc":{"start":{"line":151,"column":24},"end":{"line":155,"column":25}},"type":"if","locations":[{"start":{"line":151,"column":24},"end":{"line":155,"column":25}},{"start":{"line":151,"column":24},"end":{"line":155,"column":25}}],"line":151},"37":{"loc":{"start":{"line":151,"column":28},"end":{"line":151,"column":56}},"type":"binary-expr","locations":[{"start":{"line":151,"column":28},"end":{"line":151,"column":32}},{"start":{"line":151,"column":36},"end":{"line":151,"column":56}}],"line":151},"38":{"loc":{"start":{"line":172,"column":16},"end":{"line":184,"column":17}},"type":"switch","locations":[{"start":{"line":173,"column":20},"end":{"line":175,"column":72}},{"start":{"line":176,"column":20},"end":{"line":183,"column":65}}],"line":172},"39":{"loc":{"start":{"line":178,"column":24},"end":{"line":182,"column":25}},"type":"if","locations":[{"start":{"line":178,"column":24},"end":{"line":182,"column":25}},{"start":{"line":178,"column":24},"end":{"line":182,"column":25}}],"line":178}},"s":{"0":1,"1":38,"2":8,"3":23,"4":37,"5":37,"6":0,"7":1,"8":1,"9":0,"10":61,"11":23,"12":1,"13":23,"14":39,"15":1,"16":38,"17":23,"18":0,"19":69,"20":61,"21":61,"22":0,"23":61,"24":129,"25":129,"26":0,"27":129,"28":0,"29":129,"30":61,"31":61,"32":38,"33":38,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":30,"42":23,"43":23,"44":7,"45":3,"46":3,"47":4,"48":1,"49":1,"50":1,"51":3,"52":0,"53":0,"54":0,"55":3,"56":0,"57":3,"58":3,"59":65,"60":1,"61":1,"62":129,"63":23,"64":0,"65":23,"66":1,"67":1,"68":1,"69":1,"70":1,"71":2,"72":2,"73":9,"74":2,"75":2,"76":2,"77":2,"78":2,"79":1,"80":1,"81":1,"82":1,"83":1,"84":1,"85":1,"86":1,"87":1,"88":1,"89":1,"90":1,"91":2,"92":1,"93":1,"94":2,"95":1,"96":1,"97":1,"98":1,"99":1,"100":1,"101":1,"102":3,"103":1,"104":1,"105":1,"106":1,"107":1,"108":1,"109":1,"110":0,"111":0,"112":0,"113":1,"114":7,"115":7,"116":21,"117":7,"118":7,"119":7,"120":7,"121":7,"122":7,"123":7,"124":7,"125":6,"126":6,"127":18,"128":6,"129":6,"130":6,"131":6,"132":0,"133":0,"134":0,"135":6,"136":0,"137":0,"138":0,"139":6,"140":6,"141":6,"142":6,"143":6,"144":6,"145":6,"146":6,"147":6,"148":12,"149":6,"150":6,"151":6,"152":6,"153":6,"154":6,"155":6,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":1},"f":{"0":23,"1":38,"2":8,"3":23,"4":37,"5":1,"6":61,"7":23,"8":39,"9":0,"10":69,"11":61,"12":61,"13":2,"14":2,"15":9,"16":1,"17":1,"18":2,"19":1,"20":1,"21":3,"22":7,"23":7,"24":21,"25":6,"26":6,"27":18,"28":6,"29":6,"30":12,"31":0,"32":0,"33":0,"34":0,"35":0},"b":{"0":[1,1,1],"1":[30,8],"2":[23,23],"3":[23,38],"4":[23,23],"5":[1,1,1],"6":[1,38],"7":[23,23],"8":[0,61],"9":[0,129],"10":[129,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,129],"16":[60,61,38,0,0,30],"17":[23,7],"18":[30,26,26],"19":[30,4],"20":[3,4],"21":[7,6,3,3],"22":[1,3],"23":[4,1],"24":[0,3],"25":[3,3],"26":[0,3],"27":[0,23],"28":[23,0],"29":[2,2,2,1,1,1,2],"30":[1,0],"31":[1,1],"32":[1,1,1,0,1],"33":[7,7,7],"34":[6,6,6],"35":[0,6],"36":[0,6],"37":[6,6],"38":[6,6],"39":[6,0]},"inputSourceMap":{"version":3,"file":"/app/app/controllers/auth.ts","sources":["/app/app/controllers/auth.ts"],"names":[],"mappings":"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","sourcesContent":["import {sendConfirmationEmail, confirmEmail} from '../services/auth'\nimport * as authService from '../services/auth'\nimport userService from '../services/users'\nimport { _ } from 'lodash'\nimport {IUser} from '../db/queries/interfaces/Iusers'\n\nconst authController = {\n\n  async refreshToken(ctx) {\n    const {refreshToken} = ctx.request.body;\n    try {\n      const user = await authService.getUserByRefreshToken(refreshToken);\n      await authService.removeRefreshToken(refreshToken);\n      ctx.cookies.set('token', `Bearer ${authService.createJWTToken({id: user.id, name: user.local.name || user.google.name})}`);\n      ctx.cookies.set('refreshToken', await authService.createJWTRefreshToken(user.id));\n      ctx.status = 200\n    } catch (e) {\n      ctx.status = 403\n    }\n  },\n\n  async forgotPassword(ctx) {\n    const {email} = ctx.request.body;\n    await userService.sendNewPassword(email);\n    ctx.status = 200\n  },\n\n  async changePassword(ctx) {\n    const {password} = ctx.request.body;\n    try {\n      await userService.changePassword(password, ctx.user.id);\n      ctx.status = 200\n    } catch (e) {\n      ctx.status = 500\n    }\n  },\n\n  async registration(ctx) {\n    const {name, email, password} = ctx.request.body\n    const user: IUser = await userService.createLocalUser({name, email, password});\n    const token = authService.createJWTToken({id: user.id, name: user.local.name});\n    await sendConfirmationEmail(email);\n    ctx.body = {name: user.local.name, token}\n  },\n\n  async login(ctx) {\n    const {email, password} = ctx.request.body;\n    const user = await userService.checkUser({email, password});\n    if (!user) {\n      ctx.status = 403;\n      ctx.body = 'Wrong email or password';\n      return\n    }\n    if (user && !user.local.verified) {\n      ctx.body = 'Email not verified';\n      ctx.status = 401;\n      return\n    }\n    const token = authService.createJWTToken({id: user.id, name: user.local.name});\n    const refreshToken = await authService.createJWTRefreshToken(user.id);\n    authService.setAuthTokens(token, refreshToken, ctx);\n    ctx.body = {name: user.local.name};\n    ctx.status = 200\n  },\n  async confirmEmail(ctx) {\n    const {hash} = ctx.params;\n    const user = await confirmEmail(hash);\n    if (user) {\n      const buff = new Buffer(user.local.name);\n      const base64data = buff.toString('base64');\n      return ctx.redirect(`/#${base64data}`)\n    }\n    return ctx.redirect('/')\n  },\n  async logout(ctx) {\n    ctx.cookies.set('token', null);\n    ctx.cookies.set('refreshToken', null);\n    ctx.status = 200\n  },\n  secretRoute(ctx) {\n    ctx.status = 200;\n  },\n  googleOAuth(ctx) {\n    const email: string = ctx.req.user.emails[0].value;\n    ctx.body = email;\n  }\n};\nexport default authController\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"383c0f847e2bb4d35521f2e936afb8d2a3b20085","contentHash":"e86f7fb2e297bc30d435bcf297d5237deb88e8c2f966ec1f8f264baf31f101a7"},"/app/app/services/users.ts":{"path":"/app/app/services/users.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"13":{"start":{"line":12,"column":12},"end":{"line":12,"column":104}},"14":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"15":{"start":{"line":12,"column":57},"end":{"line":12,"column":68}},"16":{"start":{"line":12,"column":69},"end":{"line":12,"column":81}},"17":{"start":{"line":13,"column":4},"end":{"line":13,"column":157}},"18":{"start":{"line":13,"column":138},"end":{"line":13,"column":150}},"19":{"start":{"line":14,"column":23},"end":{"line":14,"column":68}},"20":{"start":{"line":14,"column":45},"end":{"line":14,"column":65}},"21":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"22":{"start":{"line":16,"column":15},"end":{"line":16,"column":70}},"23":{"start":{"line":17,"column":8},"end":{"line":34,"column":66}},"24":{"start":{"line":17,"column":18},"end":{"line":34,"column":66}},"25":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"26":{"start":{"line":18,"column":160},"end":{"line":18,"column":169}},"27":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"28":{"start":{"line":19,"column":26},"end":{"line":19,"column":52}},"29":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"30":{"start":{"line":21,"column":32},"end":{"line":21,"column":39}},"31":{"start":{"line":21,"column":40},"end":{"line":21,"column":46}},"32":{"start":{"line":22,"column":24},"end":{"line":22,"column":34}},"33":{"start":{"line":22,"column":35},"end":{"line":22,"column":72}},"34":{"start":{"line":23,"column":24},"end":{"line":23,"column":34}},"35":{"start":{"line":23,"column":35},"end":{"line":23,"column":45}},"36":{"start":{"line":23,"column":46},"end":{"line":23,"column":55}},"37":{"start":{"line":23,"column":56},"end":{"line":23,"column":65}},"38":{"start":{"line":24,"column":24},"end":{"line":24,"column":41}},"39":{"start":{"line":24,"column":42},"end":{"line":24,"column":55}},"40":{"start":{"line":24,"column":56},"end":{"line":24,"column":65}},"41":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"42":{"start":{"line":26,"column":110},"end":{"line":26,"column":116}},"43":{"start":{"line":26,"column":117},"end":{"line":26,"column":126}},"44":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"45":{"start":{"line":27,"column":81},"end":{"line":27,"column":97}},"46":{"start":{"line":27,"column":98},"end":{"line":27,"column":104}},"47":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"48":{"start":{"line":28,"column":57},"end":{"line":28,"column":72}},"49":{"start":{"line":28,"column":73},"end":{"line":28,"column":80}},"50":{"start":{"line":28,"column":81},"end":{"line":28,"column":87}},"51":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"52":{"start":{"line":29,"column":47},"end":{"line":29,"column":62}},"53":{"start":{"line":29,"column":63},"end":{"line":29,"column":78}},"54":{"start":{"line":29,"column":79},"end":{"line":29,"column":85}},"55":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"56":{"start":{"line":30,"column":30},"end":{"line":30,"column":42}},"57":{"start":{"line":31,"column":20},"end":{"line":31,"column":33}},"58":{"start":{"line":31,"column":34},"end":{"line":31,"column":43}},"59":{"start":{"line":33,"column":12},"end":{"line":33,"column":39}},"60":{"start":{"line":34,"column":22},"end":{"line":34,"column":34}},"61":{"start":{"line":34,"column":35},"end":{"line":34,"column":41}},"62":{"start":{"line":34,"column":54},"end":{"line":34,"column":64}},"63":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"64":{"start":{"line":35,"column":23},"end":{"line":35,"column":35}},"65":{"start":{"line":35,"column":36},"end":{"line":35,"column":89}},"66":{"start":{"line":38,"column":0},"end":{"line":38,"column":62}},"67":{"start":{"line":39,"column":16},"end":{"line":39,"column":46}},"68":{"start":{"line":40,"column":13},"end":{"line":40,"column":32}},"69":{"start":{"line":41,"column":15},"end":{"line":41,"column":40}},"70":{"start":{"line":43,"column":4},"end":{"line":56,"column":7}},"71":{"start":{"line":45,"column":8},"end":{"line":55,"column":11}},"72":{"start":{"line":46,"column":12},"end":{"line":54,"column":13}},"73":{"start":{"line":47,"column":24},"end":{"line":47,"column":93}},"74":{"start":{"line":49,"column":20},"end":{"line":49,"column":37}},"75":{"start":{"line":50,"column":20},"end":{"line":52,"column":21}},"76":{"start":{"line":51,"column":24},"end":{"line":51,"column":52}},"77":{"start":{"line":53,"column":20},"end":{"line":53,"column":48}},"78":{"start":{"line":59,"column":4},"end":{"line":66,"column":7}},"79":{"start":{"line":60,"column":8},"end":{"line":65,"column":11}},"80":{"start":{"line":61,"column":12},"end":{"line":64,"column":13}},"81":{"start":{"line":62,"column":24},"end":{"line":62,"column":90}},"82":{"start":{"line":63,"column":24},"end":{"line":63,"column":57}},"83":{"start":{"line":69,"column":4},"end":{"line":91,"column":7}},"84":{"start":{"line":71,"column":8},"end":{"line":90,"column":11}},"85":{"start":{"line":72,"column":12},"end":{"line":89,"column":13}},"86":{"start":{"line":74,"column":20},"end":{"line":74,"column":74}},"87":{"start":{"line":75,"column":20},"end":{"line":75,"column":80}},"88":{"start":{"line":77,"column":20},"end":{"line":77,"column":37}},"89":{"start":{"line":78,"column":20},"end":{"line":78,"column":55}},"90":{"start":{"line":78,"column":31},"end":{"line":78,"column":55}},"91":{"start":{"line":79,"column":20},"end":{"line":85,"column":23}},"92":{"start":{"line":86,"column":20},"end":{"line":86,"column":94}},"93":{"start":{"line":87,"column":24},"end":{"line":87,"column":57}},"94":{"start":{"line":88,"column":24},"end":{"line":88,"column":46}},"95":{"start":{"line":94,"column":4},"end":{"line":101,"column":7}},"96":{"start":{"line":95,"column":8},"end":{"line":100,"column":11}},"97":{"start":{"line":96,"column":12},"end":{"line":99,"column":13}},"98":{"start":{"line":97,"column":24},"end":{"line":97,"column":75}},"99":{"start":{"line":98,"column":24},"end":{"line":98,"column":57}},"100":{"start":{"line":103,"column":0},"end":{"line":108,"column":2}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":48},"end":{"line":11,"column":49}},"loc":{"start":{"line":11,"column":73},"end":{"line":37,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":12,"column":30},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":41},"end":{"line":12,"column":83}},"line":12},"9":{"name":"(anonymous_9)","decl":{"start":{"line":13,"column":125},"end":{"line":13,"column":126}},"loc":{"start":{"line":13,"column":136},"end":{"line":13,"column":152}},"line":13},"10":{"name":"verb","decl":{"start":{"line":14,"column":13},"end":{"line":14,"column":17}},"loc":{"start":{"line":14,"column":21},"end":{"line":14,"column":70}},"line":14},"11":{"name":"(anonymous_11)","decl":{"start":{"line":14,"column":30},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":43},"end":{"line":14,"column":67}},"line":14},"12":{"name":"step","decl":{"start":{"line":15,"column":13},"end":{"line":15,"column":17}},"loc":{"start":{"line":15,"column":22},"end":{"line":36,"column":5}},"line":15},"13":{"name":"checkUser","decl":{"start":{"line":42,"column":9},"end":{"line":42,"column":18}},"loc":{"start":{"line":42,"column":29},"end":{"line":57,"column":1}},"line":42},"14":{"name":"(anonymous_14)","decl":{"start":{"line":43,"column":43},"end":{"line":43,"column":44}},"loc":{"start":{"line":43,"column":55},"end":{"line":56,"column":5}},"line":43},"15":{"name":"(anonymous_15)","decl":{"start":{"line":45,"column":33},"end":{"line":45,"column":34}},"loc":{"start":{"line":45,"column":47},"end":{"line":55,"column":9}},"line":45},"16":{"name":"changePassword","decl":{"start":{"line":58,"column":9},"end":{"line":58,"column":23}},"loc":{"start":{"line":58,"column":38},"end":{"line":67,"column":1}},"line":58},"17":{"name":"(anonymous_17)","decl":{"start":{"line":59,"column":43},"end":{"line":59,"column":44}},"loc":{"start":{"line":59,"column":55},"end":{"line":66,"column":5}},"line":59},"18":{"name":"(anonymous_18)","decl":{"start":{"line":60,"column":33},"end":{"line":60,"column":34}},"loc":{"start":{"line":60,"column":47},"end":{"line":65,"column":9}},"line":60},"19":{"name":"sendNewPassword","decl":{"start":{"line":68,"column":9},"end":{"line":68,"column":24}},"loc":{"start":{"line":68,"column":32},"end":{"line":92,"column":1}},"line":68},"20":{"name":"(anonymous_20)","decl":{"start":{"line":69,"column":43},"end":{"line":69,"column":44}},"loc":{"start":{"line":69,"column":55},"end":{"line":91,"column":5}},"line":69},"21":{"name":"(anonymous_21)","decl":{"start":{"line":71,"column":33},"end":{"line":71,"column":34}},"loc":{"start":{"line":71,"column":47},"end":{"line":90,"column":9}},"line":71},"22":{"name":"createLocalUser","decl":{"start":{"line":93,"column":9},"end":{"line":93,"column":24}},"loc":{"start":{"line":93,"column":31},"end":{"line":102,"column":1}},"line":93},"23":{"name":"(anonymous_23)","decl":{"start":{"line":94,"column":43},"end":{"line":94,"column":44}},"loc":{"start":{"line":94,"column":55},"end":{"line":101,"column":5}},"line":94},"24":{"name":"(anonymous_24)","decl":{"start":{"line":95,"column":33},"end":{"line":95,"column":34}},"loc":{"start":{"line":95,"column":47},"end":{"line":100,"column":9}},"line":95}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":19},"end":{"line":11,"column":23}},{"start":{"line":11,"column":27},"end":{"line":11,"column":43}},{"start":{"line":11,"column":48},"end":{"line":37,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"type":"if","locations":[{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},{"start":{"line":12,"column":43},"end":{"line":12,"column":68}}],"line":12},"7":{"loc":{"start":{"line":13,"column":71},"end":{"line":13,"column":153}},"type":"binary-expr","locations":[{"start":{"line":13,"column":71},"end":{"line":13,"column":99}},{"start":{"line":13,"column":104},"end":{"line":13,"column":152}}],"line":13},"8":{"loc":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"type":"if","locations":[{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},{"start":{"line":16,"column":8},"end":{"line":16,"column":70}}],"line":16},"9":{"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"type":"if","locations":[{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},{"start":{"line":18,"column":12},"end":{"line":18,"column":169}}],"line":18},"10":{"loc":{"start":{"line":18,"column":23},"end":{"line":18,"column":158}},"type":"binary-expr","locations":[{"start":{"line":18,"column":23},"end":{"line":18,"column":24}},{"start":{"line":18,"column":29},"end":{"line":18,"column":125}},{"start":{"line":18,"column":130},"end":{"line":18,"column":158}}],"line":18},"11":{"loc":{"start":{"line":18,"column":33},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":45},"end":{"line":18,"column":56}},{"start":{"line":18,"column":59},"end":{"line":18,"column":125}}],"line":18},"12":{"loc":{"start":{"line":18,"column":59},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},{"start":{"line":18,"column":119},"end":{"line":18,"column":125}}],"line":18},"13":{"loc":{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},"type":"binary-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":77}},{"start":{"line":18,"column":82},"end":{"line":18,"column":115}}],"line":18},"14":{"loc":{"start":{"line":18,"column":82},"end":{"line":18,"column":112}},"type":"binary-expr","locations":[{"start":{"line":18,"column":83},"end":{"line":18,"column":98}},{"start":{"line":18,"column":103},"end":{"line":18,"column":112}}],"line":18},"15":{"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"type":"if","locations":[{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},{"start":{"line":19,"column":12},"end":{"line":19,"column":52}}],"line":19},"16":{"loc":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"type":"switch","locations":[{"start":{"line":21,"column":16},"end":{"line":21,"column":23}},{"start":{"line":21,"column":24},"end":{"line":21,"column":46}},{"start":{"line":22,"column":16},"end":{"line":22,"column":72}},{"start":{"line":23,"column":16},"end":{"line":23,"column":65}},{"start":{"line":24,"column":16},"end":{"line":24,"column":65}},{"start":{"line":25,"column":16},"end":{"line":31,"column":43}}],"line":20},"17":{"loc":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"type":"if","locations":[{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},{"start":{"line":26,"column":20},"end":{"line":26,"column":128}}],"line":26},"18":{"loc":{"start":{"line":26,"column":24},"end":{"line":26,"column":106}},"type":"binary-expr","locations":[{"start":{"line":26,"column":24},"end":{"line":26,"column":74}},{"start":{"line":26,"column":79},"end":{"line":26,"column":90}},{"start":{"line":26,"column":94},"end":{"line":26,"column":105}}],"line":26},"19":{"loc":{"start":{"line":26,"column":42},"end":{"line":26,"column":73}},"type":"binary-expr","locations":[{"start":{"line":26,"column":42},"end":{"line":26,"column":54}},{"start":{"line":26,"column":58},"end":{"line":26,"column":73}}],"line":26},"20":{"loc":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"type":"if","locations":[{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},{"start":{"line":27,"column":20},"end":{"line":27,"column":106}}],"line":27},"21":{"loc":{"start":{"line":27,"column":24},"end":{"line":27,"column":77}},"type":"binary-expr","locations":[{"start":{"line":27,"column":24},"end":{"line":27,"column":35}},{"start":{"line":27,"column":40},"end":{"line":27,"column":42}},{"start":{"line":27,"column":47},"end":{"line":27,"column":59}},{"start":{"line":27,"column":63},"end":{"line":27,"column":75}}],"line":27},"22":{"loc":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"type":"if","locations":[{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},{"start":{"line":28,"column":20},"end":{"line":28,"column":89}}],"line":28},"23":{"loc":{"start":{"line":28,"column":24},"end":{"line":28,"column":53}},"type":"binary-expr","locations":[{"start":{"line":28,"column":24},"end":{"line":28,"column":35}},{"start":{"line":28,"column":39},"end":{"line":28,"column":53}}],"line":28},"24":{"loc":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"type":"if","locations":[{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},{"start":{"line":29,"column":20},"end":{"line":29,"column":87}}],"line":29},"25":{"loc":{"start":{"line":29,"column":24},"end":{"line":29,"column":43}},"type":"binary-expr","locations":[{"start":{"line":29,"column":24},"end":{"line":29,"column":25}},{"start":{"line":29,"column":29},"end":{"line":29,"column":43}}],"line":29},"26":{"loc":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"type":"if","locations":[{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},{"start":{"line":30,"column":20},"end":{"line":30,"column":42}}],"line":30},"27":{"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},{"start":{"line":35,"column":8},"end":{"line":35,"column":35}}],"line":35},"28":{"loc":{"start":{"line":35,"column":52},"end":{"line":35,"column":74}},"type":"cond-expr","locations":[{"start":{"line":35,"column":60},"end":{"line":35,"column":65}},{"start":{"line":35,"column":68},"end":{"line":35,"column":74}}],"line":35},"29":{"loc":{"start":{"line":46,"column":12},"end":{"line":54,"column":13}},"type":"switch","locations":[{"start":{"line":47,"column":16},"end":{"line":47,"column":93}},{"start":{"line":48,"column":16},"end":{"line":53,"column":48}}],"line":46},"30":{"loc":{"start":{"line":50,"column":20},"end":{"line":52,"column":21}},"type":"if","locations":[{"start":{"line":50,"column":20},"end":{"line":52,"column":21}},{"start":{"line":50,"column":20},"end":{"line":52,"column":21}}],"line":50},"31":{"loc":{"start":{"line":50,"column":24},"end":{"line":50,"column":90}},"type":"binary-expr","locations":[{"start":{"line":50,"column":24},"end":{"line":50,"column":28}},{"start":{"line":50,"column":32},"end":{"line":50,"column":90}}],"line":50},"32":{"loc":{"start":{"line":61,"column":12},"end":{"line":64,"column":13}},"type":"switch","locations":[{"start":{"line":62,"column":16},"end":{"line":62,"column":90}},{"start":{"line":63,"column":16},"end":{"line":63,"column":57}}],"line":61},"33":{"loc":{"start":{"line":72,"column":12},"end":{"line":89,"column":13}},"type":"switch","locations":[{"start":{"line":73,"column":16},"end":{"line":75,"column":80}},{"start":{"line":76,"column":16},"end":{"line":86,"column":94}},{"start":{"line":87,"column":16},"end":{"line":87,"column":57}},{"start":{"line":88,"column":16},"end":{"line":88,"column":46}}],"line":72},"34":{"loc":{"start":{"line":78,"column":20},"end":{"line":78,"column":55}},"type":"if","locations":[{"start":{"line":78,"column":20},"end":{"line":78,"column":55}},{"start":{"line":78,"column":20},"end":{"line":78,"column":55}}],"line":78},"35":{"loc":{"start":{"line":96,"column":12},"end":{"line":99,"column":13}},"type":"switch","locations":[{"start":{"line":97,"column":16},"end":{"line":97,"column":75}},{"start":{"line":98,"column":16},"end":{"line":98,"column":57}}],"line":96}},"s":{"0":1,"1":16,"2":16,"3":15,"4":16,"5":16,"6":0,"7":0,"8":0,"9":0,"10":31,"11":15,"12":1,"13":15,"14":16,"15":0,"16":16,"17":15,"18":0,"19":45,"20":31,"21":31,"22":0,"23":31,"24":62,"25":62,"26":0,"27":62,"28":0,"29":62,"30":31,"31":31,"32":16,"33":16,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":15,"42":15,"43":15,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":31,"60":0,"61":0,"62":62,"63":15,"64":0,"65":15,"66":1,"67":1,"68":1,"69":1,"70":6,"71":6,"72":12,"73":6,"74":6,"75":6,"76":6,"77":0,"78":1,"79":1,"80":2,"81":1,"82":1,"83":1,"84":1,"85":3,"86":1,"87":1,"88":1,"89":1,"90":0,"91":1,"92":1,"93":1,"94":0,"95":7,"96":7,"97":14,"98":7,"99":7,"100":1},"f":{"0":15,"1":16,"2":16,"3":15,"4":16,"5":0,"6":31,"7":15,"8":16,"9":0,"10":45,"11":31,"12":31,"13":6,"14":6,"15":12,"16":1,"17":1,"18":2,"19":1,"20":1,"21":3,"22":7,"23":7,"24":14},"b":{"0":[1,1,1],"1":[0,16],"2":[15,15],"3":[15,16],"4":[15,15],"5":[1,1,1],"6":[0,16],"7":[15,15],"8":[0,31],"9":[0,62],"10":[62,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,62],"16":[31,31,16,0,0,15],"17":[15,0],"18":[15,15,15],"19":[15,0],"20":[0,0],"21":[0,0,0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,15],"28":[15,0],"29":[6,6],"30":[6,0],"31":[6,6],"32":[1,1],"33":[1,1,1,0],"34":[0,1],"35":[7,7]},"inputSourceMap":{"version":3,"file":"/app/app/services/users.ts","sources":["/app/app/services/users.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,+CAAgD;AAEhD,iCAAkC;AAClC,yCAAmC;AAEnC,SAAe,SAAS,CAAC,QAA0B;;;;;wBAC3B,qBAAM,SAAS,CAAC,oBAAoB,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAA;;oBAAlE,IAAI,GAAU,SAAoD;oBACxE,IAAG,IAAI,IAAI,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE;wBACnE,sBAAO,IAAI,EAAA;qBACd;oBACD,sBAAO,IAAI,EAAA;;;;CACd;AACD,SAAe,cAAc,CAAC,QAAgB,EAAE,EAAU;;;;wBAC/C,qBAAM,SAAS,CAAC,mBAAmB,CAAC,EAAE,EAAE,QAAQ,CAAC,EAAA;wBAAxD,sBAAO,SAAiD,EAAA;;;;CAC3D;AACD,SAAe,eAAe,CAAC,KAAa;;;;;;oBAClC,WAAW,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAA;oBAC9C,qBAAM,SAAS,CAAC,oBAAoB,CAAC,KAAK,CAAC,EAAA;;oBAAlD,IAAI,GAAG,SAA2C;yBAEpD,IAAI,EAAJ,wBAAI;oBACJ,gBAAM,CAAC,QAAQ,CAAC;wBACZ,IAAI,EAAE,oDAAoD;wBAC1D,EAAE,EAAE,KAAK;wBACT,OAAO,EAAE,mBAAmB;wBAC5B,IAAI,EAAE,mBAAmB;wBACzB,IAAI,EAAE,iCAA+B,WAAW,WAAQ;qBAC3D,CAAC,CAAA;oBACK,qBAAM,SAAS,CAAC,mBAAmB,CAAC,IAAI,CAAC,EAAE,EAAE,WAAW,CAAC,EAAA;wBAAhE,sBAAO,SAAyD,EAAA;;;;;CAEvE;AAED,SAAe,eAAe,CAAC,IAAqD;;;;wBACzE,qBAAM,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,EAAA;wBAAzC,sBAAO,SAAkC,EAAA;;;;CAC5C;AAED,kBAAe;IACX,eAAe,iBAAA;IACf,SAAS,WAAA;IACT,cAAc,gBAAA;IACd,eAAe,iBAAA;CAClB,CAAA","sourcesContent":["import * as userModel from '../db/queries/users'\nimport {IUser, IUserCredentials} from '../db/queries/interfaces/Iusers'\nimport * as bcrypt from 'bcryptjs'\nimport mailer from '../libs/mailer'\n\nasync function checkUser(userCred: IUserCredentials): Promise<null | IUser> {\n    const user: IUser = await userModel.getSingleUserByEmail(userCred.email)\n    if(user && bcrypt.compareSync(userCred.password, user.local.password)) {\n        return user\n    }\n    return null\n}\nasync function changePassword(password: string, id: string) {\n    return await userModel.updateLocalPassword(id, password)\n}\nasync function sendNewPassword(email: string) {\n    const newPassword = Math.random().toString(36).substring(7)\n    const user = await userModel.getSingleUserByEmail(email)\n\n    if (user) {\n        mailer.sendMail({\n            from: '\"Football for everyone 👻\" <f4econtacts@gmail.com>',\n            to: email,\n            subject: 'Your new password',\n            text: 'Your new password',\n            html: `<div>Your new password is - ${newPassword}</div>`,\n        })\n        return await userModel.updateLocalPassword(user.id, newPassword)\n    }\n}\n\nasync function createLocalUser(user: {name: string, email: string, password: string}): Promise<IUser> {\n    return await userModel.addLocalUser(user)\n}\n\nexport default {\n    createLocalUser,\n    checkUser,\n    changePassword,\n    sendNewPassword\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f80f0cf86b21fac0fb0020b39b70c83714fb4b14","contentHash":"1a3478156e6343a0ea580a7304b14f6b5b435e260e2994e7890feed66ceb80b7"},"/app/app/routes/cities.ts":{"path":"/app/app/routes/cities.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":13},"end":{"line":3,"column":34}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":47}},"3":{"start":{"line":5,"column":13},"end":{"line":5,"column":46}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":59}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":24}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/routes/cities.ts","sources":["/app/app/routes/cities.ts"],"names":[],"mappings":";;AAAA,mCAAoC;AACpC,gDAA0C;AAC1C,IAAM,MAAM,GAAG,IAAI,MAAM,CAAC,EAAC,MAAM,EAAE,SAAS,EAAC,CAAC,CAAC;AAE/C,MAAM,CAAC,GAAG,CAAC,kBAAkB,EAAE,gBAAM,CAAC,SAAS,CAAC,CAAC;AAEjD,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC","sourcesContent":["import * as Router from 'koa-router'\nimport cities from '../controllers/cities'\nconst router = new Router({prefix: '/cities'});\n\nrouter.get('/getByName/:name', cities.getByName);\n\nmodule.exports = router;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5a7ecc8d6f51e7cf13af38f2eb7a8573d848b049","contentHash":"335654f6a043e3d5a735b1843fbd77aaa31206d244a519b0d97512494942e2e4"},"/app/app/controllers/cities.ts":{"path":"/app/app/controllers/cities.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"13":{"start":{"line":12,"column":12},"end":{"line":12,"column":104}},"14":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"15":{"start":{"line":12,"column":57},"end":{"line":12,"column":68}},"16":{"start":{"line":12,"column":69},"end":{"line":12,"column":81}},"17":{"start":{"line":13,"column":4},"end":{"line":13,"column":157}},"18":{"start":{"line":13,"column":138},"end":{"line":13,"column":150}},"19":{"start":{"line":14,"column":23},"end":{"line":14,"column":68}},"20":{"start":{"line":14,"column":45},"end":{"line":14,"column":65}},"21":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"22":{"start":{"line":16,"column":15},"end":{"line":16,"column":70}},"23":{"start":{"line":17,"column":8},"end":{"line":34,"column":66}},"24":{"start":{"line":17,"column":18},"end":{"line":34,"column":66}},"25":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"26":{"start":{"line":18,"column":160},"end":{"line":18,"column":169}},"27":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"28":{"start":{"line":19,"column":26},"end":{"line":19,"column":52}},"29":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"30":{"start":{"line":21,"column":32},"end":{"line":21,"column":39}},"31":{"start":{"line":21,"column":40},"end":{"line":21,"column":46}},"32":{"start":{"line":22,"column":24},"end":{"line":22,"column":34}},"33":{"start":{"line":22,"column":35},"end":{"line":22,"column":72}},"34":{"start":{"line":23,"column":24},"end":{"line":23,"column":34}},"35":{"start":{"line":23,"column":35},"end":{"line":23,"column":45}},"36":{"start":{"line":23,"column":46},"end":{"line":23,"column":55}},"37":{"start":{"line":23,"column":56},"end":{"line":23,"column":65}},"38":{"start":{"line":24,"column":24},"end":{"line":24,"column":41}},"39":{"start":{"line":24,"column":42},"end":{"line":24,"column":55}},"40":{"start":{"line":24,"column":56},"end":{"line":24,"column":65}},"41":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"42":{"start":{"line":26,"column":110},"end":{"line":26,"column":116}},"43":{"start":{"line":26,"column":117},"end":{"line":26,"column":126}},"44":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"45":{"start":{"line":27,"column":81},"end":{"line":27,"column":97}},"46":{"start":{"line":27,"column":98},"end":{"line":27,"column":104}},"47":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"48":{"start":{"line":28,"column":57},"end":{"line":28,"column":72}},"49":{"start":{"line":28,"column":73},"end":{"line":28,"column":80}},"50":{"start":{"line":28,"column":81},"end":{"line":28,"column":87}},"51":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"52":{"start":{"line":29,"column":47},"end":{"line":29,"column":62}},"53":{"start":{"line":29,"column":63},"end":{"line":29,"column":78}},"54":{"start":{"line":29,"column":79},"end":{"line":29,"column":85}},"55":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"56":{"start":{"line":30,"column":30},"end":{"line":30,"column":42}},"57":{"start":{"line":31,"column":20},"end":{"line":31,"column":33}},"58":{"start":{"line":31,"column":34},"end":{"line":31,"column":43}},"59":{"start":{"line":33,"column":12},"end":{"line":33,"column":39}},"60":{"start":{"line":34,"column":22},"end":{"line":34,"column":34}},"61":{"start":{"line":34,"column":35},"end":{"line":34,"column":41}},"62":{"start":{"line":34,"column":54},"end":{"line":34,"column":64}},"63":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"64":{"start":{"line":35,"column":23},"end":{"line":35,"column":35}},"65":{"start":{"line":35,"column":36},"end":{"line":35,"column":89}},"66":{"start":{"line":38,"column":0},"end":{"line":38,"column":62}},"67":{"start":{"line":39,"column":15},"end":{"line":39,"column":46}},"68":{"start":{"line":40,"column":0},"end":{"line":57,"column":2}},"69":{"start":{"line":42,"column":8},"end":{"line":55,"column":11}},"70":{"start":{"line":44,"column":12},"end":{"line":54,"column":15}},"71":{"start":{"line":45,"column":16},"end":{"line":53,"column":17}},"72":{"start":{"line":47,"column":24},"end":{"line":47,"column":47}},"73":{"start":{"line":48,"column":24},"end":{"line":48,"column":33}},"74":{"start":{"line":49,"column":24},"end":{"line":49,"column":71}},"75":{"start":{"line":51,"column":24},"end":{"line":51,"column":44}},"76":{"start":{"line":52,"column":24},"end":{"line":52,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":48},"end":{"line":11,"column":49}},"loc":{"start":{"line":11,"column":73},"end":{"line":37,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":12,"column":30},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":41},"end":{"line":12,"column":83}},"line":12},"9":{"name":"(anonymous_9)","decl":{"start":{"line":13,"column":125},"end":{"line":13,"column":126}},"loc":{"start":{"line":13,"column":136},"end":{"line":13,"column":152}},"line":13},"10":{"name":"verb","decl":{"start":{"line":14,"column":13},"end":{"line":14,"column":17}},"loc":{"start":{"line":14,"column":21},"end":{"line":14,"column":70}},"line":14},"11":{"name":"(anonymous_11)","decl":{"start":{"line":14,"column":30},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":43},"end":{"line":14,"column":67}},"line":14},"12":{"name":"step","decl":{"start":{"line":15,"column":13},"end":{"line":15,"column":17}},"loc":{"start":{"line":15,"column":22},"end":{"line":36,"column":5}},"line":15},"13":{"name":"(anonymous_13)","decl":{"start":{"line":41,"column":15},"end":{"line":41,"column":16}},"loc":{"start":{"line":41,"column":30},"end":{"line":56,"column":5}},"line":41},"14":{"name":"(anonymous_14)","decl":{"start":{"line":42,"column":47},"end":{"line":42,"column":48}},"loc":{"start":{"line":42,"column":59},"end":{"line":55,"column":9}},"line":42},"15":{"name":"(anonymous_15)","decl":{"start":{"line":44,"column":37},"end":{"line":44,"column":38}},"loc":{"start":{"line":44,"column":51},"end":{"line":54,"column":13}},"line":44}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":19},"end":{"line":11,"column":23}},{"start":{"line":11,"column":27},"end":{"line":11,"column":43}},{"start":{"line":11,"column":48},"end":{"line":37,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"type":"if","locations":[{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},{"start":{"line":12,"column":43},"end":{"line":12,"column":68}}],"line":12},"7":{"loc":{"start":{"line":13,"column":71},"end":{"line":13,"column":153}},"type":"binary-expr","locations":[{"start":{"line":13,"column":71},"end":{"line":13,"column":99}},{"start":{"line":13,"column":104},"end":{"line":13,"column":152}}],"line":13},"8":{"loc":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"type":"if","locations":[{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},{"start":{"line":16,"column":8},"end":{"line":16,"column":70}}],"line":16},"9":{"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"type":"if","locations":[{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},{"start":{"line":18,"column":12},"end":{"line":18,"column":169}}],"line":18},"10":{"loc":{"start":{"line":18,"column":23},"end":{"line":18,"column":158}},"type":"binary-expr","locations":[{"start":{"line":18,"column":23},"end":{"line":18,"column":24}},{"start":{"line":18,"column":29},"end":{"line":18,"column":125}},{"start":{"line":18,"column":130},"end":{"line":18,"column":158}}],"line":18},"11":{"loc":{"start":{"line":18,"column":33},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":45},"end":{"line":18,"column":56}},{"start":{"line":18,"column":59},"end":{"line":18,"column":125}}],"line":18},"12":{"loc":{"start":{"line":18,"column":59},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},{"start":{"line":18,"column":119},"end":{"line":18,"column":125}}],"line":18},"13":{"loc":{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},"type":"binary-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":77}},{"start":{"line":18,"column":82},"end":{"line":18,"column":115}}],"line":18},"14":{"loc":{"start":{"line":18,"column":82},"end":{"line":18,"column":112}},"type":"binary-expr","locations":[{"start":{"line":18,"column":83},"end":{"line":18,"column":98}},{"start":{"line":18,"column":103},"end":{"line":18,"column":112}}],"line":18},"15":{"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"type":"if","locations":[{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},{"start":{"line":19,"column":12},"end":{"line":19,"column":52}}],"line":19},"16":{"loc":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"type":"switch","locations":[{"start":{"line":21,"column":16},"end":{"line":21,"column":23}},{"start":{"line":21,"column":24},"end":{"line":21,"column":46}},{"start":{"line":22,"column":16},"end":{"line":22,"column":72}},{"start":{"line":23,"column":16},"end":{"line":23,"column":65}},{"start":{"line":24,"column":16},"end":{"line":24,"column":65}},{"start":{"line":25,"column":16},"end":{"line":31,"column":43}}],"line":20},"17":{"loc":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"type":"if","locations":[{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},{"start":{"line":26,"column":20},"end":{"line":26,"column":128}}],"line":26},"18":{"loc":{"start":{"line":26,"column":24},"end":{"line":26,"column":106}},"type":"binary-expr","locations":[{"start":{"line":26,"column":24},"end":{"line":26,"column":74}},{"start":{"line":26,"column":79},"end":{"line":26,"column":90}},{"start":{"line":26,"column":94},"end":{"line":26,"column":105}}],"line":26},"19":{"loc":{"start":{"line":26,"column":42},"end":{"line":26,"column":73}},"type":"binary-expr","locations":[{"start":{"line":26,"column":42},"end":{"line":26,"column":54}},{"start":{"line":26,"column":58},"end":{"line":26,"column":73}}],"line":26},"20":{"loc":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"type":"if","locations":[{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},{"start":{"line":27,"column":20},"end":{"line":27,"column":106}}],"line":27},"21":{"loc":{"start":{"line":27,"column":24},"end":{"line":27,"column":77}},"type":"binary-expr","locations":[{"start":{"line":27,"column":24},"end":{"line":27,"column":35}},{"start":{"line":27,"column":40},"end":{"line":27,"column":42}},{"start":{"line":27,"column":47},"end":{"line":27,"column":59}},{"start":{"line":27,"column":63},"end":{"line":27,"column":75}}],"line":27},"22":{"loc":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"type":"if","locations":[{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},{"start":{"line":28,"column":20},"end":{"line":28,"column":89}}],"line":28},"23":{"loc":{"start":{"line":28,"column":24},"end":{"line":28,"column":53}},"type":"binary-expr","locations":[{"start":{"line":28,"column":24},"end":{"line":28,"column":35}},{"start":{"line":28,"column":39},"end":{"line":28,"column":53}}],"line":28},"24":{"loc":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"type":"if","locations":[{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},{"start":{"line":29,"column":20},"end":{"line":29,"column":87}}],"line":29},"25":{"loc":{"start":{"line":29,"column":24},"end":{"line":29,"column":43}},"type":"binary-expr","locations":[{"start":{"line":29,"column":24},"end":{"line":29,"column":25}},{"start":{"line":29,"column":29},"end":{"line":29,"column":43}}],"line":29},"26":{"loc":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"type":"if","locations":[{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},{"start":{"line":30,"column":20},"end":{"line":30,"column":42}}],"line":30},"27":{"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},{"start":{"line":35,"column":8},"end":{"line":35,"column":35}}],"line":35},"28":{"loc":{"start":{"line":35,"column":52},"end":{"line":35,"column":74}},"type":"cond-expr","locations":[{"start":{"line":35,"column":60},"end":{"line":35,"column":65}},{"start":{"line":35,"column":68},"end":{"line":35,"column":74}}],"line":35},"29":{"loc":{"start":{"line":45,"column":16},"end":{"line":53,"column":17}},"type":"switch","locations":[{"start":{"line":46,"column":20},"end":{"line":49,"column":71}},{"start":{"line":50,"column":20},"end":{"line":52,"column":46}}],"line":45}},"s":{"0":1,"1":1,"2":0,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":2,"11":1,"12":1,"13":1,"14":1,"15":0,"16":1,"17":1,"18":0,"19":3,"20":2,"21":2,"22":0,"23":2,"24":4,"25":4,"26":0,"27":4,"28":0,"29":4,"30":2,"31":2,"32":1,"33":1,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":1,"42":1,"43":1,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":2,"60":0,"61":0,"62":4,"63":1,"64":0,"65":1,"66":1,"67":1,"68":1,"69":1,"70":1,"71":2,"72":1,"73":1,"74":1,"75":1,"76":1},"f":{"0":1,"1":1,"2":0,"3":1,"4":1,"5":0,"6":2,"7":1,"8":1,"9":0,"10":3,"11":2,"12":2,"13":1,"14":1,"15":2},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[1,1],"4":[1,1],"5":[1,1,1],"6":[0,1],"7":[1,1],"8":[0,2],"9":[0,4],"10":[4,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,4],"16":[2,2,1,0,0,1],"17":[1,0],"18":[1,1,1],"19":[1,0],"20":[0,0],"21":[0,0,0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,1],"28":[1,0],"29":[1,1]},"inputSourceMap":{"version":3,"file":"/app/app/controllers/cities.ts","sources":["/app/app/controllers/cities.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,+CAAgD;AAChD,kBAAe;IACP,SAAS,YAAC,GAAG;;;;;;wBACV,IAAI,GAAI,GAAG,CAAC,MAAM,KAAd,CAAe;wBAC1B,KAAA,GAAG,CAAA;wBAAQ,qBAAM,kBAAS,CAAC,IAAI,CAAC,EAAA;;wBAAhC,GAAI,IAAI,GAAG,SAAqB,CAAC;;;;;KAClC;CACF,CAAC","sourcesContent":["import { getByName } from '../db/queries/cities'\nexport default {\n  async getByName(ctx) {\n    const {name} = ctx.params;\n    ctx.body = await getByName(name);\n  },\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"526d42539a556d7b8e772835eb4aa380d735f213","contentHash":"6205950b38276c30a6310779e215bc6e78362de237c9d4d01c9782b404d654bc"},"/app/app/db/queries/cities.ts":{"path":"/app/app/db/queries/cities.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"13":{"start":{"line":12,"column":12},"end":{"line":12,"column":104}},"14":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"15":{"start":{"line":12,"column":57},"end":{"line":12,"column":68}},"16":{"start":{"line":12,"column":69},"end":{"line":12,"column":81}},"17":{"start":{"line":13,"column":4},"end":{"line":13,"column":157}},"18":{"start":{"line":13,"column":138},"end":{"line":13,"column":150}},"19":{"start":{"line":14,"column":23},"end":{"line":14,"column":68}},"20":{"start":{"line":14,"column":45},"end":{"line":14,"column":65}},"21":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"22":{"start":{"line":16,"column":15},"end":{"line":16,"column":70}},"23":{"start":{"line":17,"column":8},"end":{"line":34,"column":66}},"24":{"start":{"line":17,"column":18},"end":{"line":34,"column":66}},"25":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"26":{"start":{"line":18,"column":160},"end":{"line":18,"column":169}},"27":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"28":{"start":{"line":19,"column":26},"end":{"line":19,"column":52}},"29":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"30":{"start":{"line":21,"column":32},"end":{"line":21,"column":39}},"31":{"start":{"line":21,"column":40},"end":{"line":21,"column":46}},"32":{"start":{"line":22,"column":24},"end":{"line":22,"column":34}},"33":{"start":{"line":22,"column":35},"end":{"line":22,"column":72}},"34":{"start":{"line":23,"column":24},"end":{"line":23,"column":34}},"35":{"start":{"line":23,"column":35},"end":{"line":23,"column":45}},"36":{"start":{"line":23,"column":46},"end":{"line":23,"column":55}},"37":{"start":{"line":23,"column":56},"end":{"line":23,"column":65}},"38":{"start":{"line":24,"column":24},"end":{"line":24,"column":41}},"39":{"start":{"line":24,"column":42},"end":{"line":24,"column":55}},"40":{"start":{"line":24,"column":56},"end":{"line":24,"column":65}},"41":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"42":{"start":{"line":26,"column":110},"end":{"line":26,"column":116}},"43":{"start":{"line":26,"column":117},"end":{"line":26,"column":126}},"44":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"45":{"start":{"line":27,"column":81},"end":{"line":27,"column":97}},"46":{"start":{"line":27,"column":98},"end":{"line":27,"column":104}},"47":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"48":{"start":{"line":28,"column":57},"end":{"line":28,"column":72}},"49":{"start":{"line":28,"column":73},"end":{"line":28,"column":80}},"50":{"start":{"line":28,"column":81},"end":{"line":28,"column":87}},"51":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"52":{"start":{"line":29,"column":47},"end":{"line":29,"column":62}},"53":{"start":{"line":29,"column":63},"end":{"line":29,"column":78}},"54":{"start":{"line":29,"column":79},"end":{"line":29,"column":85}},"55":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"56":{"start":{"line":30,"column":30},"end":{"line":30,"column":42}},"57":{"start":{"line":31,"column":20},"end":{"line":31,"column":33}},"58":{"start":{"line":31,"column":34},"end":{"line":31,"column":43}},"59":{"start":{"line":33,"column":12},"end":{"line":33,"column":39}},"60":{"start":{"line":34,"column":22},"end":{"line":34,"column":34}},"61":{"start":{"line":34,"column":35},"end":{"line":34,"column":41}},"62":{"start":{"line":34,"column":54},"end":{"line":34,"column":64}},"63":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"64":{"start":{"line":35,"column":23},"end":{"line":35,"column":35}},"65":{"start":{"line":35,"column":36},"end":{"line":35,"column":89}},"66":{"start":{"line":38,"column":0},"end":{"line":38,"column":62}},"67":{"start":{"line":39,"column":13},"end":{"line":39,"column":39}},"68":{"start":{"line":40,"column":15},"end":{"line":40,"column":32}},"69":{"start":{"line":42,"column":4},"end":{"line":57,"column":7}},"70":{"start":{"line":44,"column":8},"end":{"line":56,"column":11}},"71":{"start":{"line":45,"column":12},"end":{"line":55,"column":13}},"72":{"start":{"line":47,"column":20},"end":{"line":47,"column":64}},"73":{"start":{"line":48,"column":20},"end":{"line":51,"column":28}},"74":{"start":{"line":53,"column":20},"end":{"line":53,"column":39}},"75":{"start":{"line":54,"column":20},"end":{"line":54,"column":55}},"76":{"start":{"line":59,"column":0},"end":{"line":59,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":48},"end":{"line":11,"column":49}},"loc":{"start":{"line":11,"column":73},"end":{"line":37,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":12,"column":30},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":41},"end":{"line":12,"column":83}},"line":12},"9":{"name":"(anonymous_9)","decl":{"start":{"line":13,"column":125},"end":{"line":13,"column":126}},"loc":{"start":{"line":13,"column":136},"end":{"line":13,"column":152}},"line":13},"10":{"name":"verb","decl":{"start":{"line":14,"column":13},"end":{"line":14,"column":17}},"loc":{"start":{"line":14,"column":21},"end":{"line":14,"column":70}},"line":14},"11":{"name":"(anonymous_11)","decl":{"start":{"line":14,"column":30},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":43},"end":{"line":14,"column":67}},"line":14},"12":{"name":"step","decl":{"start":{"line":15,"column":13},"end":{"line":15,"column":17}},"loc":{"start":{"line":15,"column":22},"end":{"line":36,"column":5}},"line":15},"13":{"name":"getByName","decl":{"start":{"line":41,"column":9},"end":{"line":41,"column":18}},"loc":{"start":{"line":41,"column":25},"end":{"line":58,"column":1}},"line":41},"14":{"name":"(anonymous_14)","decl":{"start":{"line":42,"column":43},"end":{"line":42,"column":44}},"loc":{"start":{"line":42,"column":55},"end":{"line":57,"column":5}},"line":42},"15":{"name":"(anonymous_15)","decl":{"start":{"line":44,"column":33},"end":{"line":44,"column":34}},"loc":{"start":{"line":44,"column":47},"end":{"line":56,"column":9}},"line":44}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":19},"end":{"line":11,"column":23}},{"start":{"line":11,"column":27},"end":{"line":11,"column":43}},{"start":{"line":11,"column":48},"end":{"line":37,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"type":"if","locations":[{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},{"start":{"line":12,"column":43},"end":{"line":12,"column":68}}],"line":12},"7":{"loc":{"start":{"line":13,"column":71},"end":{"line":13,"column":153}},"type":"binary-expr","locations":[{"start":{"line":13,"column":71},"end":{"line":13,"column":99}},{"start":{"line":13,"column":104},"end":{"line":13,"column":152}}],"line":13},"8":{"loc":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"type":"if","locations":[{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},{"start":{"line":16,"column":8},"end":{"line":16,"column":70}}],"line":16},"9":{"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"type":"if","locations":[{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},{"start":{"line":18,"column":12},"end":{"line":18,"column":169}}],"line":18},"10":{"loc":{"start":{"line":18,"column":23},"end":{"line":18,"column":158}},"type":"binary-expr","locations":[{"start":{"line":18,"column":23},"end":{"line":18,"column":24}},{"start":{"line":18,"column":29},"end":{"line":18,"column":125}},{"start":{"line":18,"column":130},"end":{"line":18,"column":158}}],"line":18},"11":{"loc":{"start":{"line":18,"column":33},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":45},"end":{"line":18,"column":56}},{"start":{"line":18,"column":59},"end":{"line":18,"column":125}}],"line":18},"12":{"loc":{"start":{"line":18,"column":59},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},{"start":{"line":18,"column":119},"end":{"line":18,"column":125}}],"line":18},"13":{"loc":{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},"type":"binary-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":77}},{"start":{"line":18,"column":82},"end":{"line":18,"column":115}}],"line":18},"14":{"loc":{"start":{"line":18,"column":82},"end":{"line":18,"column":112}},"type":"binary-expr","locations":[{"start":{"line":18,"column":83},"end":{"line":18,"column":98}},{"start":{"line":18,"column":103},"end":{"line":18,"column":112}}],"line":18},"15":{"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"type":"if","locations":[{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},{"start":{"line":19,"column":12},"end":{"line":19,"column":52}}],"line":19},"16":{"loc":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"type":"switch","locations":[{"start":{"line":21,"column":16},"end":{"line":21,"column":23}},{"start":{"line":21,"column":24},"end":{"line":21,"column":46}},{"start":{"line":22,"column":16},"end":{"line":22,"column":72}},{"start":{"line":23,"column":16},"end":{"line":23,"column":65}},{"start":{"line":24,"column":16},"end":{"line":24,"column":65}},{"start":{"line":25,"column":16},"end":{"line":31,"column":43}}],"line":20},"17":{"loc":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"type":"if","locations":[{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},{"start":{"line":26,"column":20},"end":{"line":26,"column":128}}],"line":26},"18":{"loc":{"start":{"line":26,"column":24},"end":{"line":26,"column":106}},"type":"binary-expr","locations":[{"start":{"line":26,"column":24},"end":{"line":26,"column":74}},{"start":{"line":26,"column":79},"end":{"line":26,"column":90}},{"start":{"line":26,"column":94},"end":{"line":26,"column":105}}],"line":26},"19":{"loc":{"start":{"line":26,"column":42},"end":{"line":26,"column":73}},"type":"binary-expr","locations":[{"start":{"line":26,"column":42},"end":{"line":26,"column":54}},{"start":{"line":26,"column":58},"end":{"line":26,"column":73}}],"line":26},"20":{"loc":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"type":"if","locations":[{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},{"start":{"line":27,"column":20},"end":{"line":27,"column":106}}],"line":27},"21":{"loc":{"start":{"line":27,"column":24},"end":{"line":27,"column":77}},"type":"binary-expr","locations":[{"start":{"line":27,"column":24},"end":{"line":27,"column":35}},{"start":{"line":27,"column":40},"end":{"line":27,"column":42}},{"start":{"line":27,"column":47},"end":{"line":27,"column":59}},{"start":{"line":27,"column":63},"end":{"line":27,"column":75}}],"line":27},"22":{"loc":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"type":"if","locations":[{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},{"start":{"line":28,"column":20},"end":{"line":28,"column":89}}],"line":28},"23":{"loc":{"start":{"line":28,"column":24},"end":{"line":28,"column":53}},"type":"binary-expr","locations":[{"start":{"line":28,"column":24},"end":{"line":28,"column":35}},{"start":{"line":28,"column":39},"end":{"line":28,"column":53}}],"line":28},"24":{"loc":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"type":"if","locations":[{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},{"start":{"line":29,"column":20},"end":{"line":29,"column":87}}],"line":29},"25":{"loc":{"start":{"line":29,"column":24},"end":{"line":29,"column":43}},"type":"binary-expr","locations":[{"start":{"line":29,"column":24},"end":{"line":29,"column":25}},{"start":{"line":29,"column":29},"end":{"line":29,"column":43}}],"line":29},"26":{"loc":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"type":"if","locations":[{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},{"start":{"line":30,"column":20},"end":{"line":30,"column":42}}],"line":30},"27":{"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},{"start":{"line":35,"column":8},"end":{"line":35,"column":35}}],"line":35},"28":{"loc":{"start":{"line":35,"column":52},"end":{"line":35,"column":74}},"type":"cond-expr","locations":[{"start":{"line":35,"column":60},"end":{"line":35,"column":65}},{"start":{"line":35,"column":68},"end":{"line":35,"column":74}}],"line":35},"29":{"loc":{"start":{"line":45,"column":12},"end":{"line":55,"column":13}},"type":"switch","locations":[{"start":{"line":46,"column":16},"end":{"line":51,"column":28}},{"start":{"line":52,"column":16},"end":{"line":54,"column":55}}],"line":45}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":2,"11":1,"12":1,"13":1,"14":1,"15":0,"16":1,"17":1,"18":0,"19":3,"20":2,"21":2,"22":0,"23":2,"24":4,"25":4,"26":0,"27":4,"28":0,"29":4,"30":2,"31":2,"32":1,"33":1,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":1,"42":1,"43":1,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":2,"60":0,"61":0,"62":4,"63":1,"64":0,"65":1,"66":1,"67":1,"68":1,"69":1,"70":1,"71":2,"72":1,"73":1,"74":1,"75":1,"76":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":2,"7":1,"8":1,"9":0,"10":3,"11":2,"12":2,"13":1,"14":1,"15":2},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[1,1],"4":[1,1],"5":[1,1,1],"6":[0,1],"7":[1,1],"8":[0,2],"9":[0,4],"10":[4,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,4],"16":[2,2,1,0,0,1],"17":[1,0],"18":[1,1,1],"19":[1,0],"20":[0,0],"21":[0,0,0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,1],"28":[1,0],"29":[1,1]},"inputSourceMap":{"version":3,"file":"/app/app/db/queries/cities.ts","sources":["/app/app/db/queries/cities.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,wCAAkC;AAClC,iCAA0B;AAG1B,SAAe,SAAS,CAAC,IAAY;;;;;;oBAC3B,aAAa,GAAW,UAAC,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;oBAE7C,qBAAM,cAAI,CAAC,GAAG,CACV,6xBAiBH,EACG;4BACI,QAAQ,EAAK,aAAa,MAAG;4BAC7B,IAAI,EAAE,aAAa;yBACtB,CAAC,EAAA;;oBAvBJ,MAAM,GACR,SAsBM;oBACV,sBAAO,MAAM,CAAC,IAAI,EAAC;;;;CACtB;AAGG,8BAAS","sourcesContent":["import knex from '../../libs/knex'\nimport { _ } from 'lodash'\nimport {ICity} from './interfaces/Icities';\n\nasync function getByName(name: string): Promise<ICity[]> {\n    const uppercaseCity: string = _.upperFirst(name);\n    const cities =\n        await knex.raw(\n            `\n            SELECT city.title_ru  as name,\n                   city.city_id as id,\n                   city.region_ru as region,\n                   c.title_ru     as country,\n                   case\n                     when city.title_ru = :city and city.region_ru IS NULL then 2\n                     when city.title_ru = :city then 1\n                     when city.region_ru IS NULL then 1\n                     else 0\n                   end  as priority\n            FROM (select * from _cities c where c.country_id < 20) as city\n                   JOIN _countries as c on c.country_id = city.country_id\n            WHERE\n                  city.title_ru LIKE :cityLike\n               OR city.title_ua LIKE :cityLike\n            ORDER BY priority DESC, c.country_id ASC;\n        `,\n            {\n                cityLike: `${uppercaseCity}%`,\n                city: uppercaseCity\n            });\n    return cities.rows;\n}\n\nexport {\n    getByName,\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fc83447d181c429e7f887e0e5c2ad0b54b46e788","contentHash":"dc7de6cca8ed64a3808450907438fc09eebf0ed82facd7fa522da19cdaa9c9fc"},"/app/app/routes/game.ts":{"path":"/app/app/routes/game.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":13},"end":{"line":3,"column":34}},"2":{"start":{"line":4,"column":13},"end":{"line":4,"column":43}},"3":{"start":{"line":5,"column":13},"end":{"line":5,"column":44}},"4":{"start":{"line":6,"column":17},"end":{"line":6,"column":44}},"5":{"start":{"line":7,"column":25},"end":{"line":7,"column":100}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":57}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":62}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":39}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":45}},"10":{"start":{"line":12,"column":0},"end":{"line":12,"column":72}},"11":{"start":{"line":13,"column":0},"end":{"line":13,"column":67}},"12":{"start":{"line":14,"column":0},"end":{"line":14,"column":24}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/routes/game.ts","sources":["/app/app/routes/game.ts"],"names":[],"mappings":";;AAAA,mCAAoC;AACpC,4CAAsC;AAEtC,IAAM,MAAM,GAAG,IAAI,MAAM,CAAC,EAAC,MAAM,EAAE,OAAO,EAAC,CAAC,CAAC;AAC7C,6CAAuC;AACvC,IAAM,kBAAkB,GAAG,kBAAQ,CAAC,YAAY,CAAC,CAAC,KAAK,EAAE,aAAa,CAAC,EAAE,EAAC,OAAO,EAAE,KAAK,EAAC,CAAC,CAAA;AAE1F,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,kBAAkB,EAAE,cAAI,CAAC,GAAG,CAAC,CAAC;AAC/C,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,kBAAkB,EAAE,cAAI,CAAC,IAAI,CAAC,CAAC;AACpD,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,cAAI,CAAC,GAAG,CAAC,CAAC;AAC7B,MAAM,CAAC,GAAG,CAAC,WAAW,EAAE,cAAI,CAAC,IAAI,CAAC,CAAC;AAEnC,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,kBAAkB,EAAE,cAAI,CAAC,cAAc,CAAC,CAAC;AAC9D,MAAM,CAAC,GAAG,CAAC,uBAAuB,EAAE,cAAI,CAAC,cAAc,CAAC,CAAC;AAEzD,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC","sourcesContent":["import * as Router from 'koa-router'\nimport game from '../controllers/game'\nimport authMiddleware from '../middleware/auth'\nconst router = new Router({prefix: '/game'});\nimport passport from '../libs/passport'\nconst passportMiddleware = passport.authenticate(['jwt', 'jwt-refresh'], {session: false})\n\nrouter.post('/', passportMiddleware, game.add);\nrouter.post('/join', passportMiddleware, game.join);\nrouter.get('/:id', game.get);\nrouter.get('/city/:id', game.list);\n\nrouter.post('/chat', passportMiddleware, game.addChatMessage);\nrouter.get('/chat/history/:gameId', game.getChatHistory);\n\nmodule.exports = router;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4ad83f9abddd96661911f98bb4512bb5bc30f448","contentHash":"7587a7d06cf57375922b7976c29b0b81ad8cf50aa3ee196e2af598c58c01cc6e"},"/app/app/controllers/game.ts":{"path":"/app/app/controllers/game.ts","statementMap":{"0":{"start":{"line":2,"column":15},"end":{"line":12,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":10,"column":6}},"2":{"start":{"line":4,"column":8},"end":{"line":8,"column":9}},"3":{"start":{"line":4,"column":24},"end":{"line":4,"column":25}},"4":{"start":{"line":4,"column":31},"end":{"line":4,"column":47}},"5":{"start":{"line":5,"column":12},"end":{"line":5,"column":29}},"6":{"start":{"line":6,"column":12},"end":{"line":7,"column":28}},"7":{"start":{"line":6,"column":29},"end":{"line":7,"column":28}},"8":{"start":{"line":7,"column":16},"end":{"line":7,"column":28}},"9":{"start":{"line":9,"column":8},"end":{"line":9,"column":17}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":43}},"11":{"start":{"line":13,"column":16},"end":{"line":21,"column":1}},"12":{"start":{"line":14,"column":28},"end":{"line":14,"column":110}},"13":{"start":{"line":14,"column":91},"end":{"line":14,"column":106}},"14":{"start":{"line":15,"column":4},"end":{"line":20,"column":7}},"15":{"start":{"line":16,"column":36},"end":{"line":16,"column":97}},"16":{"start":{"line":16,"column":42},"end":{"line":16,"column":70}},"17":{"start":{"line":16,"column":85},"end":{"line":16,"column":95}},"18":{"start":{"line":17,"column":35},"end":{"line":17,"column":100}},"19":{"start":{"line":17,"column":41},"end":{"line":17,"column":73}},"20":{"start":{"line":17,"column":88},"end":{"line":17,"column":98}},"21":{"start":{"line":18,"column":32},"end":{"line":18,"column":116}},"22":{"start":{"line":19,"column":8},"end":{"line":19,"column":78}},"23":{"start":{"line":22,"column":18},"end":{"line":48,"column":1}},"24":{"start":{"line":23,"column":12},"end":{"line":23,"column":104}},"25":{"start":{"line":23,"column":43},"end":{"line":23,"column":68}},"26":{"start":{"line":23,"column":57},"end":{"line":23,"column":68}},"27":{"start":{"line":23,"column":69},"end":{"line":23,"column":81}},"28":{"start":{"line":24,"column":4},"end":{"line":24,"column":157}},"29":{"start":{"line":24,"column":138},"end":{"line":24,"column":150}},"30":{"start":{"line":25,"column":23},"end":{"line":25,"column":68}},"31":{"start":{"line":25,"column":45},"end":{"line":25,"column":65}},"32":{"start":{"line":27,"column":8},"end":{"line":27,"column":70}},"33":{"start":{"line":27,"column":15},"end":{"line":27,"column":70}},"34":{"start":{"line":28,"column":8},"end":{"line":45,"column":66}},"35":{"start":{"line":28,"column":18},"end":{"line":45,"column":66}},"36":{"start":{"line":29,"column":12},"end":{"line":29,"column":169}},"37":{"start":{"line":29,"column":160},"end":{"line":29,"column":169}},"38":{"start":{"line":30,"column":12},"end":{"line":30,"column":52}},"39":{"start":{"line":30,"column":26},"end":{"line":30,"column":52}},"40":{"start":{"line":31,"column":12},"end":{"line":43,"column":13}},"41":{"start":{"line":32,"column":32},"end":{"line":32,"column":39}},"42":{"start":{"line":32,"column":40},"end":{"line":32,"column":46}},"43":{"start":{"line":33,"column":24},"end":{"line":33,"column":34}},"44":{"start":{"line":33,"column":35},"end":{"line":33,"column":72}},"45":{"start":{"line":34,"column":24},"end":{"line":34,"column":34}},"46":{"start":{"line":34,"column":35},"end":{"line":34,"column":45}},"47":{"start":{"line":34,"column":46},"end":{"line":34,"column":55}},"48":{"start":{"line":34,"column":56},"end":{"line":34,"column":65}},"49":{"start":{"line":35,"column":24},"end":{"line":35,"column":41}},"50":{"start":{"line":35,"column":42},"end":{"line":35,"column":55}},"51":{"start":{"line":35,"column":56},"end":{"line":35,"column":65}},"52":{"start":{"line":37,"column":20},"end":{"line":37,"column":128}},"53":{"start":{"line":37,"column":110},"end":{"line":37,"column":116}},"54":{"start":{"line":37,"column":117},"end":{"line":37,"column":126}},"55":{"start":{"line":38,"column":20},"end":{"line":38,"column":106}},"56":{"start":{"line":38,"column":81},"end":{"line":38,"column":97}},"57":{"start":{"line":38,"column":98},"end":{"line":38,"column":104}},"58":{"start":{"line":39,"column":20},"end":{"line":39,"column":89}},"59":{"start":{"line":39,"column":57},"end":{"line":39,"column":72}},"60":{"start":{"line":39,"column":73},"end":{"line":39,"column":80}},"61":{"start":{"line":39,"column":81},"end":{"line":39,"column":87}},"62":{"start":{"line":40,"column":20},"end":{"line":40,"column":87}},"63":{"start":{"line":40,"column":47},"end":{"line":40,"column":62}},"64":{"start":{"line":40,"column":63},"end":{"line":40,"column":78}},"65":{"start":{"line":40,"column":79},"end":{"line":40,"column":85}},"66":{"start":{"line":41,"column":20},"end":{"line":41,"column":42}},"67":{"start":{"line":41,"column":30},"end":{"line":41,"column":42}},"68":{"start":{"line":42,"column":20},"end":{"line":42,"column":33}},"69":{"start":{"line":42,"column":34},"end":{"line":42,"column":43}},"70":{"start":{"line":44,"column":12},"end":{"line":44,"column":39}},"71":{"start":{"line":45,"column":22},"end":{"line":45,"column":34}},"72":{"start":{"line":45,"column":35},"end":{"line":45,"column":41}},"73":{"start":{"line":45,"column":54},"end":{"line":45,"column":64}},"74":{"start":{"line":46,"column":8},"end":{"line":46,"column":35}},"75":{"start":{"line":46,"column":23},"end":{"line":46,"column":35}},"76":{"start":{"line":46,"column":36},"end":{"line":46,"column":89}},"77":{"start":{"line":49,"column":0},"end":{"line":49,"column":62}},"78":{"start":{"line":50,"column":14},"end":{"line":50,"column":44}},"79":{"start":{"line":51,"column":15},"end":{"line":51,"column":32}},"80":{"start":{"line":52,"column":17},"end":{"line":52,"column":50}},"81":{"start":{"line":53,"column":15},"end":{"line":53,"column":35}},"82":{"start":{"line":54,"column":0},"end":{"line":191,"column":2}},"83":{"start":{"line":56,"column":8},"end":{"line":84,"column":11}},"84":{"start":{"line":58,"column":16},"end":{"line":69,"column":20}},"85":{"start":{"line":68,"column":20},"end":{"line":68,"column":43}},"86":{"start":{"line":72,"column":12},"end":{"line":83,"column":15}},"87":{"start":{"line":73,"column":16},"end":{"line":82,"column":17}},"88":{"start":{"line":75,"column":24},"end":{"line":75,"column":57}},"89":{"start":{"line":76,"column":24},"end":{"line":76,"column":118}},"90":{"start":{"line":78,"column":24},"end":{"line":78,"column":39}},"91":{"start":{"line":79,"column":24},"end":{"line":79,"column":61}},"92":{"start":{"line":80,"column":24},"end":{"line":80,"column":41}},"93":{"start":{"line":81,"column":24},"end":{"line":81,"column":46}},"94":{"start":{"line":87,"column":8},"end":{"line":104,"column":11}},"95":{"start":{"line":89,"column":12},"end":{"line":103,"column":15}},"96":{"start":{"line":90,"column":16},"end":{"line":102,"column":17}},"97":{"start":{"line":92,"column":24},"end":{"line":92,"column":43}},"98":{"start":{"line":93,"column":24},"end":{"line":93,"column":33}},"99":{"start":{"line":94,"column":24},"end":{"line":94,"column":70}},"100":{"start":{"line":96,"column":24},"end":{"line":96,"column":44}},"101":{"start":{"line":97,"column":24},"end":{"line":97,"column":38}},"102":{"start":{"line":98,"column":24},"end":{"line":98,"column":79}},"103":{"start":{"line":100,"column":24},"end":{"line":100,"column":58}},"104":{"start":{"line":101,"column":24},"end":{"line":101,"column":46}},"105":{"start":{"line":107,"column":8},"end":{"line":120,"column":11}},"106":{"start":{"line":109,"column":12},"end":{"line":119,"column":15}},"107":{"start":{"line":110,"column":16},"end":{"line":118,"column":17}},"108":{"start":{"line":112,"column":24},"end":{"line":112,"column":43}},"109":{"start":{"line":113,"column":24},"end":{"line":113,"column":79}},"110":{"start":{"line":115,"column":24},"end":{"line":115,"column":48}},"111":{"start":{"line":116,"column":24},"end":{"line":116,"column":40}},"112":{"start":{"line":117,"column":24},"end":{"line":117,"column":46}},"113":{"start":{"line":123,"column":8},"end":{"line":140,"column":11}},"114":{"start":{"line":125,"column":12},"end":{"line":139,"column":15}},"115":{"start":{"line":126,"column":16},"end":{"line":138,"column":17}},"116":{"start":{"line":128,"column":24},"end":{"line":128,"column":45}},"117":{"start":{"line":129,"column":24},"end":{"line":129,"column":98}},"118":{"start":{"line":130,"column":24},"end":{"line":130,"column":93}},"119":{"start":{"line":132,"column":24},"end":{"line":132,"column":50}},"120":{"start":{"line":133,"column":24},"end":{"line":135,"column":25}},"121":{"start":{"line":134,"column":28},"end":{"line":134,"column":79}},"122":{"start":{"line":136,"column":24},"end":{"line":136,"column":41}},"123":{"start":{"line":137,"column":24},"end":{"line":137,"column":46}},"124":{"start":{"line":143,"column":8},"end":{"line":169,"column":11}},"125":{"start":{"line":145,"column":12},"end":{"line":168,"column":15}},"126":{"start":{"line":146,"column":16},"end":{"line":167,"column":17}},"127":{"start":{"line":148,"column":24},"end":{"line":148,"column":88}},"128":{"start":{"line":149,"column":24},"end":{"line":152,"column":25}},"129":{"start":{"line":150,"column":28},"end":{"line":150,"column":45}},"130":{"start":{"line":151,"column":28},"end":{"line":151,"column":50}},"131":{"start":{"line":153,"column":24},"end":{"line":153,"column":70}},"132":{"start":{"line":154,"column":24},"end":{"line":154,"column":90}},"133":{"start":{"line":156,"column":24},"end":{"line":156,"column":49}},"134":{"start":{"line":157,"column":24},"end":{"line":164,"column":27}},"135":{"start":{"line":165,"column":24},"end":{"line":165,"column":41}},"136":{"start":{"line":166,"column":24},"end":{"line":166,"column":46}},"137":{"start":{"line":172,"column":8},"end":{"line":189,"column":11}},"138":{"start":{"line":174,"column":12},"end":{"line":188,"column":15}},"139":{"start":{"line":175,"column":16},"end":{"line":187,"column":17}},"140":{"start":{"line":177,"column":24},"end":{"line":177,"column":51}},"141":{"start":{"line":178,"column":24},"end":{"line":178,"column":66}},"142":{"start":{"line":179,"column":24},"end":{"line":180,"column":87}},"143":{"start":{"line":181,"column":24},"end":{"line":181,"column":59}},"144":{"start":{"line":182,"column":24},"end":{"line":182,"column":55}},"145":{"start":{"line":184,"column":24},"end":{"line":184,"column":61}},"146":{"start":{"line":185,"column":24},"end":{"line":185,"column":41}},"147":{"start":{"line":186,"column":24},"end":{"line":186,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":42},"end":{"line":2,"column":43}},"loc":{"start":{"line":2,"column":54},"end":{"line":12,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":3,"column":32},"end":{"line":3,"column":33}},"loc":{"start":{"line":3,"column":44},"end":{"line":10,"column":5}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":13,"column":44},"end":{"line":13,"column":45}},"loc":{"start":{"line":13,"column":89},"end":{"line":21,"column":1}},"line":13},"3":{"name":"adopt","decl":{"start":{"line":14,"column":13},"end":{"line":14,"column":18}},"loc":{"start":{"line":14,"column":26},"end":{"line":14,"column":112}},"line":14},"4":{"name":"(anonymous_4)","decl":{"start":{"line":14,"column":70},"end":{"line":14,"column":71}},"loc":{"start":{"line":14,"column":89},"end":{"line":14,"column":108}},"line":14},"5":{"name":"(anonymous_5)","decl":{"start":{"line":15,"column":36},"end":{"line":15,"column":37}},"loc":{"start":{"line":15,"column":63},"end":{"line":20,"column":5}},"line":15},"6":{"name":"fulfilled","decl":{"start":{"line":16,"column":17},"end":{"line":16,"column":26}},"loc":{"start":{"line":16,"column":34},"end":{"line":16,"column":99}},"line":16},"7":{"name":"rejected","decl":{"start":{"line":17,"column":17},"end":{"line":17,"column":25}},"loc":{"start":{"line":17,"column":33},"end":{"line":17,"column":102}},"line":17},"8":{"name":"step","decl":{"start":{"line":18,"column":17},"end":{"line":18,"column":21}},"loc":{"start":{"line":18,"column":30},"end":{"line":18,"column":118}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":22,"column":48},"end":{"line":22,"column":49}},"loc":{"start":{"line":22,"column":73},"end":{"line":48,"column":1}},"line":22},"10":{"name":"(anonymous_10)","decl":{"start":{"line":23,"column":30},"end":{"line":23,"column":31}},"loc":{"start":{"line":23,"column":41},"end":{"line":23,"column":83}},"line":23},"11":{"name":"(anonymous_11)","decl":{"start":{"line":24,"column":125},"end":{"line":24,"column":126}},"loc":{"start":{"line":24,"column":136},"end":{"line":24,"column":152}},"line":24},"12":{"name":"verb","decl":{"start":{"line":25,"column":13},"end":{"line":25,"column":17}},"loc":{"start":{"line":25,"column":21},"end":{"line":25,"column":70}},"line":25},"13":{"name":"(anonymous_13)","decl":{"start":{"line":25,"column":30},"end":{"line":25,"column":31}},"loc":{"start":{"line":25,"column":43},"end":{"line":25,"column":67}},"line":25},"14":{"name":"step","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":17}},"loc":{"start":{"line":26,"column":22},"end":{"line":47,"column":5}},"line":26},"15":{"name":"(anonymous_15)","decl":{"start":{"line":55,"column":9},"end":{"line":55,"column":10}},"loc":{"start":{"line":55,"column":24},"end":{"line":85,"column":5}},"line":55},"16":{"name":"(anonymous_16)","decl":{"start":{"line":56,"column":47},"end":{"line":56,"column":48}},"loc":{"start":{"line":56,"column":59},"end":{"line":84,"column":9}},"line":56},"17":{"name":"prepare","decl":{"start":{"line":57,"column":21},"end":{"line":57,"column":28}},"loc":{"start":{"line":57,"column":35},"end":{"line":70,"column":13}},"line":57},"18":{"name":"(anonymous_18)","decl":{"start":{"line":67,"column":25},"end":{"line":67,"column":26}},"loc":{"start":{"line":67,"column":39},"end":{"line":69,"column":17}},"line":67},"19":{"name":"(anonymous_19)","decl":{"start":{"line":72,"column":37},"end":{"line":72,"column":38}},"loc":{"start":{"line":72,"column":51},"end":{"line":83,"column":13}},"line":72},"20":{"name":"(anonymous_20)","decl":{"start":{"line":86,"column":9},"end":{"line":86,"column":10}},"loc":{"start":{"line":86,"column":24},"end":{"line":105,"column":5}},"line":86},"21":{"name":"(anonymous_21)","decl":{"start":{"line":87,"column":47},"end":{"line":87,"column":48}},"loc":{"start":{"line":87,"column":59},"end":{"line":104,"column":9}},"line":87},"22":{"name":"(anonymous_22)","decl":{"start":{"line":89,"column":37},"end":{"line":89,"column":38}},"loc":{"start":{"line":89,"column":51},"end":{"line":103,"column":13}},"line":89},"23":{"name":"(anonymous_23)","decl":{"start":{"line":106,"column":10},"end":{"line":106,"column":11}},"loc":{"start":{"line":106,"column":25},"end":{"line":121,"column":5}},"line":106},"24":{"name":"(anonymous_24)","decl":{"start":{"line":107,"column":47},"end":{"line":107,"column":48}},"loc":{"start":{"line":107,"column":59},"end":{"line":120,"column":9}},"line":107},"25":{"name":"(anonymous_25)","decl":{"start":{"line":109,"column":37},"end":{"line":109,"column":38}},"loc":{"start":{"line":109,"column":51},"end":{"line":119,"column":13}},"line":109},"26":{"name":"(anonymous_26)","decl":{"start":{"line":122,"column":10},"end":{"line":122,"column":11}},"loc":{"start":{"line":122,"column":25},"end":{"line":141,"column":5}},"line":122},"27":{"name":"(anonymous_27)","decl":{"start":{"line":123,"column":47},"end":{"line":123,"column":48}},"loc":{"start":{"line":123,"column":59},"end":{"line":140,"column":9}},"line":123},"28":{"name":"(anonymous_28)","decl":{"start":{"line":125,"column":37},"end":{"line":125,"column":38}},"loc":{"start":{"line":125,"column":51},"end":{"line":139,"column":13}},"line":125},"29":{"name":"(anonymous_29)","decl":{"start":{"line":142,"column":20},"end":{"line":142,"column":21}},"loc":{"start":{"line":142,"column":35},"end":{"line":170,"column":5}},"line":142},"30":{"name":"(anonymous_30)","decl":{"start":{"line":143,"column":47},"end":{"line":143,"column":48}},"loc":{"start":{"line":143,"column":59},"end":{"line":169,"column":9}},"line":143},"31":{"name":"(anonymous_31)","decl":{"start":{"line":145,"column":37},"end":{"line":145,"column":38}},"loc":{"start":{"line":145,"column":51},"end":{"line":168,"column":13}},"line":145},"32":{"name":"(anonymous_32)","decl":{"start":{"line":171,"column":20},"end":{"line":171,"column":21}},"loc":{"start":{"line":171,"column":35},"end":{"line":190,"column":5}},"line":171},"33":{"name":"(anonymous_33)","decl":{"start":{"line":172,"column":47},"end":{"line":172,"column":48}},"loc":{"start":{"line":172,"column":59},"end":{"line":189,"column":9}},"line":172},"34":{"name":"(anonymous_34)","decl":{"start":{"line":174,"column":37},"end":{"line":174,"column":38}},"loc":{"start":{"line":174,"column":51},"end":{"line":188,"column":13}},"line":174}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":15},"end":{"line":12,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":16},"end":{"line":2,"column":20}},{"start":{"line":2,"column":24},"end":{"line":2,"column":37}},{"start":{"line":2,"column":42},"end":{"line":12,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":15},"end":{"line":10,"column":5}},"type":"binary-expr","locations":[{"start":{"line":3,"column":15},"end":{"line":3,"column":28}},{"start":{"line":3,"column":32},"end":{"line":10,"column":5}}],"line":3},"2":{"loc":{"start":{"line":6,"column":29},"end":{"line":7,"column":28}},"type":"if","locations":[{"start":{"line":6,"column":29},"end":{"line":7,"column":28}},{"start":{"line":6,"column":29},"end":{"line":7,"column":28}}],"line":6},"3":{"loc":{"start":{"line":13,"column":16},"end":{"line":21,"column":1}},"type":"binary-expr","locations":[{"start":{"line":13,"column":17},"end":{"line":13,"column":21}},{"start":{"line":13,"column":25},"end":{"line":13,"column":39}},{"start":{"line":13,"column":44},"end":{"line":21,"column":1}}],"line":13},"4":{"loc":{"start":{"line":14,"column":35},"end":{"line":14,"column":109}},"type":"cond-expr","locations":[{"start":{"line":14,"column":56},"end":{"line":14,"column":61}},{"start":{"line":14,"column":64},"end":{"line":14,"column":109}}],"line":14},"5":{"loc":{"start":{"line":15,"column":16},"end":{"line":15,"column":34}},"type":"binary-expr","locations":[{"start":{"line":15,"column":16},"end":{"line":15,"column":17}},{"start":{"line":15,"column":22},"end":{"line":15,"column":33}}],"line":15},"6":{"loc":{"start":{"line":18,"column":32},"end":{"line":18,"column":115}},"type":"cond-expr","locations":[{"start":{"line":18,"column":46},"end":{"line":18,"column":67}},{"start":{"line":18,"column":70},"end":{"line":18,"column":115}}],"line":18},"7":{"loc":{"start":{"line":19,"column":51},"end":{"line":19,"column":67}},"type":"binary-expr","locations":[{"start":{"line":19,"column":51},"end":{"line":19,"column":61}},{"start":{"line":19,"column":65},"end":{"line":19,"column":67}}],"line":19},"8":{"loc":{"start":{"line":22,"column":18},"end":{"line":48,"column":1}},"type":"binary-expr","locations":[{"start":{"line":22,"column":19},"end":{"line":22,"column":23}},{"start":{"line":22,"column":27},"end":{"line":22,"column":43}},{"start":{"line":22,"column":48},"end":{"line":48,"column":1}}],"line":22},"9":{"loc":{"start":{"line":23,"column":43},"end":{"line":23,"column":68}},"type":"if","locations":[{"start":{"line":23,"column":43},"end":{"line":23,"column":68}},{"start":{"line":23,"column":43},"end":{"line":23,"column":68}}],"line":23},"10":{"loc":{"start":{"line":24,"column":71},"end":{"line":24,"column":153}},"type":"binary-expr","locations":[{"start":{"line":24,"column":71},"end":{"line":24,"column":99}},{"start":{"line":24,"column":104},"end":{"line":24,"column":152}}],"line":24},"11":{"loc":{"start":{"line":27,"column":8},"end":{"line":27,"column":70}},"type":"if","locations":[{"start":{"line":27,"column":8},"end":{"line":27,"column":70}},{"start":{"line":27,"column":8},"end":{"line":27,"column":70}}],"line":27},"12":{"loc":{"start":{"line":29,"column":12},"end":{"line":29,"column":169}},"type":"if","locations":[{"start":{"line":29,"column":12},"end":{"line":29,"column":169}},{"start":{"line":29,"column":12},"end":{"line":29,"column":169}}],"line":29},"13":{"loc":{"start":{"line":29,"column":23},"end":{"line":29,"column":158}},"type":"binary-expr","locations":[{"start":{"line":29,"column":23},"end":{"line":29,"column":24}},{"start":{"line":29,"column":29},"end":{"line":29,"column":125}},{"start":{"line":29,"column":130},"end":{"line":29,"column":158}}],"line":29},"14":{"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":125}},"type":"cond-expr","locations":[{"start":{"line":29,"column":45},"end":{"line":29,"column":56}},{"start":{"line":29,"column":59},"end":{"line":29,"column":125}}],"line":29},"15":{"loc":{"start":{"line":29,"column":59},"end":{"line":29,"column":125}},"type":"cond-expr","locations":[{"start":{"line":29,"column":67},"end":{"line":29,"column":116}},{"start":{"line":29,"column":119},"end":{"line":29,"column":125}}],"line":29},"16":{"loc":{"start":{"line":29,"column":67},"end":{"line":29,"column":116}},"type":"binary-expr","locations":[{"start":{"line":29,"column":67},"end":{"line":29,"column":77}},{"start":{"line":29,"column":82},"end":{"line":29,"column":115}}],"line":29},"17":{"loc":{"start":{"line":29,"column":82},"end":{"line":29,"column":112}},"type":"binary-expr","locations":[{"start":{"line":29,"column":83},"end":{"line":29,"column":98}},{"start":{"line":29,"column":103},"end":{"line":29,"column":112}}],"line":29},"18":{"loc":{"start":{"line":30,"column":12},"end":{"line":30,"column":52}},"type":"if","locations":[{"start":{"line":30,"column":12},"end":{"line":30,"column":52}},{"start":{"line":30,"column":12},"end":{"line":30,"column":52}}],"line":30},"19":{"loc":{"start":{"line":31,"column":12},"end":{"line":43,"column":13}},"type":"switch","locations":[{"start":{"line":32,"column":16},"end":{"line":32,"column":23}},{"start":{"line":32,"column":24},"end":{"line":32,"column":46}},{"start":{"line":33,"column":16},"end":{"line":33,"column":72}},{"start":{"line":34,"column":16},"end":{"line":34,"column":65}},{"start":{"line":35,"column":16},"end":{"line":35,"column":65}},{"start":{"line":36,"column":16},"end":{"line":42,"column":43}}],"line":31},"20":{"loc":{"start":{"line":37,"column":20},"end":{"line":37,"column":128}},"type":"if","locations":[{"start":{"line":37,"column":20},"end":{"line":37,"column":128}},{"start":{"line":37,"column":20},"end":{"line":37,"column":128}}],"line":37},"21":{"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":106}},"type":"binary-expr","locations":[{"start":{"line":37,"column":24},"end":{"line":37,"column":74}},{"start":{"line":37,"column":79},"end":{"line":37,"column":90}},{"start":{"line":37,"column":94},"end":{"line":37,"column":105}}],"line":37},"22":{"loc":{"start":{"line":37,"column":42},"end":{"line":37,"column":73}},"type":"binary-expr","locations":[{"start":{"line":37,"column":42},"end":{"line":37,"column":54}},{"start":{"line":37,"column":58},"end":{"line":37,"column":73}}],"line":37},"23":{"loc":{"start":{"line":38,"column":20},"end":{"line":38,"column":106}},"type":"if","locations":[{"start":{"line":38,"column":20},"end":{"line":38,"column":106}},{"start":{"line":38,"column":20},"end":{"line":38,"column":106}}],"line":38},"24":{"loc":{"start":{"line":38,"column":24},"end":{"line":38,"column":77}},"type":"binary-expr","locations":[{"start":{"line":38,"column":24},"end":{"line":38,"column":35}},{"start":{"line":38,"column":40},"end":{"line":38,"column":42}},{"start":{"line":38,"column":47},"end":{"line":38,"column":59}},{"start":{"line":38,"column":63},"end":{"line":38,"column":75}}],"line":38},"25":{"loc":{"start":{"line":39,"column":20},"end":{"line":39,"column":89}},"type":"if","locations":[{"start":{"line":39,"column":20},"end":{"line":39,"column":89}},{"start":{"line":39,"column":20},"end":{"line":39,"column":89}}],"line":39},"26":{"loc":{"start":{"line":39,"column":24},"end":{"line":39,"column":53}},"type":"binary-expr","locations":[{"start":{"line":39,"column":24},"end":{"line":39,"column":35}},{"start":{"line":39,"column":39},"end":{"line":39,"column":53}}],"line":39},"27":{"loc":{"start":{"line":40,"column":20},"end":{"line":40,"column":87}},"type":"if","locations":[{"start":{"line":40,"column":20},"end":{"line":40,"column":87}},{"start":{"line":40,"column":20},"end":{"line":40,"column":87}}],"line":40},"28":{"loc":{"start":{"line":40,"column":24},"end":{"line":40,"column":43}},"type":"binary-expr","locations":[{"start":{"line":40,"column":24},"end":{"line":40,"column":25}},{"start":{"line":40,"column":29},"end":{"line":40,"column":43}}],"line":40},"29":{"loc":{"start":{"line":41,"column":20},"end":{"line":41,"column":42}},"type":"if","locations":[{"start":{"line":41,"column":20},"end":{"line":41,"column":42}},{"start":{"line":41,"column":20},"end":{"line":41,"column":42}}],"line":41},"30":{"loc":{"start":{"line":46,"column":8},"end":{"line":46,"column":35}},"type":"if","locations":[{"start":{"line":46,"column":8},"end":{"line":46,"column":35}},{"start":{"line":46,"column":8},"end":{"line":46,"column":35}}],"line":46},"31":{"loc":{"start":{"line":46,"column":52},"end":{"line":46,"column":74}},"type":"cond-expr","locations":[{"start":{"line":46,"column":60},"end":{"line":46,"column":65}},{"start":{"line":46,"column":68},"end":{"line":46,"column":74}}],"line":46},"32":{"loc":{"start":{"line":73,"column":16},"end":{"line":82,"column":17}},"type":"switch","locations":[{"start":{"line":74,"column":20},"end":{"line":76,"column":118}},{"start":{"line":77,"column":20},"end":{"line":81,"column":46}}],"line":73},"33":{"loc":{"start":{"line":90,"column":16},"end":{"line":102,"column":17}},"type":"switch","locations":[{"start":{"line":91,"column":20},"end":{"line":94,"column":70}},{"start":{"line":95,"column":20},"end":{"line":98,"column":79}},{"start":{"line":99,"column":20},"end":{"line":101,"column":46}}],"line":90},"34":{"loc":{"start":{"line":110,"column":16},"end":{"line":118,"column":17}},"type":"switch","locations":[{"start":{"line":111,"column":20},"end":{"line":113,"column":79}},{"start":{"line":114,"column":20},"end":{"line":117,"column":46}}],"line":110},"35":{"loc":{"start":{"line":126,"column":16},"end":{"line":138,"column":17}},"type":"switch","locations":[{"start":{"line":127,"column":20},"end":{"line":130,"column":93}},{"start":{"line":131,"column":20},"end":{"line":137,"column":46}}],"line":126},"36":{"loc":{"start":{"line":133,"column":24},"end":{"line":135,"column":25}},"type":"if","locations":[{"start":{"line":133,"column":24},"end":{"line":135,"column":25}},{"start":{"line":133,"column":24},"end":{"line":135,"column":25}}],"line":133},"37":{"loc":{"start":{"line":146,"column":16},"end":{"line":167,"column":17}},"type":"switch","locations":[{"start":{"line":147,"column":20},"end":{"line":154,"column":90}},{"start":{"line":155,"column":20},"end":{"line":166,"column":46}}],"line":146},"38":{"loc":{"start":{"line":149,"column":24},"end":{"line":152,"column":25}},"type":"if","locations":[{"start":{"line":149,"column":24},"end":{"line":152,"column":25}},{"start":{"line":149,"column":24},"end":{"line":152,"column":25}}],"line":149},"39":{"loc":{"start":{"line":175,"column":16},"end":{"line":187,"column":17}},"type":"switch","locations":[{"start":{"line":176,"column":20},"end":{"line":182,"column":55}},{"start":{"line":183,"column":20},"end":{"line":186,"column":46}}],"line":175}},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1,"11":1,"12":4,"13":4,"14":3,"15":4,"16":4,"17":0,"18":0,"19":0,"20":0,"21":7,"22":3,"23":1,"24":3,"25":4,"26":0,"27":4,"28":3,"29":0,"30":9,"31":7,"32":7,"33":0,"34":7,"35":14,"36":14,"37":0,"38":14,"39":0,"40":14,"41":7,"42":7,"43":4,"44":4,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":3,"53":3,"54":3,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":7,"71":0,"72":0,"73":14,"74":3,"75":0,"76":3,"77":1,"78":1,"79":1,"80":1,"81":1,"82":1,"83":2,"84":2,"85":16,"86":2,"87":4,"88":2,"89":2,"90":2,"91":2,"92":2,"93":2,"94":1,"95":1,"96":3,"97":1,"98":1,"99":1,"100":1,"101":1,"102":1,"103":1,"104":1,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0},"f":{"0":1,"1":0,"2":3,"3":4,"4":4,"5":3,"6":4,"7":0,"8":7,"9":3,"10":4,"11":0,"12":9,"13":7,"14":7,"15":2,"16":2,"17":2,"18":16,"19":4,"20":1,"21":1,"22":3,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[1,1,1],"4":[0,4],"5":[3,3],"6":[3,4],"7":[3,3],"8":[1,1,1],"9":[0,4],"10":[3,3],"11":[0,7],"12":[0,14],"13":[14,0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,14],"19":[7,7,4,0,0,3],"20":[3,0],"21":[3,3,3],"22":[3,0],"23":[0,0],"24":[0,0,0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,3],"31":[3,0],"32":[2,2],"33":[1,1,1],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0]},"inputSourceMap":{"version":3,"file":"/app/app/controllers/game.ts","sources":["/app/app/controllers/game.ts"],"names":[],"mappings":"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","sourcesContent":["import {IMessage} from '../db/queries/interfaces/Imessage'\nimport games from '../db/queries/games'\nimport {_} from 'lodash'\nimport {saveMessage, getMessages} from '../db/queries/messages'\nimport config from '../config'\n\nexport default {\n    async add(ctx) {\n        const data = prepare(ctx.request.body);\n        const id = await games.addGame({\n            author_id: ctx.req.user.id,\n            ...data,\n        });\n        ctx.ioGeneral.emit('GAME_ADDED', id);\n        ctx.status = 201;\n\n        function prepare(body: any) {\n            return _.pick(\n                body,\n                [\n                    'players',\n                    'additional',\n                    'lat',\n                    'long',\n                    'address',\n                    'city_id',\n                    'district',\n                    'date',\n                ].filter((it) => {\n                    return body[it] !== ''\n                })\n            );\n        }\n    },\n\n  async get(ctx) {\n    const {id} = ctx.params;\n    ctx.body = await games.get(id);\n    ctx.body.fieldNumbersInGame = await games.playerInGame(id);\n  },\n\n  async list(ctx) {\n    const {id} = ctx.params;\n    const {rows} = await games.gamesForCity(id);\n    ctx.body = rows;\n  },\n\n  async join(ctx) {\n    const {id} = ctx.req.user;\n    const {gameId, playerNumber} = ctx.request.body;\n    const playersInGame = await games.join(id, gameId, playerNumber);\n    if (playersInGame) {\n      ctx.ioGeneral.emit('PLAYER_JOINED', playersInGame);\n    }\n    ctx.status = 200;\n  },\n\n  async addChatMessage(ctx) {\n    const {message, gameId} = ctx.request.body;\n\n    if (!message) {\n      ctx.status = 422;\n      return;\n    }\n    const {name, id} = ctx.req.user;\n    const savedMessage: IMessage = await saveMessage(message, id, gameId);\n    ctx.ioGame\n        .to(config.GAME_CHAT_ROOM_PREFIX+gameId)\n        .emit('GAME_CHAT_MESSAGE_ADDED', {\n          id: savedMessage.id,\n          username: name,\n          text: savedMessage.text,\n          date: savedMessage.date,\n        });\n    ctx.status = 201\n  },\n\n  async getChatHistory(ctx) {\n    const {gameId} = ctx.params;\n    const messages = getMessages(gameId);\n    ctx.ioGame\n        .to(config.GAME_CHAT_ROOM_PREFIX+gameId)\n        .emit('GAME_CHAT_MESSAGE_HISTORY', await messages);\n    ctx.status = 200;\n  },\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"271bd2c99f5f97841709fe4f1e51ec8c37864293","contentHash":"dc24e12bb36b0f74ad61fa7440688cb6e52881b893efc894c5755a5d3a804ee0"},"/app/app/db/queries/games.ts":{"path":"/app/app/db/queries/games.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"13":{"start":{"line":12,"column":12},"end":{"line":12,"column":104}},"14":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"15":{"start":{"line":12,"column":57},"end":{"line":12,"column":68}},"16":{"start":{"line":12,"column":69},"end":{"line":12,"column":81}},"17":{"start":{"line":13,"column":4},"end":{"line":13,"column":157}},"18":{"start":{"line":13,"column":138},"end":{"line":13,"column":150}},"19":{"start":{"line":14,"column":23},"end":{"line":14,"column":68}},"20":{"start":{"line":14,"column":45},"end":{"line":14,"column":65}},"21":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"22":{"start":{"line":16,"column":15},"end":{"line":16,"column":70}},"23":{"start":{"line":17,"column":8},"end":{"line":34,"column":66}},"24":{"start":{"line":17,"column":18},"end":{"line":34,"column":66}},"25":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"26":{"start":{"line":18,"column":160},"end":{"line":18,"column":169}},"27":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"28":{"start":{"line":19,"column":26},"end":{"line":19,"column":52}},"29":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"30":{"start":{"line":21,"column":32},"end":{"line":21,"column":39}},"31":{"start":{"line":21,"column":40},"end":{"line":21,"column":46}},"32":{"start":{"line":22,"column":24},"end":{"line":22,"column":34}},"33":{"start":{"line":22,"column":35},"end":{"line":22,"column":72}},"34":{"start":{"line":23,"column":24},"end":{"line":23,"column":34}},"35":{"start":{"line":23,"column":35},"end":{"line":23,"column":45}},"36":{"start":{"line":23,"column":46},"end":{"line":23,"column":55}},"37":{"start":{"line":23,"column":56},"end":{"line":23,"column":65}},"38":{"start":{"line":24,"column":24},"end":{"line":24,"column":41}},"39":{"start":{"line":24,"column":42},"end":{"line":24,"column":55}},"40":{"start":{"line":24,"column":56},"end":{"line":24,"column":65}},"41":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"42":{"start":{"line":26,"column":110},"end":{"line":26,"column":116}},"43":{"start":{"line":26,"column":117},"end":{"line":26,"column":126}},"44":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"45":{"start":{"line":27,"column":81},"end":{"line":27,"column":97}},"46":{"start":{"line":27,"column":98},"end":{"line":27,"column":104}},"47":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"48":{"start":{"line":28,"column":57},"end":{"line":28,"column":72}},"49":{"start":{"line":28,"column":73},"end":{"line":28,"column":80}},"50":{"start":{"line":28,"column":81},"end":{"line":28,"column":87}},"51":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"52":{"start":{"line":29,"column":47},"end":{"line":29,"column":62}},"53":{"start":{"line":29,"column":63},"end":{"line":29,"column":78}},"54":{"start":{"line":29,"column":79},"end":{"line":29,"column":85}},"55":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"56":{"start":{"line":30,"column":30},"end":{"line":30,"column":42}},"57":{"start":{"line":31,"column":20},"end":{"line":31,"column":33}},"58":{"start":{"line":31,"column":34},"end":{"line":31,"column":43}},"59":{"start":{"line":33,"column":12},"end":{"line":33,"column":39}},"60":{"start":{"line":34,"column":22},"end":{"line":34,"column":34}},"61":{"start":{"line":34,"column":35},"end":{"line":34,"column":41}},"62":{"start":{"line":34,"column":54},"end":{"line":34,"column":64}},"63":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"64":{"start":{"line":35,"column":23},"end":{"line":35,"column":35}},"65":{"start":{"line":35,"column":36},"end":{"line":35,"column":89}},"66":{"start":{"line":38,"column":0},"end":{"line":38,"column":62}},"67":{"start":{"line":39,"column":13},"end":{"line":39,"column":39}},"68":{"start":{"line":41,"column":16},"end":{"line":41,"column":20}},"69":{"start":{"line":42,"column":4},"end":{"line":63,"column":11}},"70":{"start":{"line":42,"column":55},"end":{"line":63,"column":7}},"71":{"start":{"line":44,"column":8},"end":{"line":62,"column":11}},"72":{"start":{"line":45,"column":12},"end":{"line":61,"column":13}},"73":{"start":{"line":46,"column":24},"end":{"line":49,"column":66}},"74":{"start":{"line":49,"column":47},"end":{"line":49,"column":61}},"75":{"start":{"line":51,"column":20},"end":{"line":51,"column":35}},"76":{"start":{"line":52,"column":20},"end":{"line":57,"column":56}},"77":{"start":{"line":59,"column":20},"end":{"line":59,"column":30}},"78":{"start":{"line":60,"column":20},"end":{"line":60,"column":46}},"79":{"start":{"line":66,"column":4},"end":{"line":66,"column":642}},"80":{"start":{"line":72,"column":4},"end":{"line":72,"column":578}},"81":{"start":{"line":72,"column":555},"end":{"line":72,"column":574}},"82":{"start":{"line":75,"column":4},"end":{"line":76,"column":64}},"83":{"start":{"line":76,"column":31},"end":{"line":76,"column":60}},"84":{"start":{"line":82,"column":4},"end":{"line":125,"column":7}},"85":{"start":{"line":84,"column":8},"end":{"line":124,"column":11}},"86":{"start":{"line":85,"column":12},"end":{"line":123,"column":13}},"87":{"start":{"line":86,"column":24},"end":{"line":86,"column":107}},"88":{"start":{"line":88,"column":20},"end":{"line":90,"column":21}},"89":{"start":{"line":89,"column":24},"end":{"line":89,"column":46}},"90":{"start":{"line":91,"column":20},"end":{"line":95,"column":22}},"91":{"start":{"line":96,"column":20},"end":{"line":96,"column":98}},"92":{"start":{"line":98,"column":20},"end":{"line":98,"column":60}},"93":{"start":{"line":98,"column":36},"end":{"line":98,"column":60}},"94":{"start":{"line":99,"column":20},"end":{"line":99,"column":89}},"95":{"start":{"line":101,"column":20},"end":{"line":101,"column":30}},"96":{"start":{"line":102,"column":20},"end":{"line":102,"column":42}},"97":{"start":{"line":103,"column":20},"end":{"line":103,"column":44}},"98":{"start":{"line":104,"column":24},"end":{"line":104,"column":82}},"99":{"start":{"line":106,"column":20},"end":{"line":106,"column":30}},"100":{"start":{"line":107,"column":20},"end":{"line":107,"column":88}},"101":{"start":{"line":109,"column":20},"end":{"line":109,"column":30}},"102":{"start":{"line":110,"column":20},"end":{"line":110,"column":42}},"103":{"start":{"line":111,"column":20},"end":{"line":111,"column":33}},"104":{"start":{"line":113,"column":20},"end":{"line":113,"column":30}},"105":{"start":{"line":114,"column":20},"end":{"line":115,"column":85}},"106":{"start":{"line":115,"column":51},"end":{"line":115,"column":80}},"107":{"start":{"line":117,"column":20},"end":{"line":118,"column":34}},"108":{"start":{"line":119,"column":20},"end":{"line":119,"column":69}},"109":{"start":{"line":121,"column":20},"end":{"line":121,"column":46}},"110":{"start":{"line":122,"column":20},"end":{"line":122,"column":90}},"111":{"start":{"line":128,"column":4},"end":{"line":131,"column":84}},"112":{"start":{"line":131,"column":66},"end":{"line":131,"column":80}},"113":{"start":{"line":134,"column":4},"end":{"line":138,"column":47}},"114":{"start":{"line":138,"column":29},"end":{"line":138,"column":43}},"115":{"start":{"line":141,"column":4},"end":{"line":145,"column":13}},"116":{"start":{"line":148,"column":4},"end":{"line":152,"column":7}},"117":{"start":{"line":155,"column":4},"end":{"line":158,"column":13}},"118":{"start":{"line":161,"column":4},"end":{"line":164,"column":48}},"119":{"start":{"line":164,"column":30},"end":{"line":164,"column":44}},"120":{"start":{"line":166,"column":0},"end":{"line":172,"column":2}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":48},"end":{"line":11,"column":49}},"loc":{"start":{"line":11,"column":73},"end":{"line":37,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":12,"column":30},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":41},"end":{"line":12,"column":83}},"line":12},"9":{"name":"(anonymous_9)","decl":{"start":{"line":13,"column":125},"end":{"line":13,"column":126}},"loc":{"start":{"line":13,"column":136},"end":{"line":13,"column":152}},"line":13},"10":{"name":"verb","decl":{"start":{"line":14,"column":13},"end":{"line":14,"column":17}},"loc":{"start":{"line":14,"column":21},"end":{"line":14,"column":70}},"line":14},"11":{"name":"(anonymous_11)","decl":{"start":{"line":14,"column":30},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":43},"end":{"line":14,"column":67}},"line":14},"12":{"name":"step","decl":{"start":{"line":15,"column":13},"end":{"line":15,"column":17}},"loc":{"start":{"line":15,"column":22},"end":{"line":36,"column":5}},"line":15},"13":{"name":"addGame","decl":{"start":{"line":40,"column":9},"end":{"line":40,"column":16}},"loc":{"start":{"line":40,"column":23},"end":{"line":64,"column":1}},"line":40},"14":{"name":"(anonymous_14)","decl":{"start":{"line":42,"column":38},"end":{"line":42,"column":39}},"loc":{"start":{"line":42,"column":53},"end":{"line":63,"column":9}},"line":42},"15":{"name":"(anonymous_15)","decl":{"start":{"line":42,"column":95},"end":{"line":42,"column":96}},"loc":{"start":{"line":42,"column":107},"end":{"line":63,"column":5}},"line":42},"16":{"name":"(anonymous_16)","decl":{"start":{"line":44,"column":33},"end":{"line":44,"column":34}},"loc":{"start":{"line":44,"column":47},"end":{"line":62,"column":9}},"line":44},"17":{"name":"(anonymous_17)","decl":{"start":{"line":49,"column":30},"end":{"line":49,"column":31}},"loc":{"start":{"line":49,"column":45},"end":{"line":49,"column":63}},"line":49},"18":{"name":"gamesForCity","decl":{"start":{"line":65,"column":9},"end":{"line":65,"column":21}},"loc":{"start":{"line":65,"column":30},"end":{"line":67,"column":1}},"line":65},"19":{"name":"get","decl":{"start":{"line":71,"column":9},"end":{"line":71,"column":12}},"loc":{"start":{"line":71,"column":17},"end":{"line":73,"column":1}},"line":71},"20":{"name":"(anonymous_20)","decl":{"start":{"line":72,"column":538},"end":{"line":72,"column":539}},"loc":{"start":{"line":72,"column":553},"end":{"line":72,"column":576}},"line":72},"21":{"name":"playerInGame","decl":{"start":{"line":74,"column":9},"end":{"line":74,"column":21}},"loc":{"start":{"line":74,"column":30},"end":{"line":77,"column":1}},"line":74},"22":{"name":"(anonymous_22)","decl":{"start":{"line":76,"column":14},"end":{"line":76,"column":15}},"loc":{"start":{"line":76,"column":29},"end":{"line":76,"column":62}},"line":76},"23":{"name":"join","decl":{"start":{"line":81,"column":9},"end":{"line":81,"column":13}},"loc":{"start":{"line":81,"column":51},"end":{"line":126,"column":1}},"line":81},"24":{"name":"(anonymous_24)","decl":{"start":{"line":82,"column":43},"end":{"line":82,"column":44}},"loc":{"start":{"line":82,"column":55},"end":{"line":125,"column":5}},"line":82},"25":{"name":"(anonymous_25)","decl":{"start":{"line":84,"column":33},"end":{"line":84,"column":34}},"loc":{"start":{"line":84,"column":47},"end":{"line":124,"column":9}},"line":84},"26":{"name":"(anonymous_26)","decl":{"start":{"line":115,"column":34},"end":{"line":115,"column":35}},"loc":{"start":{"line":115,"column":49},"end":{"line":115,"column":82}},"line":115},"27":{"name":"checkIfPositionOccupied","decl":{"start":{"line":127,"column":9},"end":{"line":127,"column":32}},"loc":{"start":{"line":127,"column":70},"end":{"line":132,"column":1}},"line":127},"28":{"name":"(anonymous_28)","decl":{"start":{"line":131,"column":49},"end":{"line":131,"column":50}},"loc":{"start":{"line":131,"column":64},"end":{"line":131,"column":82}},"line":131},"29":{"name":"checkIfAlreadyJoin","decl":{"start":{"line":133,"column":9},"end":{"line":133,"column":27}},"loc":{"start":{"line":133,"column":65},"end":{"line":139,"column":1}},"line":133},"30":{"name":"(anonymous_30)","decl":{"start":{"line":138,"column":12},"end":{"line":138,"column":13}},"loc":{"start":{"line":138,"column":27},"end":{"line":138,"column":45}},"line":138},"31":{"name":"leaveGame","decl":{"start":{"line":140,"column":9},"end":{"line":140,"column":18}},"loc":{"start":{"line":140,"column":56},"end":{"line":146,"column":1}},"line":140},"32":{"name":"joinGame","decl":{"start":{"line":147,"column":9},"end":{"line":147,"column":17}},"loc":{"start":{"line":147,"column":55},"end":{"line":153,"column":1}},"line":147},"33":{"name":"cleanPrevPosition","decl":{"start":{"line":154,"column":9},"end":{"line":154,"column":26}},"loc":{"start":{"line":154,"column":45},"end":{"line":159,"column":1}},"line":154},"34":{"name":"countPlayersInGame","decl":{"start":{"line":160,"column":9},"end":{"line":160,"column":27}},"loc":{"start":{"line":160,"column":36},"end":{"line":165,"column":1}},"line":160},"35":{"name":"(anonymous_35)","decl":{"start":{"line":164,"column":13},"end":{"line":164,"column":14}},"loc":{"start":{"line":164,"column":28},"end":{"line":164,"column":46}},"line":164}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":19},"end":{"line":11,"column":23}},{"start":{"line":11,"column":27},"end":{"line":11,"column":43}},{"start":{"line":11,"column":48},"end":{"line":37,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"type":"if","locations":[{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},{"start":{"line":12,"column":43},"end":{"line":12,"column":68}}],"line":12},"7":{"loc":{"start":{"line":13,"column":71},"end":{"line":13,"column":153}},"type":"binary-expr","locations":[{"start":{"line":13,"column":71},"end":{"line":13,"column":99}},{"start":{"line":13,"column":104},"end":{"line":13,"column":152}}],"line":13},"8":{"loc":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"type":"if","locations":[{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},{"start":{"line":16,"column":8},"end":{"line":16,"column":70}}],"line":16},"9":{"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"type":"if","locations":[{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},{"start":{"line":18,"column":12},"end":{"line":18,"column":169}}],"line":18},"10":{"loc":{"start":{"line":18,"column":23},"end":{"line":18,"column":158}},"type":"binary-expr","locations":[{"start":{"line":18,"column":23},"end":{"line":18,"column":24}},{"start":{"line":18,"column":29},"end":{"line":18,"column":125}},{"start":{"line":18,"column":130},"end":{"line":18,"column":158}}],"line":18},"11":{"loc":{"start":{"line":18,"column":33},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":45},"end":{"line":18,"column":56}},{"start":{"line":18,"column":59},"end":{"line":18,"column":125}}],"line":18},"12":{"loc":{"start":{"line":18,"column":59},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},{"start":{"line":18,"column":119},"end":{"line":18,"column":125}}],"line":18},"13":{"loc":{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},"type":"binary-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":77}},{"start":{"line":18,"column":82},"end":{"line":18,"column":115}}],"line":18},"14":{"loc":{"start":{"line":18,"column":82},"end":{"line":18,"column":112}},"type":"binary-expr","locations":[{"start":{"line":18,"column":83},"end":{"line":18,"column":98}},{"start":{"line":18,"column":103},"end":{"line":18,"column":112}}],"line":18},"15":{"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"type":"if","locations":[{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},{"start":{"line":19,"column":12},"end":{"line":19,"column":52}}],"line":19},"16":{"loc":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"type":"switch","locations":[{"start":{"line":21,"column":16},"end":{"line":21,"column":23}},{"start":{"line":21,"column":24},"end":{"line":21,"column":46}},{"start":{"line":22,"column":16},"end":{"line":22,"column":72}},{"start":{"line":23,"column":16},"end":{"line":23,"column":65}},{"start":{"line":24,"column":16},"end":{"line":24,"column":65}},{"start":{"line":25,"column":16},"end":{"line":31,"column":43}}],"line":20},"17":{"loc":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"type":"if","locations":[{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},{"start":{"line":26,"column":20},"end":{"line":26,"column":128}}],"line":26},"18":{"loc":{"start":{"line":26,"column":24},"end":{"line":26,"column":106}},"type":"binary-expr","locations":[{"start":{"line":26,"column":24},"end":{"line":26,"column":74}},{"start":{"line":26,"column":79},"end":{"line":26,"column":90}},{"start":{"line":26,"column":94},"end":{"line":26,"column":105}}],"line":26},"19":{"loc":{"start":{"line":26,"column":42},"end":{"line":26,"column":73}},"type":"binary-expr","locations":[{"start":{"line":26,"column":42},"end":{"line":26,"column":54}},{"start":{"line":26,"column":58},"end":{"line":26,"column":73}}],"line":26},"20":{"loc":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"type":"if","locations":[{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},{"start":{"line":27,"column":20},"end":{"line":27,"column":106}}],"line":27},"21":{"loc":{"start":{"line":27,"column":24},"end":{"line":27,"column":77}},"type":"binary-expr","locations":[{"start":{"line":27,"column":24},"end":{"line":27,"column":35}},{"start":{"line":27,"column":40},"end":{"line":27,"column":42}},{"start":{"line":27,"column":47},"end":{"line":27,"column":59}},{"start":{"line":27,"column":63},"end":{"line":27,"column":75}}],"line":27},"22":{"loc":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"type":"if","locations":[{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},{"start":{"line":28,"column":20},"end":{"line":28,"column":89}}],"line":28},"23":{"loc":{"start":{"line":28,"column":24},"end":{"line":28,"column":53}},"type":"binary-expr","locations":[{"start":{"line":28,"column":24},"end":{"line":28,"column":35}},{"start":{"line":28,"column":39},"end":{"line":28,"column":53}}],"line":28},"24":{"loc":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"type":"if","locations":[{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},{"start":{"line":29,"column":20},"end":{"line":29,"column":87}}],"line":29},"25":{"loc":{"start":{"line":29,"column":24},"end":{"line":29,"column":43}},"type":"binary-expr","locations":[{"start":{"line":29,"column":24},"end":{"line":29,"column":25}},{"start":{"line":29,"column":29},"end":{"line":29,"column":43}}],"line":29},"26":{"loc":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"type":"if","locations":[{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},{"start":{"line":30,"column":20},"end":{"line":30,"column":42}}],"line":30},"27":{"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},{"start":{"line":35,"column":8},"end":{"line":35,"column":35}}],"line":35},"28":{"loc":{"start":{"line":35,"column":52},"end":{"line":35,"column":74}},"type":"cond-expr","locations":[{"start":{"line":35,"column":60},"end":{"line":35,"column":65}},{"start":{"line":35,"column":68},"end":{"line":35,"column":74}}],"line":35},"29":{"loc":{"start":{"line":45,"column":12},"end":{"line":61,"column":13}},"type":"switch","locations":[{"start":{"line":46,"column":16},"end":{"line":49,"column":66}},{"start":{"line":50,"column":16},"end":{"line":57,"column":56}},{"start":{"line":58,"column":16},"end":{"line":60,"column":46}}],"line":45},"30":{"loc":{"start":{"line":85,"column":12},"end":{"line":123,"column":13}},"type":"switch","locations":[{"start":{"line":86,"column":16},"end":{"line":86,"column":107}},{"start":{"line":87,"column":16},"end":{"line":96,"column":98}},{"start":{"line":97,"column":16},"end":{"line":99,"column":89}},{"start":{"line":100,"column":16},"end":{"line":103,"column":44}},{"start":{"line":104,"column":16},"end":{"line":104,"column":82}},{"start":{"line":105,"column":16},"end":{"line":107,"column":88}},{"start":{"line":108,"column":16},"end":{"line":111,"column":33}},{"start":{"line":112,"column":16},"end":{"line":115,"column":85}},{"start":{"line":116,"column":16},"end":{"line":119,"column":69}},{"start":{"line":120,"column":16},"end":{"line":122,"column":90}}],"line":85},"31":{"loc":{"start":{"line":88,"column":20},"end":{"line":90,"column":21}},"type":"if","locations":[{"start":{"line":88,"column":20},"end":{"line":90,"column":21}},{"start":{"line":88,"column":20},"end":{"line":90,"column":21}}],"line":88},"32":{"loc":{"start":{"line":98,"column":20},"end":{"line":98,"column":60}},"type":"if","locations":[{"start":{"line":98,"column":20},"end":{"line":98,"column":60}},{"start":{"line":98,"column":20},"end":{"line":98,"column":60}}],"line":98}},"s":{"0":1,"1":4,"2":4,"3":2,"4":4,"5":4,"6":0,"7":0,"8":0,"9":0,"10":6,"11":2,"12":1,"13":2,"14":4,"15":0,"16":4,"17":2,"18":0,"19":6,"20":6,"21":6,"22":0,"23":6,"24":12,"25":12,"26":0,"27":12,"28":0,"29":12,"30":6,"31":6,"32":4,"33":4,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":2,"42":2,"43":2,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":6,"60":0,"61":0,"62":12,"63":2,"64":0,"65":2,"66":1,"67":1,"68":2,"69":2,"70":2,"71":2,"72":6,"73":2,"74":2,"75":2,"76":2,"77":2,"78":2,"79":0,"80":1,"81":1,"82":1,"83":1,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":1},"f":{"0":2,"1":4,"2":4,"3":2,"4":4,"5":0,"6":6,"7":2,"8":4,"9":0,"10":6,"11":6,"12":6,"13":2,"14":2,"15":2,"16":6,"17":2,"18":0,"19":1,"20":1,"21":1,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0},"b":{"0":[1,1,1],"1":[0,4],"2":[2,2],"3":[2,4],"4":[2,2],"5":[1,1,1],"6":[0,4],"7":[2,2],"8":[0,6],"9":[0,12],"10":[12,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,12],"16":[6,6,4,0,0,2],"17":[2,0],"18":[2,2,2],"19":[2,0],"20":[0,0],"21":[0,0,0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,2],"28":[2,0],"29":[2,2,2],"30":[0,0,0,0,0,0,0,0,0,0],"31":[0,0],"32":[0,0]},"inputSourceMap":{"version":3,"file":"/app/app/db/queries/games.ts","sources":["/app/app/db/queries/games.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,wCAAkC;AAGlC,SAAS,OAAO,CAAC,IAAiB;IAAlC,iBAeC;IAdC,OAAO,cAAI,CAAC,WAAW,CAAC,UAAO,GAAG;;;;wBACb,qBAAM,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC;yBACpC,IAAI,CAAC,OAAO,CAAC;yBACb,SAAS,CAAC,IAAI,CAAC;yBACf,IAAI,CAAC,UAAC,GAAG,IAAK,OAAA,GAAG,CAAC,CAAC,CAAC,EAAN,CAAM,CAAC,EAAA;;oBAHpB,EAAE,GAAW,SAGO;oBAC1B,qBAAM,GAAG,CAAC,MAAM,CACZ;4BACE,SAAS,EAAE,IAAI,CAAC,SAAS;4BACzB,mBAAmB,EAAE,CAAC;4BACtB,OAAO,EAAE,EAAE;yBACZ,CAAC;6BACD,IAAI,CAAC,mBAAmB,CAAC,EAAA;;oBAN9B,SAM8B,CAAC;oBAC/B,sBAAO,EAAE,EAAC;;;SACX,CAAC,CAAC;AACL,CAAC;AAED,SAAS,YAAY,CAAC,MAAc;IAClC,OAAO,cAAI,CAAC,GAAG,CACX,wlBAsBH,EACG,CAAC,MAAM,CAAC,CACX,CAAC;AACJ,CAAC;AAED;;GAEG;AACH,SAAS,GAAG,CAAC,EAAU;IACrB,OAAO,cAAI,CAAC,GAAG,CACX,yeAUa,EAAE,EAAC,EAAE,IAAA,EAAC,CACtB,CAAC,IAAI,CAAC,UAAC,GAAG,IAAK,OAAA,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,EAAX,CAAW,CAAC,CAAC;AAC/B,CAAC;AAED,SAAS,YAAY,CAAC,MAAc;IAClC,OAAO,cAAI,CAAC,GAAG,CAAC,yGAEqC,EAAE,EAAC,MAAM,QAAA,EAAC,CAAC;SAC3D,IAAI,CAAC,UAAC,GAAG,IAAI,OAAA,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,EAArB,CAAqB,CAAC,CAAC;AAC3C,CAAC;AACD;;GAEG;AACH,SAAe,IAAI,CACf,QAAgB,EAChB,MAAc,EACd,iBAAyB;;;;;wBACvB,qBAAM,uBAAuB,CAAC,iBAAiB,EAAE,MAAM,EAAE,QAAQ,CAAC,EAAA;;oBAAtE,IAAI,SAAkE,EAAE;wBACtE,sBAAO;qBACR;oBAEK,IAAI,GAAe;wBACvB,iBAAiB,mBAAA;wBACjB,MAAM,QAAA;wBACN,QAAQ,UAAA;qBACT,CAAC;oBACE,qBAAM,kBAAkB,CAAC,iBAAiB,EAAE,MAAM,EAAE,QAAQ,CAAC,EAAA;;yBAA7D,SAA6D,EAA7D,wBAA6D;oBAC/D,qBAAM,SAAS,CAAC,iBAAiB,EAAE,MAAM,EAAE,QAAQ,CAAC,EAAA;;oBAApD,SAAoD,CAAC;oBACrD,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;;wBAEtB,qBAAM,iBAAiB,CAAC,MAAM,EAAE,QAAQ,CAAC,EAAA;;oBAAzC,SAAyC,CAAC;oBAC1C,qBAAM,QAAQ,CAAC,iBAAiB,EAAE,MAAM,EAAE,QAAQ,CAAC,EAAA;;oBAAnD,SAAmD,CAAC;oBACpD,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;;;oBAExB,KAAA,IAAI,CAAA;oBACF,qBAAM,cAAI,CAAC,GAAG,CAAC,2FAE0B,EAAE,MAAM,CAAC;6BAC7C,IAAI,CAAC,UAAC,GAAG,IAAI,OAAA,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,EAArB,CAAqB,CAAC,EAAA;;oBAJ1C,GAAK,kBAAkB;wBACrB,SAGwC,CAAC;oBAC3B,qBAAM,kBAAkB,CAAC,MAAM,CAAC,EAAA;;oBAAzC,KAAK,GAAI,CAAA,SAAgC,CAAA,MAApC;oBACZ,sBAAO,EAAC,MAAM,QAAA,EAAE,OAAO,EAAE,KAAK,EAAE,IAAI,MAAA,EAAC,EAAC;;;;CACvC;AAED,SAAS,uBAAuB,CAC5B,iBAAyB,EACzB,MAAc,EACd,QAAgB;IAClB,OAAO,cAAI,CAAC,mBAAmB,CAAC,CAAC,KAAK,CAAC;QACrC,mBAAmB,EAAE,iBAAiB;QACtC,OAAO,EAAE,MAAM;KAChB,CAAC,CAAC,WAAW,CAAC,EAAC,SAAS,EAAE,QAAQ,EAAC,CAAC,CAAC,IAAI,CAAC,UAAC,GAAG,IAAG,OAAA,GAAG,CAAC,CAAC,CAAC,EAAN,CAAM,CAAC,CAAC;AAC5D,CAAC;AAED,SAAS,kBAAkB,CACvB,iBAAyB,EACzB,MAAc,EACd,QAAgB;IAClB,OAAO,cAAI,CAAC,mBAAmB,CAAC,CAAC,KAAK,CAClC;QACE,OAAO,EAAE,MAAM;QACf,SAAS,EAAE,QAAQ;QACnB,mBAAmB,EAAE,iBAAiB;KACvC,CAAC,CAAC,IAAI,CAAC,UAAC,GAAG,IAAK,OAAA,GAAG,CAAC,CAAC,CAAC,EAAN,CAAM,CAAC,CAAC;AAC/B,CAAC;AAED,SAAS,SAAS,CACd,iBAAyB,EACzB,MAAc,EACd,QAAgB;IAClB,OAAO,cAAI,CAAC,mBAAmB,CAAC,CAAC,KAAK,CAAC;QACrC,OAAO,EAAE,MAAM;QACf,SAAS,EAAE,QAAQ;QACnB,mBAAmB,EAAE,iBAAiB;KACvC,CAAC,CAAC,GAAG,EAAE,CAAC;AACX,CAAC;AAED,SAAS,QAAQ,CACb,iBAAyB,EACzB,MAAc,EACd,QAAgB;IAClB,OAAO,cAAI,CAAC,mBAAmB,CAAC,CAAC,MAAM,CAAC;QACtC,OAAO,EAAE,MAAM;QACf,SAAS,EAAE,QAAQ;QACnB,mBAAmB,EAAE,iBAAiB;KACvC,CAAC,CAAC;AACL,CAAC;AAED,SAAS,iBAAiB,CAAC,MAAc,EAAE,QAAgB;IACzD,OAAO,cAAI,CAAC,mBAAmB,CAAC,CAAC,KAAK,CAAC;QACrC,OAAO,EAAE,MAAM;QACf,SAAS,EAAE,QAAQ;KACpB,CAAC,CAAC,GAAG,EAAE,CAAC;AACX,CAAC;AACD,SAAS,kBAAkB,CAAC,MAAc;IACxC,OAAO,cAAI,CAAC,mBAAmB,CAAC;QAC5B,KAAK,CAAC,EAAC,OAAO,EAAE,MAAM,EAAC,CAAC;QACxB,KAAK,EAAE;QACP,IAAI,CAAC,UAAC,GAAG,IAAK,OAAA,GAAG,CAAC,CAAC,CAAC,EAAN,CAAM,CAAC,CAAC;AAC5B,CAAC;AACD,kBAAe;IACb,OAAO,SAAA;IACP,GAAG,KAAA;IACH,IAAI,MAAA;IACJ,YAAY,cAAA;IACZ,YAAY,cAAA;CACb,CAAC","sourcesContent":["import knex from '../../libs/knex'\nimport {IGame} from './interfaces/Igames'\n\nfunction addGame(game: IGame.IGame): Promise<number> {\n  return knex.transaction(async (trx) => {\n    const id: number = await trx.insert(game)\n        .into('games')\n        .returning('id')\n        .then((res) => res[0]);\n    await trx.insert(\n        {\n          player_id: game.author_id,\n          player_field_number: 1,\n          game_id: id\n        })\n        .into('games_composition');\n    return id;\n  });\n}\n\nfunction gamesForCity(cityId: number): Promise<{rows: any}> {\n  return knex.raw(\n      `\n    select g.id,\n           c.title_ru as city,\n           g.address,\n           g.players,\n           g.district,\n           g.additional,\n           g.date,\n           gp.active_players as \"activePlayers\"\n    from games as g\n    join _cities c on g.city_id = c.city_id\n    left join\n      (\n        select\n          coalesce(count(game_id), 0) as active_players,\n          game_id\n        from games_composition group by game_id\n      )\n    gp on gp.game_id = g.id\n    where c.city_id = ?\n    and g.status = 'forming'\n    and g.date > CURRENT_TIMESTAMP + interval '2h'\n  `,\n      [cityId]\n  );\n}\n\n/**\n * Getter for games\n */\nfunction get(id: number) {\n  return knex.raw(\n      `select *,\n            c.title_ru as city,\n            case when gp.active_players\n              is null then 0 else gp.active_players end as active_players\n            from games g\n              join _cities c on g.city_id = c.city_id\n              left join (\n                select count(*)::int as active_players, game_id\n                from games_composition where game_id = :id\n                group by game_id) gp on gp.game_id = g.id where g.id = :id\n                  `, {id}\n  ).then((res) => res.rows[0]);\n}\n\nfunction playerInGame(gameId: number) {\n  return knex.raw(`\n        select array_agg(player_field_number)\n        from games_composition where game_id = :gameId`, {gameId})\n      .then((res)=> res.rows[0].array_agg);\n}\n/**\n * Joining or leaving the game\n */\nasync function join(\n    playerId: number,\n    gameId: number,\n    playerFieldNumber: number) {\n  if (await checkIfPositionOccupied(playerFieldNumber, gameId, playerId)) {\n    return;\n  }\n\n  const info:IGame.IInfo = {\n    playerFieldNumber,\n    gameId,\n    playerId\n  };\n  if (await checkIfAlreadyJoin(playerFieldNumber, gameId, playerId)) {\n    await leaveGame(playerFieldNumber, gameId, playerId);\n    info.event = 'leaved';\n  } else {\n    await cleanPrevPosition(gameId, playerId);\n    await joinGame(playerFieldNumber, gameId, playerId);\n    info.event = 'joined';\n  }\n  info.fieldNumbersInGame =\n    await knex.raw(`\n    select array_agg(player_field_number)\n    from games_composition where game_id = ?`, gameId)\n        .then((res)=> res.rows[0].array_agg);\n  const {count} = await countPlayersInGame(gameId);\n  return {gameId, players: count, info};\n}\n\nfunction checkIfPositionOccupied(\n    playerFieldNumber: number,\n    gameId: number,\n    playerId: number) {\n  return knex('games_composition').where({\n    player_field_number: playerFieldNumber,\n    game_id: gameId,\n  }).andWhereNot({player_id: playerId}).then((res)=>res[0]);\n}\n\nfunction checkIfAlreadyJoin(\n    playerFieldNumber: number,\n    gameId: number,\n    playerId: number) {\n  return knex('games_composition').where(\n      {\n        game_id: gameId,\n        player_id: playerId,\n        player_field_number: playerFieldNumber,\n      }).then((res) => res[0]);\n}\n\nfunction leaveGame(\n    playerFieldNumber: number,\n    gameId: number,\n    playerId: number) {\n  return knex('games_composition').where({\n    game_id: gameId,\n    player_id: playerId,\n    player_field_number: playerFieldNumber,\n  }).del();\n}\n\nfunction joinGame(\n    playerFieldNumber: number,\n    gameId: number,\n    playerId: number) {\n  return knex('games_composition').insert({\n    game_id: gameId,\n    player_id: playerId,\n    player_field_number: playerFieldNumber,\n  });\n}\n\nfunction cleanPrevPosition(gameId: number, playerId: number) {\n  return knex('games_composition').where({\n    game_id: gameId,\n    player_id: playerId,\n  }).del();\n}\nfunction countPlayersInGame(gameId: number) {\n  return knex('games_composition').\n      where({game_id: gameId}).\n      count().\n      then((res) => res[0]);\n}\nexport default {\n  addGame,\n  get,\n  join,\n  gamesForCity,\n  playerInGame,\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3ab8eec1f34e67f9e3df91a9a3716079d386b880","contentHash":"6d265550772166bceec36a9875643187d4807e5d19be308d6fd91ce6a2e30fd3"},"/app/app/db/queries/messages.ts":{"path":"/app/app/db/queries/messages.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"13":{"start":{"line":12,"column":12},"end":{"line":12,"column":104}},"14":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"15":{"start":{"line":12,"column":57},"end":{"line":12,"column":68}},"16":{"start":{"line":12,"column":69},"end":{"line":12,"column":81}},"17":{"start":{"line":13,"column":4},"end":{"line":13,"column":157}},"18":{"start":{"line":13,"column":138},"end":{"line":13,"column":150}},"19":{"start":{"line":14,"column":23},"end":{"line":14,"column":68}},"20":{"start":{"line":14,"column":45},"end":{"line":14,"column":65}},"21":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"22":{"start":{"line":16,"column":15},"end":{"line":16,"column":70}},"23":{"start":{"line":17,"column":8},"end":{"line":34,"column":66}},"24":{"start":{"line":17,"column":18},"end":{"line":34,"column":66}},"25":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"26":{"start":{"line":18,"column":160},"end":{"line":18,"column":169}},"27":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"28":{"start":{"line":19,"column":26},"end":{"line":19,"column":52}},"29":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"30":{"start":{"line":21,"column":32},"end":{"line":21,"column":39}},"31":{"start":{"line":21,"column":40},"end":{"line":21,"column":46}},"32":{"start":{"line":22,"column":24},"end":{"line":22,"column":34}},"33":{"start":{"line":22,"column":35},"end":{"line":22,"column":72}},"34":{"start":{"line":23,"column":24},"end":{"line":23,"column":34}},"35":{"start":{"line":23,"column":35},"end":{"line":23,"column":45}},"36":{"start":{"line":23,"column":46},"end":{"line":23,"column":55}},"37":{"start":{"line":23,"column":56},"end":{"line":23,"column":65}},"38":{"start":{"line":24,"column":24},"end":{"line":24,"column":41}},"39":{"start":{"line":24,"column":42},"end":{"line":24,"column":55}},"40":{"start":{"line":24,"column":56},"end":{"line":24,"column":65}},"41":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"42":{"start":{"line":26,"column":110},"end":{"line":26,"column":116}},"43":{"start":{"line":26,"column":117},"end":{"line":26,"column":126}},"44":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"45":{"start":{"line":27,"column":81},"end":{"line":27,"column":97}},"46":{"start":{"line":27,"column":98},"end":{"line":27,"column":104}},"47":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"48":{"start":{"line":28,"column":57},"end":{"line":28,"column":72}},"49":{"start":{"line":28,"column":73},"end":{"line":28,"column":80}},"50":{"start":{"line":28,"column":81},"end":{"line":28,"column":87}},"51":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"52":{"start":{"line":29,"column":47},"end":{"line":29,"column":62}},"53":{"start":{"line":29,"column":63},"end":{"line":29,"column":78}},"54":{"start":{"line":29,"column":79},"end":{"line":29,"column":85}},"55":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"56":{"start":{"line":30,"column":30},"end":{"line":30,"column":42}},"57":{"start":{"line":31,"column":20},"end":{"line":31,"column":33}},"58":{"start":{"line":31,"column":34},"end":{"line":31,"column":43}},"59":{"start":{"line":33,"column":12},"end":{"line":33,"column":39}},"60":{"start":{"line":34,"column":22},"end":{"line":34,"column":34}},"61":{"start":{"line":34,"column":35},"end":{"line":34,"column":41}},"62":{"start":{"line":34,"column":54},"end":{"line":34,"column":64}},"63":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"64":{"start":{"line":35,"column":23},"end":{"line":35,"column":35}},"65":{"start":{"line":35,"column":36},"end":{"line":35,"column":89}},"66":{"start":{"line":38,"column":0},"end":{"line":38,"column":62}},"67":{"start":{"line":39,"column":13},"end":{"line":39,"column":39}},"68":{"start":{"line":41,"column":4},"end":{"line":52,"column":7}},"69":{"start":{"line":42,"column":8},"end":{"line":51,"column":11}},"70":{"start":{"line":43,"column":12},"end":{"line":50,"column":62}},"71":{"start":{"line":50,"column":43},"end":{"line":50,"column":57}},"72":{"start":{"line":54,"column":0},"end":{"line":54,"column":34}},"73":{"start":{"line":56,"column":4},"end":{"line":65,"column":7}},"74":{"start":{"line":57,"column":8},"end":{"line":64,"column":11}},"75":{"start":{"line":58,"column":12},"end":{"line":63,"column":47}},"76":{"start":{"line":67,"column":0},"end":{"line":67,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":48},"end":{"line":11,"column":49}},"loc":{"start":{"line":11,"column":73},"end":{"line":37,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":12,"column":30},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":41},"end":{"line":12,"column":83}},"line":12},"9":{"name":"(anonymous_9)","decl":{"start":{"line":13,"column":125},"end":{"line":13,"column":126}},"loc":{"start":{"line":13,"column":136},"end":{"line":13,"column":152}},"line":13},"10":{"name":"verb","decl":{"start":{"line":14,"column":13},"end":{"line":14,"column":17}},"loc":{"start":{"line":14,"column":21},"end":{"line":14,"column":70}},"line":14},"11":{"name":"(anonymous_11)","decl":{"start":{"line":14,"column":30},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":43},"end":{"line":14,"column":67}},"line":14},"12":{"name":"step","decl":{"start":{"line":15,"column":13},"end":{"line":15,"column":17}},"loc":{"start":{"line":15,"column":22},"end":{"line":36,"column":5}},"line":15},"13":{"name":"saveMessage","decl":{"start":{"line":40,"column":9},"end":{"line":40,"column":20}},"loc":{"start":{"line":40,"column":43},"end":{"line":53,"column":1}},"line":40},"14":{"name":"(anonymous_14)","decl":{"start":{"line":41,"column":43},"end":{"line":41,"column":44}},"loc":{"start":{"line":41,"column":55},"end":{"line":52,"column":5}},"line":41},"15":{"name":"(anonymous_15)","decl":{"start":{"line":42,"column":33},"end":{"line":42,"column":34}},"loc":{"start":{"line":42,"column":47},"end":{"line":51,"column":9}},"line":42},"16":{"name":"(anonymous_16)","decl":{"start":{"line":50,"column":26},"end":{"line":50,"column":27}},"loc":{"start":{"line":50,"column":41},"end":{"line":50,"column":59}},"line":50},"17":{"name":"getMessages","decl":{"start":{"line":55,"column":9},"end":{"line":55,"column":20}},"loc":{"start":{"line":55,"column":29},"end":{"line":66,"column":1}},"line":55},"18":{"name":"(anonymous_18)","decl":{"start":{"line":56,"column":43},"end":{"line":56,"column":44}},"loc":{"start":{"line":56,"column":55},"end":{"line":65,"column":5}},"line":56},"19":{"name":"(anonymous_19)","decl":{"start":{"line":57,"column":33},"end":{"line":57,"column":34}},"loc":{"start":{"line":57,"column":47},"end":{"line":64,"column":9}},"line":57}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":19},"end":{"line":11,"column":23}},{"start":{"line":11,"column":27},"end":{"line":11,"column":43}},{"start":{"line":11,"column":48},"end":{"line":37,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"type":"if","locations":[{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},{"start":{"line":12,"column":43},"end":{"line":12,"column":68}}],"line":12},"7":{"loc":{"start":{"line":13,"column":71},"end":{"line":13,"column":153}},"type":"binary-expr","locations":[{"start":{"line":13,"column":71},"end":{"line":13,"column":99}},{"start":{"line":13,"column":104},"end":{"line":13,"column":152}}],"line":13},"8":{"loc":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"type":"if","locations":[{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},{"start":{"line":16,"column":8},"end":{"line":16,"column":70}}],"line":16},"9":{"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"type":"if","locations":[{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},{"start":{"line":18,"column":12},"end":{"line":18,"column":169}}],"line":18},"10":{"loc":{"start":{"line":18,"column":23},"end":{"line":18,"column":158}},"type":"binary-expr","locations":[{"start":{"line":18,"column":23},"end":{"line":18,"column":24}},{"start":{"line":18,"column":29},"end":{"line":18,"column":125}},{"start":{"line":18,"column":130},"end":{"line":18,"column":158}}],"line":18},"11":{"loc":{"start":{"line":18,"column":33},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":45},"end":{"line":18,"column":56}},{"start":{"line":18,"column":59},"end":{"line":18,"column":125}}],"line":18},"12":{"loc":{"start":{"line":18,"column":59},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},{"start":{"line":18,"column":119},"end":{"line":18,"column":125}}],"line":18},"13":{"loc":{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},"type":"binary-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":77}},{"start":{"line":18,"column":82},"end":{"line":18,"column":115}}],"line":18},"14":{"loc":{"start":{"line":18,"column":82},"end":{"line":18,"column":112}},"type":"binary-expr","locations":[{"start":{"line":18,"column":83},"end":{"line":18,"column":98}},{"start":{"line":18,"column":103},"end":{"line":18,"column":112}}],"line":18},"15":{"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"type":"if","locations":[{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},{"start":{"line":19,"column":12},"end":{"line":19,"column":52}}],"line":19},"16":{"loc":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"type":"switch","locations":[{"start":{"line":21,"column":16},"end":{"line":21,"column":23}},{"start":{"line":21,"column":24},"end":{"line":21,"column":46}},{"start":{"line":22,"column":16},"end":{"line":22,"column":72}},{"start":{"line":23,"column":16},"end":{"line":23,"column":65}},{"start":{"line":24,"column":16},"end":{"line":24,"column":65}},{"start":{"line":25,"column":16},"end":{"line":31,"column":43}}],"line":20},"17":{"loc":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"type":"if","locations":[{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},{"start":{"line":26,"column":20},"end":{"line":26,"column":128}}],"line":26},"18":{"loc":{"start":{"line":26,"column":24},"end":{"line":26,"column":106}},"type":"binary-expr","locations":[{"start":{"line":26,"column":24},"end":{"line":26,"column":74}},{"start":{"line":26,"column":79},"end":{"line":26,"column":90}},{"start":{"line":26,"column":94},"end":{"line":26,"column":105}}],"line":26},"19":{"loc":{"start":{"line":26,"column":42},"end":{"line":26,"column":73}},"type":"binary-expr","locations":[{"start":{"line":26,"column":42},"end":{"line":26,"column":54}},{"start":{"line":26,"column":58},"end":{"line":26,"column":73}}],"line":26},"20":{"loc":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"type":"if","locations":[{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},{"start":{"line":27,"column":20},"end":{"line":27,"column":106}}],"line":27},"21":{"loc":{"start":{"line":27,"column":24},"end":{"line":27,"column":77}},"type":"binary-expr","locations":[{"start":{"line":27,"column":24},"end":{"line":27,"column":35}},{"start":{"line":27,"column":40},"end":{"line":27,"column":42}},{"start":{"line":27,"column":47},"end":{"line":27,"column":59}},{"start":{"line":27,"column":63},"end":{"line":27,"column":75}}],"line":27},"22":{"loc":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"type":"if","locations":[{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},{"start":{"line":28,"column":20},"end":{"line":28,"column":89}}],"line":28},"23":{"loc":{"start":{"line":28,"column":24},"end":{"line":28,"column":53}},"type":"binary-expr","locations":[{"start":{"line":28,"column":24},"end":{"line":28,"column":35}},{"start":{"line":28,"column":39},"end":{"line":28,"column":53}}],"line":28},"24":{"loc":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"type":"if","locations":[{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},{"start":{"line":29,"column":20},"end":{"line":29,"column":87}}],"line":29},"25":{"loc":{"start":{"line":29,"column":24},"end":{"line":29,"column":43}},"type":"binary-expr","locations":[{"start":{"line":29,"column":24},"end":{"line":29,"column":25}},{"start":{"line":29,"column":29},"end":{"line":29,"column":43}}],"line":29},"26":{"loc":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"type":"if","locations":[{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},{"start":{"line":30,"column":20},"end":{"line":30,"column":42}}],"line":30},"27":{"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},{"start":{"line":35,"column":8},"end":{"line":35,"column":35}}],"line":35},"28":{"loc":{"start":{"line":35,"column":52},"end":{"line":35,"column":74}},"type":"cond-expr","locations":[{"start":{"line":35,"column":60},"end":{"line":35,"column":65}},{"start":{"line":35,"column":68},"end":{"line":35,"column":74}}],"line":35}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":1,"67":1,"68":0,"69":0,"70":0,"71":0,"72":1,"73":0,"74":0,"75":0,"76":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0,0,0,0,0],"17":[0,0],"18":[0,0,0],"19":[0,0],"20":[0,0],"21":[0,0,0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0]},"inputSourceMap":{"version":3,"file":"/app/app/db/queries/messages.ts","sources":["/app/app/db/queries/messages.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,wCAAkC;AAGlC,SAAe,WAAW,CAAC,IAAY,EAAE,MAAc,EAAE,MAAc;;;YAC/D,sBAAO,cAAI,CAAC,UAAU,CAAC;qBAClB,MAAM,CAAC;oBACA,IAAI,MAAA;oBACJ,OAAO,EAAE,MAAM;oBACf,OAAO,EAAE,MAAM;iBAClB,CAAC;qBACT,SAAS,CAAC,CAAC,IAAI,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;qBACjC,IAAI,CAAC,UAAC,GAAG,IAAI,OAAA,GAAG,CAAC,CAAC,CAAC,EAAN,CAAM,CAAC,EAAC;;;CAC7B;AAaG,kCAAW;AAZf,SAAe,WAAW,CAAC,MAAM;;;YAC7B,sBAAO,cAAI;qBACN,MAAM,CAAC,mBAAmB,EACnB,wBAAwB,EACxB,uBAAuB,EACvB,uBAAuB,CAAC;qBAC/B,IAAI,CAAC,UAAU,CAAC;qBAChB,QAAQ,CAAC,OAAO,EAAE,kBAAkB,EAAE,UAAU,CAAC;qBACjD,OAAO,CAAC,MAAM,EAAC,MAAM,CAAC;qBACtB,KAAK,CAAC,SAAS,EAAE,MAAM,CAAC,EAAA;;;CAChC;AAGG,kCAAW","sourcesContent":["import knex from '../../libs/knex'\nimport {IMessage} from './interfaces/Imessage'\n\nasync function saveMessage(text: string, userId: number, gameId: number): Promise<IMessage> {\n        return knex('messages')\n            .insert({\n                    text,\n                    user_id: userId,\n                    game_id: gameId\n                })\n        .returning(['id', 'text', 'date'])\n        .then((res)=> res[0]);\n}\nasync function getMessages(gameId) {\n    return knex\n        .select('messages.id as id',\n                'users.name as username',\n                'messages.date as date',\n                'messages.text as text')\n        .from('messages')\n        .leftJoin('users', 'messages.user_id', 'users.id')\n        .orderBy('date','desc')\n        .where('game_id', gameId)\n}\nexport {\n    saveMessage,\n    getMessages\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1a9a85fb4b5515679e5e246c8dbc677e4c66518a","contentHash":"32a41eeacceece0b5d993f153daa9fb97b36e93467013f3103a0db4a060109ca"},"/app/app/test/integrations/mock.user.ts":{"path":"/app/app/test/integrations/mock.user.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":7,"column":2}},"2":{"start":{"line":8,"column":0},"end":{"line":11,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/test/integrations/mock.user.ts","sources":["/app/app/test/integrations/mock.user.ts"],"names":[],"mappings":";;AAAa,QAAA,UAAU,GAAG;IACtB,IAAI,EAAE,SAAS;IACf,KAAK,EAAE,kBAAkB;IACzB,QAAQ,EAAE,QAAQ;CACrB,CAAA;AACY,QAAA,oBAAoB,GAAG;IAChC,KAAK,EAAE,kBAAkB;IACzB,QAAQ,EAAE,QAAQ;CACrB,CAAA","sourcesContent":["export const MockedUser = {\n    name: 'michael',\n    email: 'michael@test.com',\n    password: 'herman',\n}\nexport const MockedUserCredetials = {\n    email: 'michael@test.com',\n    password: 'herman',\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"59d8d5331023de3ce844f4d224a3c28634a99813","contentHash":"7a5c30febd4676aa4680d682ecf06a49d7ed85646b497ce61e51b9f2c28dba58"},"/app/app/test/integrations/games.spec.ts":{"path":"/app/app/test/integrations/games.spec.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"13":{"start":{"line":12,"column":12},"end":{"line":12,"column":104}},"14":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"15":{"start":{"line":12,"column":57},"end":{"line":12,"column":68}},"16":{"start":{"line":12,"column":69},"end":{"line":12,"column":81}},"17":{"start":{"line":13,"column":4},"end":{"line":13,"column":157}},"18":{"start":{"line":13,"column":138},"end":{"line":13,"column":150}},"19":{"start":{"line":14,"column":23},"end":{"line":14,"column":68}},"20":{"start":{"line":14,"column":45},"end":{"line":14,"column":65}},"21":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"22":{"start":{"line":16,"column":15},"end":{"line":16,"column":70}},"23":{"start":{"line":17,"column":8},"end":{"line":34,"column":66}},"24":{"start":{"line":17,"column":18},"end":{"line":34,"column":66}},"25":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"26":{"start":{"line":18,"column":160},"end":{"line":18,"column":169}},"27":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"28":{"start":{"line":19,"column":26},"end":{"line":19,"column":52}},"29":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"30":{"start":{"line":21,"column":32},"end":{"line":21,"column":39}},"31":{"start":{"line":21,"column":40},"end":{"line":21,"column":46}},"32":{"start":{"line":22,"column":24},"end":{"line":22,"column":34}},"33":{"start":{"line":22,"column":35},"end":{"line":22,"column":72}},"34":{"start":{"line":23,"column":24},"end":{"line":23,"column":34}},"35":{"start":{"line":23,"column":35},"end":{"line":23,"column":45}},"36":{"start":{"line":23,"column":46},"end":{"line":23,"column":55}},"37":{"start":{"line":23,"column":56},"end":{"line":23,"column":65}},"38":{"start":{"line":24,"column":24},"end":{"line":24,"column":41}},"39":{"start":{"line":24,"column":42},"end":{"line":24,"column":55}},"40":{"start":{"line":24,"column":56},"end":{"line":24,"column":65}},"41":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"42":{"start":{"line":26,"column":110},"end":{"line":26,"column":116}},"43":{"start":{"line":26,"column":117},"end":{"line":26,"column":126}},"44":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"45":{"start":{"line":27,"column":81},"end":{"line":27,"column":97}},"46":{"start":{"line":27,"column":98},"end":{"line":27,"column":104}},"47":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"48":{"start":{"line":28,"column":57},"end":{"line":28,"column":72}},"49":{"start":{"line":28,"column":73},"end":{"line":28,"column":80}},"50":{"start":{"line":28,"column":81},"end":{"line":28,"column":87}},"51":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"52":{"start":{"line":29,"column":47},"end":{"line":29,"column":62}},"53":{"start":{"line":29,"column":63},"end":{"line":29,"column":78}},"54":{"start":{"line":29,"column":79},"end":{"line":29,"column":85}},"55":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"56":{"start":{"line":30,"column":30},"end":{"line":30,"column":42}},"57":{"start":{"line":31,"column":20},"end":{"line":31,"column":33}},"58":{"start":{"line":31,"column":34},"end":{"line":31,"column":43}},"59":{"start":{"line":33,"column":12},"end":{"line":33,"column":39}},"60":{"start":{"line":34,"column":22},"end":{"line":34,"column":34}},"61":{"start":{"line":34,"column":35},"end":{"line":34,"column":41}},"62":{"start":{"line":34,"column":54},"end":{"line":34,"column":64}},"63":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"64":{"start":{"line":35,"column":23},"end":{"line":35,"column":35}},"65":{"start":{"line":35,"column":36},"end":{"line":35,"column":89}},"66":{"start":{"line":38,"column":0},"end":{"line":38,"column":62}},"67":{"start":{"line":39,"column":15},"end":{"line":39,"column":47}},"68":{"start":{"line":40,"column":13},"end":{"line":40,"column":30}},"69":{"start":{"line":41,"column":13},"end":{"line":41,"column":39}},"70":{"start":{"line":42,"column":10},"end":{"line":42,"column":30}},"71":{"start":{"line":43,"column":18},"end":{"line":43,"column":40}},"72":{"start":{"line":44,"column":11},"end":{"line":44,"column":41}},"73":{"start":{"line":45,"column":11},"end":{"line":45,"column":26}},"74":{"start":{"line":46,"column":15},"end":{"line":46,"column":35}},"75":{"start":{"line":47,"column":0},"end":{"line":47,"column":19}},"76":{"start":{"line":48,"column":12},"end":{"line":48,"column":28}},"77":{"start":{"line":49,"column":18},"end":{"line":49,"column":40}},"78":{"start":{"line":50,"column":0},"end":{"line":198,"column":3}},"79":{"start":{"line":51,"column":4},"end":{"line":60,"column":7}},"80":{"start":{"line":52,"column":8},"end":{"line":59,"column":11}},"81":{"start":{"line":55,"column":12},"end":{"line":55,"column":51}},"82":{"start":{"line":58,"column":12},"end":{"line":58,"column":45}},"83":{"start":{"line":61,"column":4},"end":{"line":64,"column":7}},"84":{"start":{"line":62,"column":8},"end":{"line":62,"column":24}},"85":{"start":{"line":63,"column":8},"end":{"line":63,"column":49}},"86":{"start":{"line":65,"column":4},"end":{"line":86,"column":11}},"87":{"start":{"line":65,"column":58},"end":{"line":86,"column":7}},"88":{"start":{"line":67,"column":8},"end":{"line":85,"column":11}},"89":{"start":{"line":68,"column":12},"end":{"line":84,"column":13}},"90":{"start":{"line":69,"column":24},"end":{"line":79,"column":24}},"91":{"start":{"line":81,"column":20},"end":{"line":81,"column":36}},"92":{"start":{"line":82,"column":20},"end":{"line":82,"column":56}},"93":{"start":{"line":83,"column":20},"end":{"line":83,"column":42}},"94":{"start":{"line":87,"column":4},"end":{"line":132,"column":11}},"95":{"start":{"line":87,"column":50},"end":{"line":132,"column":7}},"96":{"start":{"line":89,"column":8},"end":{"line":131,"column":11}},"97":{"start":{"line":90,"column":12},"end":{"line":130,"column":13}},"98":{"start":{"line":92,"column":20},"end":{"line":92,"column":108}},"99":{"start":{"line":92,"column":92},"end":{"line":92,"column":104}},"100":{"start":{"line":93,"column":20},"end":{"line":96,"column":59}},"101":{"start":{"line":98,"column":20},"end":{"line":98,"column":30}},"102":{"start":{"line":99,"column":20},"end":{"line":102,"column":70}},"103":{"start":{"line":104,"column":20},"end":{"line":104,"column":30}},"104":{"start":{"line":105,"column":20},"end":{"line":109,"column":69}},"105":{"start":{"line":111,"column":20},"end":{"line":111,"column":36}},"106":{"start":{"line":112,"column":20},"end":{"line":112,"column":83}},"107":{"start":{"line":113,"column":20},"end":{"line":113,"column":93}},"108":{"start":{"line":114,"column":20},"end":{"line":125,"column":28}},"109":{"start":{"line":127,"column":20},"end":{"line":127,"column":43}},"110":{"start":{"line":128,"column":20},"end":{"line":128,"column":63}},"111":{"start":{"line":129,"column":20},"end":{"line":129,"column":42}},"112":{"start":{"line":133,"column":4},"end":{"line":183,"column":11}},"113":{"start":{"line":133,"column":41},"end":{"line":183,"column":7}},"114":{"start":{"line":135,"column":8},"end":{"line":182,"column":11}},"115":{"start":{"line":136,"column":12},"end":{"line":181,"column":13}},"116":{"start":{"line":138,"column":20},"end":{"line":138,"column":108}},"117":{"start":{"line":138,"column":92},"end":{"line":138,"column":104}},"118":{"start":{"line":139,"column":20},"end":{"line":142,"column":59}},"119":{"start":{"line":144,"column":20},"end":{"line":144,"column":30}},"120":{"start":{"line":145,"column":20},"end":{"line":148,"column":70}},"121":{"start":{"line":150,"column":20},"end":{"line":150,"column":30}},"122":{"start":{"line":151,"column":20},"end":{"line":155,"column":69}},"123":{"start":{"line":157,"column":20},"end":{"line":157,"column":36}},"124":{"start":{"line":158,"column":20},"end":{"line":158,"column":83}},"125":{"start":{"line":159,"column":20},"end":{"line":159,"column":93}},"126":{"start":{"line":160,"column":20},"end":{"line":171,"column":28}},"127":{"start":{"line":173,"column":20},"end":{"line":173,"column":30}},"128":{"start":{"line":174,"column":20},"end":{"line":176,"column":45}},"129":{"start":{"line":178,"column":20},"end":{"line":178,"column":39}},"130":{"start":{"line":179,"column":20},"end":{"line":179,"column":70}},"131":{"start":{"line":180,"column":20},"end":{"line":180,"column":42}},"132":{"start":{"line":184,"column":4},"end":{"line":197,"column":11}},"133":{"start":{"line":184,"column":42},"end":{"line":197,"column":7}},"134":{"start":{"line":186,"column":8},"end":{"line":196,"column":11}},"135":{"start":{"line":187,"column":12},"end":{"line":195,"column":13}},"136":{"start":{"line":188,"column":24},"end":{"line":190,"column":66}},"137":{"start":{"line":192,"column":20},"end":{"line":192,"column":41}},"138":{"start":{"line":193,"column":20},"end":{"line":193,"column":61}},"139":{"start":{"line":194,"column":20},"end":{"line":194,"column":42}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":48},"end":{"line":11,"column":49}},"loc":{"start":{"line":11,"column":73},"end":{"line":37,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":12,"column":30},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":41},"end":{"line":12,"column":83}},"line":12},"9":{"name":"(anonymous_9)","decl":{"start":{"line":13,"column":125},"end":{"line":13,"column":126}},"loc":{"start":{"line":13,"column":136},"end":{"line":13,"column":152}},"line":13},"10":{"name":"verb","decl":{"start":{"line":14,"column":13},"end":{"line":14,"column":17}},"loc":{"start":{"line":14,"column":21},"end":{"line":14,"column":70}},"line":14},"11":{"name":"(anonymous_11)","decl":{"start":{"line":14,"column":30},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":43},"end":{"line":14,"column":67}},"line":14},"12":{"name":"step","decl":{"start":{"line":15,"column":13},"end":{"line":15,"column":17}},"loc":{"start":{"line":15,"column":22},"end":{"line":36,"column":5}},"line":15},"13":{"name":"(anonymous_13)","decl":{"start":{"line":50,"column":27},"end":{"line":50,"column":28}},"loc":{"start":{"line":50,"column":39},"end":{"line":198,"column":1}},"line":50},"14":{"name":"(anonymous_14)","decl":{"start":{"line":51,"column":15},"end":{"line":51,"column":16}},"loc":{"start":{"line":51,"column":27},"end":{"line":60,"column":5}},"line":51},"15":{"name":"(anonymous_15)","decl":{"start":{"line":54,"column":18},"end":{"line":54,"column":19}},"loc":{"start":{"line":54,"column":30},"end":{"line":56,"column":9}},"line":54},"16":{"name":"(anonymous_16)","decl":{"start":{"line":57,"column":18},"end":{"line":57,"column":19}},"loc":{"start":{"line":57,"column":30},"end":{"line":59,"column":9}},"line":57},"17":{"name":"(anonymous_17)","decl":{"start":{"line":61,"column":14},"end":{"line":61,"column":15}},"loc":{"start":{"line":61,"column":26},"end":{"line":64,"column":5}},"line":61},"18":{"name":"(anonymous_18)","decl":{"start":{"line":65,"column":44},"end":{"line":65,"column":45}},"loc":{"start":{"line":65,"column":56},"end":{"line":86,"column":9}},"line":65},"19":{"name":"(anonymous_19)","decl":{"start":{"line":65,"column":99},"end":{"line":65,"column":100}},"loc":{"start":{"line":65,"column":111},"end":{"line":86,"column":5}},"line":65},"20":{"name":"(anonymous_20)","decl":{"start":{"line":67,"column":33},"end":{"line":67,"column":34}},"loc":{"start":{"line":67,"column":47},"end":{"line":85,"column":9}},"line":67},"21":{"name":"(anonymous_21)","decl":{"start":{"line":87,"column":36},"end":{"line":87,"column":37}},"loc":{"start":{"line":87,"column":48},"end":{"line":132,"column":9}},"line":87},"22":{"name":"(anonymous_22)","decl":{"start":{"line":87,"column":91},"end":{"line":87,"column":92}},"loc":{"start":{"line":87,"column":103},"end":{"line":132,"column":5}},"line":87},"23":{"name":"(anonymous_23)","decl":{"start":{"line":89,"column":33},"end":{"line":89,"column":34}},"loc":{"start":{"line":89,"column":47},"end":{"line":131,"column":9}},"line":89},"24":{"name":"fakeFn","decl":{"start":{"line":92,"column":81},"end":{"line":92,"column":87}},"loc":{"start":{"line":92,"column":90},"end":{"line":92,"column":106}},"line":92},"25":{"name":"(anonymous_25)","decl":{"start":{"line":133,"column":27},"end":{"line":133,"column":28}},"loc":{"start":{"line":133,"column":39},"end":{"line":183,"column":9}},"line":133},"26":{"name":"(anonymous_26)","decl":{"start":{"line":133,"column":82},"end":{"line":133,"column":83}},"loc":{"start":{"line":133,"column":94},"end":{"line":183,"column":5}},"line":133},"27":{"name":"(anonymous_27)","decl":{"start":{"line":135,"column":33},"end":{"line":135,"column":34}},"loc":{"start":{"line":135,"column":47},"end":{"line":182,"column":9}},"line":135},"28":{"name":"fakeFn","decl":{"start":{"line":138,"column":81},"end":{"line":138,"column":87}},"loc":{"start":{"line":138,"column":90},"end":{"line":138,"column":106}},"line":138},"29":{"name":"(anonymous_29)","decl":{"start":{"line":184,"column":28},"end":{"line":184,"column":29}},"loc":{"start":{"line":184,"column":40},"end":{"line":197,"column":9}},"line":184},"30":{"name":"(anonymous_30)","decl":{"start":{"line":184,"column":83},"end":{"line":184,"column":84}},"loc":{"start":{"line":184,"column":95},"end":{"line":197,"column":5}},"line":184},"31":{"name":"(anonymous_31)","decl":{"start":{"line":186,"column":33},"end":{"line":186,"column":34}},"loc":{"start":{"line":186,"column":47},"end":{"line":196,"column":9}},"line":186}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":19},"end":{"line":11,"column":23}},{"start":{"line":11,"column":27},"end":{"line":11,"column":43}},{"start":{"line":11,"column":48},"end":{"line":37,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"type":"if","locations":[{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},{"start":{"line":12,"column":43},"end":{"line":12,"column":68}}],"line":12},"7":{"loc":{"start":{"line":13,"column":71},"end":{"line":13,"column":153}},"type":"binary-expr","locations":[{"start":{"line":13,"column":71},"end":{"line":13,"column":99}},{"start":{"line":13,"column":104},"end":{"line":13,"column":152}}],"line":13},"8":{"loc":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"type":"if","locations":[{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},{"start":{"line":16,"column":8},"end":{"line":16,"column":70}}],"line":16},"9":{"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"type":"if","locations":[{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},{"start":{"line":18,"column":12},"end":{"line":18,"column":169}}],"line":18},"10":{"loc":{"start":{"line":18,"column":23},"end":{"line":18,"column":158}},"type":"binary-expr","locations":[{"start":{"line":18,"column":23},"end":{"line":18,"column":24}},{"start":{"line":18,"column":29},"end":{"line":18,"column":125}},{"start":{"line":18,"column":130},"end":{"line":18,"column":158}}],"line":18},"11":{"loc":{"start":{"line":18,"column":33},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":45},"end":{"line":18,"column":56}},{"start":{"line":18,"column":59},"end":{"line":18,"column":125}}],"line":18},"12":{"loc":{"start":{"line":18,"column":59},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},{"start":{"line":18,"column":119},"end":{"line":18,"column":125}}],"line":18},"13":{"loc":{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},"type":"binary-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":77}},{"start":{"line":18,"column":82},"end":{"line":18,"column":115}}],"line":18},"14":{"loc":{"start":{"line":18,"column":82},"end":{"line":18,"column":112}},"type":"binary-expr","locations":[{"start":{"line":18,"column":83},"end":{"line":18,"column":98}},{"start":{"line":18,"column":103},"end":{"line":18,"column":112}}],"line":18},"15":{"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"type":"if","locations":[{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},{"start":{"line":19,"column":12},"end":{"line":19,"column":52}}],"line":19},"16":{"loc":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"type":"switch","locations":[{"start":{"line":21,"column":16},"end":{"line":21,"column":23}},{"start":{"line":21,"column":24},"end":{"line":21,"column":46}},{"start":{"line":22,"column":16},"end":{"line":22,"column":72}},{"start":{"line":23,"column":16},"end":{"line":23,"column":65}},{"start":{"line":24,"column":16},"end":{"line":24,"column":65}},{"start":{"line":25,"column":16},"end":{"line":31,"column":43}}],"line":20},"17":{"loc":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"type":"if","locations":[{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},{"start":{"line":26,"column":20},"end":{"line":26,"column":128}}],"line":26},"18":{"loc":{"start":{"line":26,"column":24},"end":{"line":26,"column":106}},"type":"binary-expr","locations":[{"start":{"line":26,"column":24},"end":{"line":26,"column":74}},{"start":{"line":26,"column":79},"end":{"line":26,"column":90}},{"start":{"line":26,"column":94},"end":{"line":26,"column":105}}],"line":26},"19":{"loc":{"start":{"line":26,"column":42},"end":{"line":26,"column":73}},"type":"binary-expr","locations":[{"start":{"line":26,"column":42},"end":{"line":26,"column":54}},{"start":{"line":26,"column":58},"end":{"line":26,"column":73}}],"line":26},"20":{"loc":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"type":"if","locations":[{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},{"start":{"line":27,"column":20},"end":{"line":27,"column":106}}],"line":27},"21":{"loc":{"start":{"line":27,"column":24},"end":{"line":27,"column":77}},"type":"binary-expr","locations":[{"start":{"line":27,"column":24},"end":{"line":27,"column":35}},{"start":{"line":27,"column":40},"end":{"line":27,"column":42}},{"start":{"line":27,"column":47},"end":{"line":27,"column":59}},{"start":{"line":27,"column":63},"end":{"line":27,"column":75}}],"line":27},"22":{"loc":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"type":"if","locations":[{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},{"start":{"line":28,"column":20},"end":{"line":28,"column":89}}],"line":28},"23":{"loc":{"start":{"line":28,"column":24},"end":{"line":28,"column":53}},"type":"binary-expr","locations":[{"start":{"line":28,"column":24},"end":{"line":28,"column":35}},{"start":{"line":28,"column":39},"end":{"line":28,"column":53}}],"line":28},"24":{"loc":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"type":"if","locations":[{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},{"start":{"line":29,"column":20},"end":{"line":29,"column":87}}],"line":29},"25":{"loc":{"start":{"line":29,"column":24},"end":{"line":29,"column":43}},"type":"binary-expr","locations":[{"start":{"line":29,"column":24},"end":{"line":29,"column":25}},{"start":{"line":29,"column":29},"end":{"line":29,"column":43}}],"line":29},"26":{"loc":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"type":"if","locations":[{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},{"start":{"line":30,"column":20},"end":{"line":30,"column":42}}],"line":30},"27":{"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},{"start":{"line":35,"column":8},"end":{"line":35,"column":35}}],"line":35},"28":{"loc":{"start":{"line":35,"column":52},"end":{"line":35,"column":74}},"type":"cond-expr","locations":[{"start":{"line":35,"column":60},"end":{"line":35,"column":65}},{"start":{"line":35,"column":68},"end":{"line":35,"column":74}}],"line":35},"29":{"loc":{"start":{"line":68,"column":12},"end":{"line":84,"column":13}},"type":"switch","locations":[{"start":{"line":69,"column":16},"end":{"line":79,"column":24}},{"start":{"line":80,"column":16},"end":{"line":83,"column":42}}],"line":68},"30":{"loc":{"start":{"line":90,"column":12},"end":{"line":130,"column":13}},"type":"switch","locations":[{"start":{"line":91,"column":16},"end":{"line":96,"column":59}},{"start":{"line":97,"column":16},"end":{"line":102,"column":70}},{"start":{"line":103,"column":16},"end":{"line":109,"column":69}},{"start":{"line":110,"column":16},"end":{"line":125,"column":28}},{"start":{"line":126,"column":16},"end":{"line":129,"column":42}}],"line":90},"31":{"loc":{"start":{"line":136,"column":12},"end":{"line":181,"column":13}},"type":"switch","locations":[{"start":{"line":137,"column":16},"end":{"line":142,"column":59}},{"start":{"line":143,"column":16},"end":{"line":148,"column":70}},{"start":{"line":149,"column":16},"end":{"line":155,"column":69}},{"start":{"line":156,"column":16},"end":{"line":171,"column":28}},{"start":{"line":172,"column":16},"end":{"line":176,"column":45}},{"start":{"line":177,"column":16},"end":{"line":180,"column":42}}],"line":136},"32":{"loc":{"start":{"line":187,"column":12},"end":{"line":195,"column":13}},"type":"switch","locations":[{"start":{"line":188,"column":16},"end":{"line":190,"column":66}},{"start":{"line":191,"column":16},"end":{"line":194,"column":42}}],"line":187}},"s":{"0":1,"1":11,"2":11,"3":4,"4":11,"5":11,"6":0,"7":0,"8":0,"9":0,"10":15,"11":4,"12":1,"13":4,"14":11,"15":0,"16":11,"17":4,"18":0,"19":12,"20":15,"21":15,"22":0,"23":15,"24":30,"25":30,"26":0,"27":30,"28":0,"29":30,"30":15,"31":15,"32":11,"33":11,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":4,"42":4,"43":4,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":15,"60":0,"61":0,"62":30,"63":4,"64":0,"65":4,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1,"72":1,"73":1,"74":1,"75":1,"76":1,"77":1,"78":1,"79":1,"80":4,"81":4,"82":4,"83":1,"84":4,"85":4,"86":1,"87":1,"88":1,"89":2,"90":1,"91":1,"92":1,"93":1,"94":1,"95":1,"96":1,"97":5,"98":1,"99":1,"100":1,"101":1,"102":1,"103":1,"104":1,"105":1,"106":1,"107":1,"108":1,"109":1,"110":1,"111":1,"112":1,"113":1,"114":1,"115":6,"116":1,"117":1,"118":1,"119":1,"120":1,"121":1,"122":1,"123":1,"124":1,"125":1,"126":1,"127":1,"128":1,"129":1,"130":1,"131":1,"132":1,"133":1,"134":1,"135":2,"136":1,"137":1,"138":1,"139":1},"f":{"0":4,"1":11,"2":11,"3":4,"4":11,"5":0,"6":15,"7":4,"8":11,"9":0,"10":12,"11":15,"12":15,"13":1,"14":4,"15":4,"16":4,"17":4,"18":1,"19":1,"20":2,"21":1,"22":1,"23":5,"24":1,"25":1,"26":1,"27":6,"28":1,"29":1,"30":1,"31":2},"b":{"0":[1,1,1],"1":[0,11],"2":[4,4],"3":[4,11],"4":[4,4],"5":[1,1,1],"6":[0,11],"7":[4,4],"8":[0,15],"9":[0,30],"10":[30,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,30],"16":[15,15,11,0,0,4],"17":[4,0],"18":[4,4,4],"19":[4,0],"20":[0,0],"21":[0,0,0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,4],"28":[4,0],"29":[1,1],"30":[1,1,1,1,1],"31":[1,1,1,1,1,1],"32":[1,1]},"inputSourceMap":{"version":3,"file":"/app/app/test/integrations/games.spec.ts","sources":["/app/app/test/integrations/games.spec.ts"],"names":[],"mappings":"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","sourcesContent":["import {encrypt} from '../../services/crypto'\n\nconst assert = require('assert')\nimport knex from '../../libs/knex'\nimport app from '../../../'\nimport {MockedUser, MockedUserCredetials} from './mock.user'\nimport * as auth from '../../services/auth'\nconst chai = require('chai')\nconst chaiHttp = require('chai-http')\nchai.use(chaiHttp)\nconst sinon = require('sinon')\nimport {filterRefreshToken, filterAuthToken} from './auth.spec';\n\ndescribe('routes : games', () => {\n    beforeEach(() => {\n        return knex.migrate\n            .rollback()\n            .then(() => {\n              return knex.migrate.latest();\n            })\n            .then(() => {\n              return knex.seed.run();\n            })\n    })\n\n    afterEach(() => {\n        sinon.restore()\n        return knex.migrate.rollback();\n    })\n\n    it('should not add game if not logged', async () => {\n        const res = await chai\n            .request(app)\n            .post('/game')\n            .send({\n                additional: '',\n                address: 'dummy address',\n                city: 'Kiev',\n                city_id: 1,\n                date: '2019-02-09T22:22',\n                players: 5,\n            })\n        assert.strictEqual(res.status, 401)\n    })\n    it('should add game if logged', async () => {\n\n        sinon.stub(auth, 'sendConfirmationEmail').callsFake(function fakeFn() {return true})\n\n        await chai\n            .request(app)\n            .post('/auth/registration')\n            .send(MockedUser)\n\n        await chai\n            .request(app)\n            .get(`/auth/confirm-email/${encrypt(MockedUser.email)}`)\n            .set('content-type', 'application/json')\n\n        const res = await chai\n            .request(app)\n            .post(`/auth/login`)\n            .set('content-type', 'application/json')\n            .send(MockedUserCredetials)\n\n        const token = filterAuthToken(res.headers['set-cookie'])\n        const refreshToken = filterRefreshToken(res.headers['set-cookie'])\n\n        const addGameRes = await chai\n            .request(app)\n            .post('/game')\n            .set('Cookie', token+';'+refreshToken)\n            .send({\n                additional: '',\n                address: 'dummy address',\n                city: 'Kiev',\n                city_id: 1,\n                date: '2019-02-09T22:22',\n                players: 5,\n            })\n        assert.strictEqual(addGameRes.status, 201)\n    })\n\n  it('should load game', async () => {\n      sinon.stub(auth, 'sendConfirmationEmail').callsFake(function fakeFn() {return true})\n\n      await chai\n          .request(app)\n          .post('/auth/registration')\n          .send(MockedUser)\n\n      await chai\n          .request(app)\n          .get(`/auth/confirm-email/${encrypt(MockedUser.email)}`)\n          .set('content-type', 'application/json')\n\n      const res = await chai\n          .request(app)\n          .post(`/auth/login`)\n          .set('content-type', 'application/json')\n          .send(MockedUserCredetials)\n\n      const token = filterAuthToken(res.headers['set-cookie'])\n      const refreshToken = filterRefreshToken(res.headers['set-cookie'])\n\n      await chai\n          .request(app)\n          .post('/game')\n          .set('Cookie', token+';'+refreshToken)\n          .send({\n              additional: '',\n              address: 'dummy address',\n              city: 'Kiev',\n              city_id: 1,\n              date: '2019-02-09T22:22',\n              players: 5,\n          })\n\n    const resGet = await chai\n        .request(app)\n        .get('/game/1')\n\n    assert.strictEqual(resGet.body.status, 'forming');\n  });\n\n  it('should list games', async () => {\n      const response = await chai.request(app)\n          .get('/cities/getByName/kie')\n          .set('content-type', 'application/json')\n      assert.strictEqual(response.status, 200);\n  });\n\n});\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e2d08dff167d943ceed30b1fa7e1b33f5af11540","contentHash":"9ac765b4b0777dfac528d58e499189cd668d1be33d013e5a7ca5f80be0e9bf25"},"/app/app/test/unit/crypto.spec.ts":{"path":"/app/app/test/unit/crypto.spec.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":13},"end":{"line":3,"column":35}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":47}},"3":{"start":{"line":5,"column":0},"end":{"line":10,"column":3}},"4":{"start":{"line":6,"column":4},"end":{"line":9,"column":7}},"5":{"start":{"line":7,"column":20},"end":{"line":7,"column":34}},"6":{"start":{"line":8,"column":8},"end":{"line":8,"column":74}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":27},"end":{"line":5,"column":28}},"loc":{"start":{"line":5,"column":39},"end":{"line":10,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":30},"end":{"line":6,"column":31}},"loc":{"start":{"line":6,"column":42},"end":{"line":9,"column":5}},"line":6}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1},"f":{"0":1,"1":1},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/test/unit/crypto.spec.ts","sources":["/app/app/test/unit/crypto.spec.ts"],"names":[],"mappings":";;AAAA,IAAM,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC;AACtC,gDAAuD;AAEvD,QAAQ,CAAC,gBAAgB,EAAE;IACzB,EAAE,CAAC,qBAAqB,EAAE;QACxB,IAAM,KAAK,GAAG,cAAc,CAAC;QAC7B,MAAM,CAAC,gBAAO,CAAC,gBAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;IAClD,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["const expect = require('chai').expect;\nimport {encrypt, decrypt} from '../../services/crypto';\n\ndescribe('routes : games', () => {\n  it('crypto successfully', () => {\n    const email = 'test@test.ua';\n    expect(decrypt(encrypt(email))).to.equal(email);\n  });\n});\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9f94f04a88dceb7eb3dbf04200458832db9febbe","contentHash":"14065f63c311536440434b8acea06eae3103c02a8265c214d43adac008861d3c"},"/app/app/test/unit/footbal-field.spec.ts":{"path":"/app/app/test/unit/footbal-field.spec.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":21},"end":{"line":3,"column":59}},"2":{"start":{"line":4,"column":13},"end":{"line":4,"column":35}},"3":{"start":{"line":5,"column":0},"end":{"line":14,"column":3}},"4":{"start":{"line":6,"column":4},"end":{"line":13,"column":7}},"5":{"start":{"line":7,"column":27},"end":{"line":7,"column":57}},"6":{"start":{"line":8,"column":8},"end":{"line":8,"column":59}},"7":{"start":{"line":9,"column":8},"end":{"line":9,"column":54}},"8":{"start":{"line":10,"column":8},"end":{"line":10,"column":59}},"9":{"start":{"line":11,"column":8},"end":{"line":11,"column":54}},"10":{"start":{"line":12,"column":8},"end":{"line":12,"column":61}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":27},"end":{"line":5,"column":28}},"loc":{"start":{"line":5,"column":39},"end":{"line":14,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":37},"end":{"line":6,"column":38}},"loc":{"start":{"line":6,"column":49},"end":{"line":13,"column":5}},"line":6}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1},"f":{"0":1,"1":1},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/test/unit/footbal-field.spec.ts","sources":["/app/app/test/unit/footbal-field.spec.ts"],"names":[],"mappings":";;AAAA,4DAAsD;AACtD,IAAM,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC;AACtC,QAAQ,CAAC,gBAAgB,EAAE;IACzB,EAAE,CAAC,4BAA4B,EAAE;QAC/B,IAAI,YAAY,GAAG,IAAI,sBAAY,CAAC,EAAE,CAAC,CAAC;QACxC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,YAAY,EAAE,CAAC,CAAC;QACnD,YAAY,GAAG,IAAI,sBAAY,CAAC,EAAE,CAAC,CAAC;QACpC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,YAAY,EAAE,CAAC,CAAC;QACnD,YAAY,GAAG,IAAI,sBAAY,CAAC,EAAE,CAAC,CAAC;QACpC,MAAM,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,YAAY,EAAE,CAAC,CAAC;IACvD,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["import FootballTeem from '../../services/footbal-teem'\nconst expect = require('chai').expect;\ndescribe('routes : games', () => {\n  it('split players on two teems', () => {\n    let footballTeem = new FootballTeem(11);\n    expect([6, 5]).to.eql(footballTeem.splitOnTeems());\n    footballTeem = new FootballTeem(10);\n    expect([5, 5]).to.eql(footballTeem.splitOnTeems());\n    footballTeem = new FootballTeem(21);\n    expect([11, 10]).to.eql(footballTeem.splitOnTeems());\n  });\n});\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5c158f831bfd5623646aae7258f1b4abfe170146","contentHash":"301affacd84708a20e4a034a4381fdb383ce71fd68d497ba60889f8d997c391a"},"/app/app/services/footbal-teem.ts":{"path":"/app/app/services/footbal-teem.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":6,"column":34},"end":{"line":30,"column":3}},"2":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"3":{"start":{"line":12,"column":12},"end":{"line":12,"column":71}},"4":{"start":{"line":14,"column":8},"end":{"line":14,"column":31}},"5":{"start":{"line":19,"column":4},"end":{"line":28,"column":6}},"6":{"start":{"line":20,"column":8},"end":{"line":27,"column":9}},"7":{"start":{"line":21,"column":29},"end":{"line":21,"column":51}},"8":{"start":{"line":22,"column":12},"end":{"line":22,"column":48}},"9":{"start":{"line":25,"column":30},"end":{"line":25,"column":46}},"10":{"start":{"line":26,"column":12},"end":{"line":26,"column":46}},"11":{"start":{"line":29,"column":4},"end":{"line":29,"column":24}},"12":{"start":{"line":31,"column":0},"end":{"line":31,"column":31}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":34},"end":{"line":6,"column":35}},"loc":{"start":{"line":6,"column":46},"end":{"line":30,"column":1}},"line":6},"1":{"name":"FootballTeem","decl":{"start":{"line":10,"column":13},"end":{"line":10,"column":25}},"loc":{"start":{"line":10,"column":35},"end":{"line":15,"column":5}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":19,"column":42},"end":{"line":19,"column":43}},"loc":{"start":{"line":19,"column":54},"end":{"line":28,"column":5}},"line":19}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"type":"if","locations":[{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},{"start":{"line":11,"column":8},"end":{"line":13,"column":9}}],"line":11},"1":{"loc":{"start":{"line":11,"column":12},"end":{"line":11,"column":41}},"type":"binary-expr","locations":[{"start":{"line":11,"column":12},"end":{"line":11,"column":26}},{"start":{"line":11,"column":30},"end":{"line":11,"column":41}}],"line":11},"2":{"loc":{"start":{"line":20,"column":8},"end":{"line":27,"column":9}},"type":"if","locations":[{"start":{"line":20,"column":8},"end":{"line":27,"column":9}},{"start":{"line":20,"column":8},"end":{"line":27,"column":9}}],"line":20}},"s":{"0":1,"1":1,"2":3,"3":0,"4":3,"5":1,"6":3,"7":2,"8":2,"9":1,"10":1,"11":1,"12":1},"f":{"0":1,"1":3,"2":3},"b":{"0":[0,3],"1":[3,3],"2":[2,1]},"inputSourceMap":{"version":3,"file":"/app/app/services/footbal-teem.ts","sources":["/app/app/services/footbal-teem.ts"],"names":[],"mappings":";;AAAA;;GAEG;AACH;IAGE;;OAEG;IACH,sBAAY,OAAe;QACzB,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,OAAO,GAAG,CAAC,EAAE;YACjC,MAAM,KAAK,CAAC,6CAA6C,CAAC,CAAC;SAC5D;QACD,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IACzB,CAAC;IAED;;OAEG;IACH,mCAAY,GAAZ;QACE,IAAI,IAAI,CAAC,OAAO,GAAG,CAAC,EAAE;YACpB,IAAM,UAAU,GAAG,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YAC1C,OAAO,CAAC,UAAU,GAAG,CAAC,EAAE,UAAU,CAAC,CAAC;SACrC;aAAM;YACL,IAAM,WAAW,GAAG,IAAI,CAAC,OAAO,GAAC,CAAC,CAAC;YACnC,OAAO,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC;SACnC;IACH,CAAC;IACH,mBAAC;AAAD,CAAC,AAzBD,IAyBC;AACD,kBAAe,YAAY,CAAA","sourcesContent":["/**\n * Football teem service\n */\nclass FootballTeem {\n  players: number;\n\n  /**\n   * Init amount of players\n   */\n  constructor(players: number) {\n    if (isNaN(players) || players < 0) {\n      throw Error('Invalid parameter, should be number and > 0');\n    }\n    this.players = players;\n  }\n\n  /**\n   * Calculate number of player for each teem\n   */\n  splitOnTeems(): Array<number> {\n    if (this.players % 2) {\n      const oddPlayers = (this.players - 1) / 2;\n      return [oddPlayers + 1, oddPlayers];\n    } else {\n      const evenPlayers = this.players/2;\n      return [evenPlayers, evenPlayers];\n    }\n  }\n}\nexport default FootballTeem\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b18a17365fc4b6883532710f1af17fce60d72af1","contentHash":"d0652d7b78c3a451784c7f2b4ac2020ff9f63059d25224dffe9cf7ba8b517590"},"/app/app/db/migrations/20180203133838_cities.ts":{"path":"/app/app/db/migrations/20180203133838_cities.ts","statementMap":{"0":{"start":{"line":1,"column":0},"end":{"line":3,"column":2}},"1":{"start":{"line":2,"column":4},"end":{"line":2,"column":3337}},"2":{"start":{"line":4,"column":0},"end":{"line":6,"column":2}},"3":{"start":{"line":5,"column":4},"end":{"line":5,"column":143}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":13},"end":{"line":1,"column":14}},"loc":{"start":{"line":1,"column":38},"end":{"line":3,"column":1}},"line":1},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":15},"end":{"line":4,"column":16}},"loc":{"start":{"line":4,"column":40},"end":{"line":6,"column":1}},"line":4}},"branchMap":{},"s":{"0":1,"1":9,"2":1,"3":9},"f":{"0":9,"1":9},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/db/migrations/20180203133838_cities.ts","sources":["/app/app/db/migrations/20180203133838_cities.ts"],"names":[],"mappings":"AAAA,OAAO,CAAC,EAAE,GAAG,UAAS,IAAI,EAAE,OAAO;IACjC,OAAO,IAAI,CAAC,GAAG,CAAC,mvGA2Gf,CAAC,CAAC;AACL,CAAC,CAAC;AACF,OAAO,CAAC,IAAI,GAAG,UAAS,IAAI,EAAE,OAAO;IACnC,OAAO,IAAI,CAAC,GAAG,CAAC,yHAIf,CAAC,CAAC;AACL,CAAC,CAAC","sourcesContent":["exports.up = function(knex, Promise) {\n  return knex.raw(`\n    CREATE TABLE IF NOT EXISTS _countries(\n    country_id integer NOT NULL,\n    title_ru character varying(60),\n    title_ua character varying(60),\n    title_be character varying(60),\n    title_en character varying(60),\n    title_es character varying(60),\n    title_pt character varying(60),\n    title_de character varying(60),\n    title_fr character varying(60),\n    title_it character varying(60),\n    title_pl character varying(60),\n    title_ja character varying(60),\n    title_lt character varying(60),\n    title_lv character varying(60),\n    title_cz character varying(60),\n    CONSTRAINT pk_country_cid PRIMARY KEY (country_id)\n  \n  );\n  \n  CREATE TABLE IF NOT EXISTS _regions(\n    region_id integer NOT NULL,\n    country_id integer NOT NULL,\n    title_ru character varying(150),\n    title_ua character varying(150),\n    title_be character varying(150),\n    title_en character varying(150),\n    title_es character varying(150),\n    title_pt character varying(150),\n    title_de character varying(150),\n    title_fr character varying(150),\n    title_it character varying(150),\n    title_pl character varying(150),\n    title_ja character varying(150),\n    title_lt character varying(150),\n    title_lv character varying(150),\n    title_cz character varying(150),\n    CONSTRAINT pk_region_rid PRIMARY KEY (region_id)\n  \n  );\n  \n  CREATE TABLE IF NOT EXISTS _cities\n  (\n    city_id    integer NOT NULL,\n    country_id integer NOT NULL,\n    important  boolean NOT NULL,\n    region_id  integer,\n\n    title_ru   character varying(150),\n    area_ru    character varying(150),\n    region_ru  character varying(150),\n\n    title_ua   character varying(150),\n    area_ua    character varying(150),\n    region_ua  character varying(150),\n\n    title_be   character varying(150),\n    area_be    character varying(150),\n    region_be  character varying(150),\n\n    title_en   character varying(150),\n    area_en    character varying(150),\n    region_en  character varying(150),\n\n    title_es   character varying(150),\n    area_es    character varying(150),\n    region_es  character varying(150),\n\n    title_pt   character varying(150),\n    area_pt    character varying(150),\n    region_pt  character varying(150),\n\n    title_de   character varying(150),\n    area_de    character varying(150),\n    region_de  character varying(150),\n\n    title_fr   character varying(150),\n    area_fr    character varying(150),\n    region_fr  character varying(150),\n\n    title_it   character varying(150),\n    area_it    character varying(150),\n    region_it  character varying(150),\n\n    title_pl   character varying(150),\n    area_pl    character varying(150),\n    region_pl  character varying(150),\n\n    title_ja   character varying(150),\n    area_ja    character varying(150),\n    region_ja  character varying(150),\n\n    title_lt   character varying(150),\n    area_lt    character varying(150),\n    region_lt  character varying(150),\n\n    title_lv   character varying(150),\n    area_lv    character varying(150),\n    region_lv  character varying(150),\n\n    title_cz   character varying(150),\n    area_cz    character varying(150),\n    region_cz  character varying(150),\n\n    CONSTRAINT pk_city_cid PRIMARY KEY (city_id)\n  );\n  `);\n};\nexports.down = function(knex, Promise) {\n  return knex.raw(`\n      drop table if exists _countries;\n      drop table if exists _regions;\n      drop table if exists _cities;\n  `);\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b3e49d9d7164639516bba1d2c1b9f93815952734","contentHash":"2b6b7a9fa757a2ed9db2d508b1ce8e7a7688fafcd2dcf60cf85a2ccae9ba2fe1"},"/app/app/db/migrations/20190201203611_user.ts":{"path":"/app/app/db/migrations/20190201203611_user.ts","statementMap":{"0":{"start":{"line":1,"column":0},"end":{"line":3,"column":2}},"1":{"start":{"line":2,"column":4},"end":{"line":2,"column":231}},"2":{"start":{"line":4,"column":0},"end":{"line":6,"column":2}},"3":{"start":{"line":5,"column":4},"end":{"line":5,"column":61}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":13},"end":{"line":1,"column":14}},"loc":{"start":{"line":1,"column":38},"end":{"line":3,"column":1}},"line":1},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":15},"end":{"line":4,"column":16}},"loc":{"start":{"line":4,"column":40},"end":{"line":6,"column":1}},"line":4}},"branchMap":{},"s":{"0":1,"1":9,"2":1,"3":9},"f":{"0":9,"1":9},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/db/migrations/20190201203611_user.ts","sources":["/app/app/db/migrations/20190201203611_user.ts"],"names":[],"mappings":"AAAA,OAAO,CAAC,EAAE,GAAG,UAAS,IAAI,EAAE,OAAO;IACjC,OAAO,IAAI,CAAC,GAAG,CAAC,iNASf,CAAC,CAAC;AACL,CAAC,CAAC;AAEF,OAAO,CAAC,IAAI,GAAG,UAAS,IAAI,EAAE,OAAO;IACnC,OAAO,IAAI,CAAC,GAAG,CAAC,uCAEf,CAAC,CAAC;AACL,CAAC,CAAC","sourcesContent":["exports.up = function(knex, Promise) {\n  return knex.raw(`\n    create table users\n    (\n      id serial primary key,\n      name     varchar(40),\n      email    varchar(40) unique,\n      verified boolean not null default false,\n      password text\n    );\n  `);\n};\n\nexports.down = function(knex, Promise) {\n  return knex.raw(`\n    drop table if exists users;\n  `);\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"563dd7603369b2de09c71b8ab419bf21bd208b9e","contentHash":"3a95c7d12e86b82eefec70506fcb62a110f24f918f388b4372569446a91b0772"},"/app/app/db/migrations/20190203093416_game.ts":{"path":"/app/app/db/migrations/20190203093416_game.ts","statementMap":{"0":{"start":{"line":1,"column":0},"end":{"line":3,"column":2}},"1":{"start":{"line":2,"column":4},"end":{"line":2,"column":516}},"2":{"start":{"line":4,"column":0},"end":{"line":6,"column":2}},"3":{"start":{"line":5,"column":4},"end":{"line":5,"column":100}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":13},"end":{"line":1,"column":14}},"loc":{"start":{"line":1,"column":38},"end":{"line":3,"column":1}},"line":1},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":15},"end":{"line":4,"column":16}},"loc":{"start":{"line":4,"column":40},"end":{"line":6,"column":1}},"line":4}},"branchMap":{},"s":{"0":1,"1":9,"2":1,"3":9},"f":{"0":9,"1":9},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/db/migrations/20190203093416_game.ts","sources":["/app/app/db/migrations/20190203093416_game.ts"],"names":[],"mappings":"AACA,OAAO,CAAC,EAAE,GAAG,UAAS,IAAI,EAAE,OAAO;IACjC,OAAO,IAAI,CAAC,GAAG,CAAC,8eAkBf,CAAC,CAAC;AACL,CAAC,CAAC;AAEF,OAAO,CAAC,IAAI,GAAG,UAAS,IAAI,EAAE,OAAO;IACnC,OAAO,IAAI,CAAC,GAAG,CAAC,8EAGf,CAAC,CAAC;AACL,CAAC,CAAC","sourcesContent":["\nexports.up = function(knex, Promise) {\n  return knex.raw(`\n    create type games_status as \n    enum('forming', 'active', 'finished', 'cancelled');\n    \n    create table games\n    (\n      id serial primary key,\n      city_id     integer references _cities(city_id),\n      author_id integer references users(id),\n      additional text,\n      address text,\n      lat float,\n      long float,\n      players integer,\n      date timestamp,\n      date_created timestamp default now(),\n      status games_status default 'forming'\n    );\n  `);\n};\n\nexports.down = function(knex, Promise) {\n  return knex.raw(`\n    drop table if exists games;\n    drop type if exists games_status;\n  `);\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2ae733301bfe568c0938add7c6abf643d99cfe38","contentHash":"a0c864f02bae73b66c3335c1e2213f6e287d2380e404be2acbd2dfb6e288162d"},"/app/app/db/migrations/20190216132153_game_players.ts":{"path":"/app/app/db/migrations/20190216132153_game_players.ts","statementMap":{"0":{"start":{"line":1,"column":0},"end":{"line":3,"column":2}},"1":{"start":{"line":2,"column":4},"end":{"line":2,"column":208}},"2":{"start":{"line":4,"column":0},"end":{"line":6,"column":2}},"3":{"start":{"line":5,"column":4},"end":{"line":5,"column":70}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":13},"end":{"line":1,"column":14}},"loc":{"start":{"line":1,"column":38},"end":{"line":3,"column":1}},"line":1},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":15},"end":{"line":4,"column":16}},"loc":{"start":{"line":4,"column":40},"end":{"line":6,"column":1}},"line":4}},"branchMap":{},"s":{"0":1,"1":9,"2":1,"3":9},"f":{"0":9,"1":9},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/db/migrations/20190216132153_game_players.ts","sources":["/app/app/db/migrations/20190216132153_game_players.ts"],"names":[],"mappings":"AAAA,OAAO,CAAC,EAAE,GAAG,UAAS,IAAI,EAAE,OAAO;IACjC,OAAO,IAAI,CAAC,GAAG,CAAC,0LAOf,CAAC,CAAC;AACL,CAAC,CAAC;AAEF,OAAO,CAAC,IAAI,GAAG,UAAS,IAAI,EAAE,OAAO;IACnC,OAAO,IAAI,CAAC,GAAG,CAAC,gDAEf,CAAC,CAAC;AACL,CAAC,CAAC","sourcesContent":["exports.up = function(knex, Promise) {\n  return knex.raw(`\n    create table games_players\n    (\n      game_id  integer references games(id),\n      player_id integer references users(id),\n      primary key (game_id, player_id)\n    );\n  `);\n};\n\nexports.down = function(knex, Promise) {\n  return knex.raw(`\n     drop table if exists games_players;\n  `);\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"826194449e63b4b2f932f754f9dfb28368357982","contentHash":"fbbd757dde15f2bc16050ac7ecb40a175bf0e80e990bbae580cb7184c03851c2"},"/app/app/db/migrations/20190319181145_add.ts":{"path":"/app/app/db/migrations/20190319181145_add.ts","statementMap":{"0":{"start":{"line":1,"column":0},"end":{"line":3,"column":2}},"1":{"start":{"line":2,"column":4},"end":{"line":2,"column":66}},"2":{"start":{"line":4,"column":0},"end":{"line":6,"column":2}},"3":{"start":{"line":5,"column":4},"end":{"line":5,"column":72}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":13},"end":{"line":1,"column":14}},"loc":{"start":{"line":1,"column":38},"end":{"line":3,"column":1}},"line":1},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":15},"end":{"line":4,"column":16}},"loc":{"start":{"line":4,"column":40},"end":{"line":6,"column":1}},"line":4}},"branchMap":{},"s":{"0":1,"1":9,"2":1,"3":9},"f":{"0":9,"1":9},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/db/migrations/20190319181145_add.ts","sources":["/app/app/db/migrations/20190319181145_add.ts"],"names":[],"mappings":"AACA,OAAO,CAAC,EAAE,GAAG,UAAS,IAAI,EAAE,OAAO;IACjC,OAAO,IAAI,CAAC,GAAG,CAAC,4CAA4C,CAAC,CAAC;AAChE,CAAC,CAAC;AAEF,OAAO,CAAC,IAAI,GAAG,UAAS,IAAI,EAAE,OAAO;IACnC,OAAO,IAAI,CAAC,GAAG,CAAC,kDAAkD,CAAC,CAAC;AACtE,CAAC,CAAC","sourcesContent":["\nexports.up = function(knex, Promise) {\n  return knex.raw('alter table games add column district text');\n};\n\nexports.down = function(knex, Promise) {\n  return knex.raw('alter table games drop column if exists district');\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"07f58c53590f889a7951677e6597a68fe0508457","contentHash":"2ac86b1ca1222983e78ca7e650828cbba71582e9b36a921e562ea5fb8aac3ea5"},"/app/app/db/migrations/20190329201031_gameComposition.ts":{"path":"/app/app/db/migrations/20190329201031_gameComposition.ts","statementMap":{"0":{"start":{"line":1,"column":0},"end":{"line":3,"column":2}},"1":{"start":{"line":2,"column":4},"end":{"line":2,"column":269}},"2":{"start":{"line":4,"column":0},"end":{"line":6,"column":2}},"3":{"start":{"line":5,"column":4},"end":{"line":5,"column":62}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":13},"end":{"line":1,"column":14}},"loc":{"start":{"line":1,"column":38},"end":{"line":3,"column":1}},"line":1},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":15},"end":{"line":4,"column":16}},"loc":{"start":{"line":4,"column":40},"end":{"line":6,"column":1}},"line":4}},"branchMap":{},"s":{"0":1,"1":9,"2":1,"3":9},"f":{"0":9,"1":9},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/db/migrations/20190329201031_gameComposition.ts","sources":["/app/app/db/migrations/20190329201031_gameComposition.ts"],"names":[],"mappings":"AAAA,OAAO,CAAC,EAAE,GAAG,UAAS,IAAI,EAAE,OAAO;IACjC,OAAO,IAAI,CAAC,GAAG,CAAC,uPAQf,CAAC,CAAC;AACL,CAAC,CAAC;AAEF,OAAO,CAAC,IAAI,GAAG,UAAS,IAAI,EAAE,OAAO;IACnC,OAAO,IAAI,CAAC,GAAG,CAAC,wCAEf,CAAC,CAAC;AACL,CAAC,CAAC","sourcesContent":["exports.up = function(knex, Promise) {\n  return knex.raw(`\n    create table games_composition\n    (\n      game_id  integer references games(id),\n      player_id integer references users(id),\n      player_field_number integer,\n      primary key (game_id, player_id, player_field_number)\n    );\n  `);\n};\n\nexports.down = function(knex, Promise) {\n  return knex.raw(`\n    drop table games_composition\n  `);\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"63a47fe41d80a2749f8510899c3aa6222916d36e","contentHash":"603a1ec546969ac4bf8e23aca42400d7933138961d6957678fab903e33121972"},"/app/app/db/migrations/20190329201031_messages.ts":{"path":"/app/app/db/migrations/20190329201031_messages.ts","statementMap":{"0":{"start":{"line":1,"column":0},"end":{"line":3,"column":2}},"1":{"start":{"line":2,"column":4},"end":{"line":2,"column":256}},"2":{"start":{"line":4,"column":0},"end":{"line":6,"column":2}},"3":{"start":{"line":5,"column":4},"end":{"line":5,"column":53}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":13},"end":{"line":1,"column":14}},"loc":{"start":{"line":1,"column":38},"end":{"line":3,"column":1}},"line":1},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":15},"end":{"line":4,"column":16}},"loc":{"start":{"line":4,"column":40},"end":{"line":6,"column":1}},"line":4}},"branchMap":{},"s":{"0":1,"1":9,"2":1,"3":9},"f":{"0":9,"1":9},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/db/migrations/20190329201031_messages.ts","sources":["/app/app/db/migrations/20190329201031_messages.ts"],"names":[],"mappings":"AAAA,OAAO,CAAC,EAAE,GAAG,UAAS,IAAI,EAAE,OAAO;IACjC,OAAO,IAAI,CAAC,GAAG,CAAC,0OASf,CAAC,CAAC;AACL,CAAC,CAAC;AAEF,OAAO,CAAC,IAAI,GAAG,UAAS,IAAI,EAAE,OAAO;IACnC,OAAO,IAAI,CAAC,GAAG,CAAC,+BAEf,CAAC,CAAC;AACL,CAAC,CAAC","sourcesContent":["exports.up = function(knex, Promise) {\n  return knex.raw(`\n    create table messages\n    ( \n      id serial primary key,\n      game_id  integer references games(id),\n      user_id integer references users(id),\n      date timestamp  not null default now(),\n      text text\n    );\n  `);\n};\n\nexports.down = function(knex, Promise) {\n  return knex.raw(`\n    drop table messages\n  `);\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1fcd95cd06ee58af9da3b619a2aa8344557fb0b7","contentHash":"07943cf44785e349308869fbf8954d0c8e7f2769a9b87bfe5d9f06c64e9c44f5"},"/app/app/db/migrations/20200226070522_refreshTockens.ts":{"path":"/app/app/db/migrations/20200226070522_refreshTockens.ts","statementMap":{"0":{"start":{"line":1,"column":0},"end":{"line":3,"column":2}},"1":{"start":{"line":2,"column":4},"end":{"line":2,"column":531}},"2":{"start":{"line":4,"column":0},"end":{"line":6,"column":2}},"3":{"start":{"line":5,"column":4},"end":{"line":5,"column":157}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":13},"end":{"line":1,"column":14}},"loc":{"start":{"line":1,"column":29},"end":{"line":3,"column":1}},"line":1},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":15},"end":{"line":4,"column":16}},"loc":{"start":{"line":4,"column":31},"end":{"line":6,"column":1}},"line":4}},"branchMap":{},"s":{"0":1,"1":9,"2":1,"3":9},"f":{"0":9,"1":9},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/db/migrations/20200226070522_refreshTockens.ts","sources":["/app/app/db/migrations/20200226070522_refreshTockens.ts"],"names":[],"mappings":"AACA,OAAO,CAAC,EAAE,GAAG,UAAS,IAAI;IACxB,OAAO,IAAI,CAAC,GAAG,CAAC,6fAoBf,CAAC,CAAC;AACL,CAAC,CAAC;AAEF,OAAO,CAAC,IAAI,GAAG,UAAS,IAAI;IAC1B,OAAO,IAAI,CAAC,GAAG,CAAC,uIAIf,CAAC,CAAA;AACJ,CAAC,CAAC","sourcesContent":["\nexports.up = function(knex) {\n  return knex.raw(`\n    create table refresh_tokens\n    ( \n      id text,\n      user_id text,\n      timestamp timestamp NOT NULL DEFAULT NOW()\n    );\n    \n    CREATE FUNCTION ttl_refresh_tokens() RETURNS trigger\n    LANGUAGE plpgsql\n    AS $$\n      BEGIN\n        DELETE FROM refresh_tokens WHERE timestamp < NOW() - INTERVAL '7 days';\n        RETURN NEW;\n      END;\n    $$;\n    \n    CREATE TRIGGER ttl_refresh_tokens_trigger\n    AFTER INSERT ON refresh_tokens\n    EXECUTE PROCEDURE ttl_refresh_tokens();\n  `);\n};\n\nexports.down = function(knex) {\n  return knex.raw(`\n  DROP TRIGGER ttl_refresh_tokens_trigger on refresh_tokens;\n  DROP FUNCTION ttl_refresh_tokens;\n  DROP TABLE refresh_tokens;\n  `)\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"58651f5903fbd155ed05b4e0109fecbfa3d98f4f","contentHash":"fba7b3bf97a84a362a32d468f755b3483cc8f8b43d670d08e6bba4793c5b125c"},"/app/app/db/migrations/20200226070523_usersGoogle.ts":{"path":"/app/app/db/migrations/20200226070523_usersGoogle.ts","statementMap":{"0":{"start":{"line":1,"column":0},"end":{"line":3,"column":2}},"1":{"start":{"line":2,"column":4},"end":{"line":2,"column":491}},"2":{"start":{"line":4,"column":0},"end":{"line":6,"column":2}},"3":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":13},"end":{"line":1,"column":14}},"loc":{"start":{"line":1,"column":29},"end":{"line":3,"column":1}},"line":1},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":15},"end":{"line":4,"column":16}},"loc":{"start":{"line":4,"column":31},"end":{"line":6,"column":1}},"line":4}},"branchMap":{},"s":{"0":1,"1":9,"2":1,"3":9},"f":{"0":9,"1":9},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/db/migrations/20200226070523_usersGoogle.ts","sources":["/app/app/db/migrations/20200226070523_usersGoogle.ts"],"names":[],"mappings":"AACA,OAAO,CAAC,EAAE,GAAG,UAAC,IAAI;IAChB,OAAO,IAAI,CAAC,GAAG,CAAC,qdAaf,CAAC,CAAC;AACL,CAAC,CAAC;AAEF,OAAO,CAAC,IAAI,GAAG,UAAC,IAAI;IAClB,OAAO,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAA;AACrB,CAAC,CAAC","sourcesContent":["\nexports.up = (knex) => {\n  return knex.raw(`\n  alter table users drop column email;\n  alter table users drop column password;\n  DO $$\n    BEGIN\n        IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'registration_strategies') THEN\n            CREATE TYPE registration_strategies AS ENUM ('local', 'google');\n        END IF;\n    END\n  $$;\n  alter table users add column method registration_strategies;\n  alter table users add column local jsonb;\n  alter table users add column google jsonb;\n  `);\n};\n\nexports.down = (knex) => {\n  return knex.raw(``)\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"84814eb0dcb4fa0bec33d6fdb7fa859de77867e6","contentHash":"e2225141e8a308d51934f112069831ec2bc02abe07b7bfbdb21e2ed2846e2aa7"},"/app/app/db/seed/_cities.ts":{"path":"/app/app/db/seed/_cities.ts","statementMap":{"0":{"start":{"line":1,"column":16},"end":{"line":9,"column":1}},"1":{"start":{"line":2,"column":28},"end":{"line":2,"column":110}},"2":{"start":{"line":2,"column":91},"end":{"line":2,"column":106}},"3":{"start":{"line":3,"column":4},"end":{"line":8,"column":7}},"4":{"start":{"line":4,"column":36},"end":{"line":4,"column":97}},"5":{"start":{"line":4,"column":42},"end":{"line":4,"column":70}},"6":{"start":{"line":4,"column":85},"end":{"line":4,"column":95}},"7":{"start":{"line":5,"column":35},"end":{"line":5,"column":100}},"8":{"start":{"line":5,"column":41},"end":{"line":5,"column":73}},"9":{"start":{"line":5,"column":88},"end":{"line":5,"column":98}},"10":{"start":{"line":6,"column":32},"end":{"line":6,"column":116}},"11":{"start":{"line":7,"column":8},"end":{"line":7,"column":78}},"12":{"start":{"line":10,"column":18},"end":{"line":36,"column":1}},"13":{"start":{"line":11,"column":12},"end":{"line":11,"column":104}},"14":{"start":{"line":11,"column":43},"end":{"line":11,"column":68}},"15":{"start":{"line":11,"column":57},"end":{"line":11,"column":68}},"16":{"start":{"line":11,"column":69},"end":{"line":11,"column":81}},"17":{"start":{"line":12,"column":4},"end":{"line":12,"column":157}},"18":{"start":{"line":12,"column":138},"end":{"line":12,"column":150}},"19":{"start":{"line":13,"column":23},"end":{"line":13,"column":68}},"20":{"start":{"line":13,"column":45},"end":{"line":13,"column":65}},"21":{"start":{"line":15,"column":8},"end":{"line":15,"column":70}},"22":{"start":{"line":15,"column":15},"end":{"line":15,"column":70}},"23":{"start":{"line":16,"column":8},"end":{"line":33,"column":66}},"24":{"start":{"line":16,"column":18},"end":{"line":33,"column":66}},"25":{"start":{"line":17,"column":12},"end":{"line":17,"column":169}},"26":{"start":{"line":17,"column":160},"end":{"line":17,"column":169}},"27":{"start":{"line":18,"column":12},"end":{"line":18,"column":52}},"28":{"start":{"line":18,"column":26},"end":{"line":18,"column":52}},"29":{"start":{"line":19,"column":12},"end":{"line":31,"column":13}},"30":{"start":{"line":20,"column":32},"end":{"line":20,"column":39}},"31":{"start":{"line":20,"column":40},"end":{"line":20,"column":46}},"32":{"start":{"line":21,"column":24},"end":{"line":21,"column":34}},"33":{"start":{"line":21,"column":35},"end":{"line":21,"column":72}},"34":{"start":{"line":22,"column":24},"end":{"line":22,"column":34}},"35":{"start":{"line":22,"column":35},"end":{"line":22,"column":45}},"36":{"start":{"line":22,"column":46},"end":{"line":22,"column":55}},"37":{"start":{"line":22,"column":56},"end":{"line":22,"column":65}},"38":{"start":{"line":23,"column":24},"end":{"line":23,"column":41}},"39":{"start":{"line":23,"column":42},"end":{"line":23,"column":55}},"40":{"start":{"line":23,"column":56},"end":{"line":23,"column":65}},"41":{"start":{"line":25,"column":20},"end":{"line":25,"column":128}},"42":{"start":{"line":25,"column":110},"end":{"line":25,"column":116}},"43":{"start":{"line":25,"column":117},"end":{"line":25,"column":126}},"44":{"start":{"line":26,"column":20},"end":{"line":26,"column":106}},"45":{"start":{"line":26,"column":81},"end":{"line":26,"column":97}},"46":{"start":{"line":26,"column":98},"end":{"line":26,"column":104}},"47":{"start":{"line":27,"column":20},"end":{"line":27,"column":89}},"48":{"start":{"line":27,"column":57},"end":{"line":27,"column":72}},"49":{"start":{"line":27,"column":73},"end":{"line":27,"column":80}},"50":{"start":{"line":27,"column":81},"end":{"line":27,"column":87}},"51":{"start":{"line":28,"column":20},"end":{"line":28,"column":87}},"52":{"start":{"line":28,"column":47},"end":{"line":28,"column":62}},"53":{"start":{"line":28,"column":63},"end":{"line":28,"column":78}},"54":{"start":{"line":28,"column":79},"end":{"line":28,"column":85}},"55":{"start":{"line":29,"column":20},"end":{"line":29,"column":42}},"56":{"start":{"line":29,"column":30},"end":{"line":29,"column":42}},"57":{"start":{"line":30,"column":20},"end":{"line":30,"column":33}},"58":{"start":{"line":30,"column":34},"end":{"line":30,"column":43}},"59":{"start":{"line":32,"column":12},"end":{"line":32,"column":39}},"60":{"start":{"line":33,"column":22},"end":{"line":33,"column":34}},"61":{"start":{"line":33,"column":35},"end":{"line":33,"column":41}},"62":{"start":{"line":33,"column":54},"end":{"line":33,"column":64}},"63":{"start":{"line":34,"column":8},"end":{"line":34,"column":35}},"64":{"start":{"line":34,"column":23},"end":{"line":34,"column":35}},"65":{"start":{"line":34,"column":36},"end":{"line":34,"column":89}},"66":{"start":{"line":37,"column":0},"end":{"line":49,"column":2}},"67":{"start":{"line":38,"column":4},"end":{"line":48,"column":7}},"68":{"start":{"line":39,"column":8},"end":{"line":47,"column":11}},"69":{"start":{"line":40,"column":12},"end":{"line":46,"column":20}},"70":{"start":{"line":43,"column":20},"end":{"line":45,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":44},"end":{"line":1,"column":45}},"loc":{"start":{"line":1,"column":89},"end":{"line":9,"column":1}},"line":1},"1":{"name":"adopt","decl":{"start":{"line":2,"column":13},"end":{"line":2,"column":18}},"loc":{"start":{"line":2,"column":26},"end":{"line":2,"column":112}},"line":2},"2":{"name":"(anonymous_2)","decl":{"start":{"line":2,"column":70},"end":{"line":2,"column":71}},"loc":{"start":{"line":2,"column":89},"end":{"line":2,"column":108}},"line":2},"3":{"name":"(anonymous_3)","decl":{"start":{"line":3,"column":36},"end":{"line":3,"column":37}},"loc":{"start":{"line":3,"column":63},"end":{"line":8,"column":5}},"line":3},"4":{"name":"fulfilled","decl":{"start":{"line":4,"column":17},"end":{"line":4,"column":26}},"loc":{"start":{"line":4,"column":34},"end":{"line":4,"column":99}},"line":4},"5":{"name":"rejected","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":25}},"loc":{"start":{"line":5,"column":33},"end":{"line":5,"column":102}},"line":5},"6":{"name":"step","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":21}},"loc":{"start":{"line":6,"column":30},"end":{"line":6,"column":118}},"line":6},"7":{"name":"(anonymous_7)","decl":{"start":{"line":10,"column":48},"end":{"line":10,"column":49}},"loc":{"start":{"line":10,"column":73},"end":{"line":36,"column":1}},"line":10},"8":{"name":"(anonymous_8)","decl":{"start":{"line":11,"column":30},"end":{"line":11,"column":31}},"loc":{"start":{"line":11,"column":41},"end":{"line":11,"column":83}},"line":11},"9":{"name":"(anonymous_9)","decl":{"start":{"line":12,"column":125},"end":{"line":12,"column":126}},"loc":{"start":{"line":12,"column":136},"end":{"line":12,"column":152}},"line":12},"10":{"name":"verb","decl":{"start":{"line":13,"column":13},"end":{"line":13,"column":17}},"loc":{"start":{"line":13,"column":21},"end":{"line":13,"column":70}},"line":13},"11":{"name":"(anonymous_11)","decl":{"start":{"line":13,"column":30},"end":{"line":13,"column":31}},"loc":{"start":{"line":13,"column":43},"end":{"line":13,"column":67}},"line":13},"12":{"name":"step","decl":{"start":{"line":14,"column":13},"end":{"line":14,"column":17}},"loc":{"start":{"line":14,"column":22},"end":{"line":35,"column":5}},"line":14},"13":{"name":"(anonymous_13)","decl":{"start":{"line":37,"column":15},"end":{"line":37,"column":16}},"loc":{"start":{"line":37,"column":40},"end":{"line":49,"column":1}},"line":37},"14":{"name":"(anonymous_14)","decl":{"start":{"line":38,"column":43},"end":{"line":38,"column":44}},"loc":{"start":{"line":38,"column":55},"end":{"line":48,"column":5}},"line":38},"15":{"name":"(anonymous_15)","decl":{"start":{"line":39,"column":33},"end":{"line":39,"column":34}},"loc":{"start":{"line":39,"column":47},"end":{"line":47,"column":9}},"line":39},"16":{"name":"(anonymous_16)","decl":{"start":{"line":41,"column":26},"end":{"line":41,"column":27}},"loc":{"start":{"line":41,"column":38},"end":{"line":46,"column":17}},"line":41}},"branchMap":{"0":{"loc":{"start":{"line":1,"column":16},"end":{"line":9,"column":1}},"type":"binary-expr","locations":[{"start":{"line":1,"column":17},"end":{"line":1,"column":21}},{"start":{"line":1,"column":25},"end":{"line":1,"column":39}},{"start":{"line":1,"column":44},"end":{"line":9,"column":1}}],"line":1},"1":{"loc":{"start":{"line":2,"column":35},"end":{"line":2,"column":109}},"type":"cond-expr","locations":[{"start":{"line":2,"column":56},"end":{"line":2,"column":61}},{"start":{"line":2,"column":64},"end":{"line":2,"column":109}}],"line":2},"2":{"loc":{"start":{"line":3,"column":16},"end":{"line":3,"column":34}},"type":"binary-expr","locations":[{"start":{"line":3,"column":16},"end":{"line":3,"column":17}},{"start":{"line":3,"column":22},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":32},"end":{"line":6,"column":115}},"type":"cond-expr","locations":[{"start":{"line":6,"column":46},"end":{"line":6,"column":67}},{"start":{"line":6,"column":70},"end":{"line":6,"column":115}}],"line":6},"4":{"loc":{"start":{"line":7,"column":51},"end":{"line":7,"column":67}},"type":"binary-expr","locations":[{"start":{"line":7,"column":51},"end":{"line":7,"column":61}},{"start":{"line":7,"column":65},"end":{"line":7,"column":67}}],"line":7},"5":{"loc":{"start":{"line":10,"column":18},"end":{"line":36,"column":1}},"type":"binary-expr","locations":[{"start":{"line":10,"column":19},"end":{"line":10,"column":23}},{"start":{"line":10,"column":27},"end":{"line":10,"column":43}},{"start":{"line":10,"column":48},"end":{"line":36,"column":1}}],"line":10},"6":{"loc":{"start":{"line":11,"column":43},"end":{"line":11,"column":68}},"type":"if","locations":[{"start":{"line":11,"column":43},"end":{"line":11,"column":68}},{"start":{"line":11,"column":43},"end":{"line":11,"column":68}}],"line":11},"7":{"loc":{"start":{"line":12,"column":71},"end":{"line":12,"column":153}},"type":"binary-expr","locations":[{"start":{"line":12,"column":71},"end":{"line":12,"column":99}},{"start":{"line":12,"column":104},"end":{"line":12,"column":152}}],"line":12},"8":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":70}},"type":"if","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":70}},{"start":{"line":15,"column":8},"end":{"line":15,"column":70}}],"line":15},"9":{"loc":{"start":{"line":17,"column":12},"end":{"line":17,"column":169}},"type":"if","locations":[{"start":{"line":17,"column":12},"end":{"line":17,"column":169}},{"start":{"line":17,"column":12},"end":{"line":17,"column":169}}],"line":17},"10":{"loc":{"start":{"line":17,"column":23},"end":{"line":17,"column":158}},"type":"binary-expr","locations":[{"start":{"line":17,"column":23},"end":{"line":17,"column":24}},{"start":{"line":17,"column":29},"end":{"line":17,"column":125}},{"start":{"line":17,"column":130},"end":{"line":17,"column":158}}],"line":17},"11":{"loc":{"start":{"line":17,"column":33},"end":{"line":17,"column":125}},"type":"cond-expr","locations":[{"start":{"line":17,"column":45},"end":{"line":17,"column":56}},{"start":{"line":17,"column":59},"end":{"line":17,"column":125}}],"line":17},"12":{"loc":{"start":{"line":17,"column":59},"end":{"line":17,"column":125}},"type":"cond-expr","locations":[{"start":{"line":17,"column":67},"end":{"line":17,"column":116}},{"start":{"line":17,"column":119},"end":{"line":17,"column":125}}],"line":17},"13":{"loc":{"start":{"line":17,"column":67},"end":{"line":17,"column":116}},"type":"binary-expr","locations":[{"start":{"line":17,"column":67},"end":{"line":17,"column":77}},{"start":{"line":17,"column":82},"end":{"line":17,"column":115}}],"line":17},"14":{"loc":{"start":{"line":17,"column":82},"end":{"line":17,"column":112}},"type":"binary-expr","locations":[{"start":{"line":17,"column":83},"end":{"line":17,"column":98}},{"start":{"line":17,"column":103},"end":{"line":17,"column":112}}],"line":17},"15":{"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":52}},"type":"if","locations":[{"start":{"line":18,"column":12},"end":{"line":18,"column":52}},{"start":{"line":18,"column":12},"end":{"line":18,"column":52}}],"line":18},"16":{"loc":{"start":{"line":19,"column":12},"end":{"line":31,"column":13}},"type":"switch","locations":[{"start":{"line":20,"column":16},"end":{"line":20,"column":23}},{"start":{"line":20,"column":24},"end":{"line":20,"column":46}},{"start":{"line":21,"column":16},"end":{"line":21,"column":72}},{"start":{"line":22,"column":16},"end":{"line":22,"column":65}},{"start":{"line":23,"column":16},"end":{"line":23,"column":65}},{"start":{"line":24,"column":16},"end":{"line":30,"column":43}}],"line":19},"17":{"loc":{"start":{"line":25,"column":20},"end":{"line":25,"column":128}},"type":"if","locations":[{"start":{"line":25,"column":20},"end":{"line":25,"column":128}},{"start":{"line":25,"column":20},"end":{"line":25,"column":128}}],"line":25},"18":{"loc":{"start":{"line":25,"column":24},"end":{"line":25,"column":106}},"type":"binary-expr","locations":[{"start":{"line":25,"column":24},"end":{"line":25,"column":74}},{"start":{"line":25,"column":79},"end":{"line":25,"column":90}},{"start":{"line":25,"column":94},"end":{"line":25,"column":105}}],"line":25},"19":{"loc":{"start":{"line":25,"column":42},"end":{"line":25,"column":73}},"type":"binary-expr","locations":[{"start":{"line":25,"column":42},"end":{"line":25,"column":54}},{"start":{"line":25,"column":58},"end":{"line":25,"column":73}}],"line":25},"20":{"loc":{"start":{"line":26,"column":20},"end":{"line":26,"column":106}},"type":"if","locations":[{"start":{"line":26,"column":20},"end":{"line":26,"column":106}},{"start":{"line":26,"column":20},"end":{"line":26,"column":106}}],"line":26},"21":{"loc":{"start":{"line":26,"column":24},"end":{"line":26,"column":77}},"type":"binary-expr","locations":[{"start":{"line":26,"column":24},"end":{"line":26,"column":35}},{"start":{"line":26,"column":40},"end":{"line":26,"column":42}},{"start":{"line":26,"column":47},"end":{"line":26,"column":59}},{"start":{"line":26,"column":63},"end":{"line":26,"column":75}}],"line":26},"22":{"loc":{"start":{"line":27,"column":20},"end":{"line":27,"column":89}},"type":"if","locations":[{"start":{"line":27,"column":20},"end":{"line":27,"column":89}},{"start":{"line":27,"column":20},"end":{"line":27,"column":89}}],"line":27},"23":{"loc":{"start":{"line":27,"column":24},"end":{"line":27,"column":53}},"type":"binary-expr","locations":[{"start":{"line":27,"column":24},"end":{"line":27,"column":35}},{"start":{"line":27,"column":39},"end":{"line":27,"column":53}}],"line":27},"24":{"loc":{"start":{"line":28,"column":20},"end":{"line":28,"column":87}},"type":"if","locations":[{"start":{"line":28,"column":20},"end":{"line":28,"column":87}},{"start":{"line":28,"column":20},"end":{"line":28,"column":87}}],"line":28},"25":{"loc":{"start":{"line":28,"column":24},"end":{"line":28,"column":43}},"type":"binary-expr","locations":[{"start":{"line":28,"column":24},"end":{"line":28,"column":25}},{"start":{"line":28,"column":29},"end":{"line":28,"column":43}}],"line":28},"26":{"loc":{"start":{"line":29,"column":20},"end":{"line":29,"column":42}},"type":"if","locations":[{"start":{"line":29,"column":20},"end":{"line":29,"column":42}},{"start":{"line":29,"column":20},"end":{"line":29,"column":42}}],"line":29},"27":{"loc":{"start":{"line":34,"column":8},"end":{"line":34,"column":35}},"type":"if","locations":[{"start":{"line":34,"column":8},"end":{"line":34,"column":35}},{"start":{"line":34,"column":8},"end":{"line":34,"column":35}}],"line":34},"28":{"loc":{"start":{"line":34,"column":52},"end":{"line":34,"column":74}},"type":"cond-expr","locations":[{"start":{"line":34,"column":60},"end":{"line":34,"column":65}},{"start":{"line":34,"column":68},"end":{"line":34,"column":74}}],"line":34}},"s":{"0":1,"1":0,"2":0,"3":9,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":9,"11":9,"12":1,"13":9,"14":0,"15":0,"16":0,"17":9,"18":0,"19":27,"20":9,"21":9,"22":0,"23":9,"24":18,"25":18,"26":0,"27":18,"28":0,"29":18,"30":9,"31":9,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":9,"42":9,"43":9,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":9,"60":0,"61":0,"62":18,"63":9,"64":0,"65":9,"66":1,"67":9,"68":9,"69":9,"70":9},"f":{"0":9,"1":0,"2":0,"3":9,"4":0,"5":0,"6":9,"7":9,"8":0,"9":0,"10":27,"11":9,"12":9,"13":9,"14":9,"15":9,"16":9},"b":{"0":[1,1,1],"1":[0,0],"2":[9,9],"3":[9,0],"4":[9,9],"5":[1,1,1],"6":[0,0],"7":[9,9],"8":[0,9],"9":[0,18],"10":[18,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,18],"16":[9,9,0,0,0,9],"17":[9,0],"18":[9,9,9],"19":[9,0],"20":[0,0],"21":[0,0,0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,9],"28":[9,0]},"inputSourceMap":{"version":3,"file":"/app/app/db/seed/_cities.ts","sources":["/app/app/db/seed/_cities.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,CAAC,IAAI,GAAG,UAAe,IAAI,EAAE,OAAO;;;YACzC,sBAAO,IAAI,CAAC,SAAS,CAAC;qBACjB,IAAI,CAAC;oBACJ,uBAAuB;oBACvB,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC;wBAC5B,EAAC,OAAO,EAAE,CAAC,EAAE,QAAQ,EAAE,MAAM,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,KAAK,EAAC;qBAChE,CAAC,CAAA;gBACJ,CAAC,CAAC,EAAA;;;CACP,CAAA","sourcesContent":["exports.seed = async function(knex, Promise) {\n  return knex('_cities')\n      .then(function() {\n        // Inserts seed entries\n        return knex('_cities').insert([\n          {city_id: 1, title_ru: 'Киев', country_id: 2, important: false},\n        ])\n      })\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"35826d9339455bb6d9b9a2cee52adcddc328354a","contentHash":"e369fd324b2cacf1723e0f164ff81d91c5581f2e3320699f2ff2498786a83453"},"/app/app/db/seed/_countries.ts":{"path":"/app/app/db/seed/_countries.ts","statementMap":{"0":{"start":{"line":1,"column":0},"end":{"line":18,"column":2}},"1":{"start":{"line":2,"column":4},"end":{"line":17,"column":7}},"2":{"start":{"line":5,"column":8},"end":{"line":16,"column":11}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":15},"end":{"line":1,"column":16}},"loc":{"start":{"line":1,"column":40},"end":{"line":18,"column":1}},"line":1},"1":{"name":"(anonymous_1)","decl":{"start":{"line":3,"column":14},"end":{"line":3,"column":15}},"loc":{"start":{"line":3,"column":26},"end":{"line":17,"column":5}},"line":3}},"branchMap":{},"s":{"0":1,"1":9,"2":9},"f":{"0":9,"1":9},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/db/seed/_countries.ts","sources":["/app/app/db/seed/_countries.ts"],"names":[],"mappings":"AAAA,OAAO,CAAC,IAAI,GAAG,UAAS,IAAI,EAAE,OAAO;IACnC,OAAO,IAAI,CAAC,YAAY,CAAC;SACpB,IAAI,CAAC;QACJ,uBAAuB;QACvB,OAAO,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC;YAC/B;gBACE,UAAU,EAAE,CAAC;gBACb,QAAQ,EAAE,QAAQ;gBAClB,QAAQ,EAAE,OAAO;aAClB;YACD;gBACE,UAAU,EAAE,CAAC;gBACb,QAAQ,EAAE,SAAS;gBACnB,QAAQ,EAAE,SAAS;aACpB;SACF,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACT,CAAC,CAAC","sourcesContent":["exports.seed = function(knex, Promise) {\n  return knex('_countries')\n      .then(function() {\n        // Inserts seed entries\n        return knex('_countries').insert([\n          {\n            country_id: 1,\n            title_ru: 'Россия',\n            title_ua: 'Росія',\n          },\n          {\n            country_id: 2,\n            title_ru: 'Украина',\n            title_ua: 'Україна',\n          },\n        ]);\n      });\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a6519a36a6993310364753d48b13e9096d8f2510","contentHash":"98cca2f8bcbef5353a7f92a6a381a88ef41074a113e4b57b6c4c9d37d402ffca"},"/app/app/db/seed/user.ts":{"path":"/app/app/db/seed/user.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":12},"end":{"line":3,"column":39}},"2":{"start":{"line":4,"column":0},"end":{"line":22,"column":2}},"3":{"start":{"line":5,"column":4},"end":{"line":21,"column":7}},"4":{"start":{"line":7,"column":8},"end":{"line":12,"column":11}},"5":{"start":{"line":15,"column":8},"end":{"line":20,"column":11}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":15},"end":{"line":4,"column":16}},"loc":{"start":{"line":4,"column":40},"end":{"line":22,"column":1}},"line":4},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":14},"end":{"line":6,"column":15}},"loc":{"start":{"line":6,"column":26},"end":{"line":13,"column":5}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":14,"column":14},"end":{"line":14,"column":15}},"loc":{"start":{"line":14,"column":26},"end":{"line":21,"column":5}},"line":14}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":9,"4":9,"5":9},"f":{"0":9,"1":9,"2":9},"b":{},"inputSourceMap":{"version":3,"file":"/app/app/db/seed/user.ts","sources":["/app/app/db/seed/user.ts"],"names":[],"mappings":";;AAAA,wCAAyC;AACzC,OAAO,CAAC,IAAI,GAAG,UAAC,IAAI,EAAE,OAAO;IAC3B,OAAO,IAAI,CAAC,OAAO,CAAC;SACf,IAAI,CAAC;QACJ,OAAO,KAAK,CAAC,YAAY,CAAC;YACxB,IAAI,EAAE,WAAW;YACjB,KAAK,EAAE,aAAa;YACpB,QAAQ,EAAE,gBAAgB;YAC1B,QAAQ,EAAE,IAAI;SACf,CAAC,CAAC;IACL,CAAC,CAAC;SACD,IAAI,CAAC;QACJ,OAAO,KAAK,CAAC,YAAY,CAAC;YACxB,IAAI,EAAE,UAAU;YAChB,KAAK,EAAE,gBAAgB;YACvB,QAAQ,EAAE,eAAe;YACzB,QAAQ,EAAE,IAAI;SACf,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACT,CAAC,CAAC","sourcesContent":["import * as users from '../queries/users'\nexports.seed = (knex, Promise) => {\n  return knex('users')\n      .then(() => {\n        return users.addLocalUser({\n          name: 'username0',\n          email: 'user-email0',\n          password: 'user-password0',\n          verified: true\n        });\n      })\n      .then(() => {\n        return users.addLocalUser({\n          name: 'username',\n          email: 'user@email.com',\n          password: 'user-password',\n          verified: true\n        });\n      });\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"65ff87004ef95a388537f6aa40f8701fee7cdccb","contentHash":"ee539bd442df00eee8adfc028134901992f91fd3f3cd84df729f793ac54dbc69"}}