(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{177:function(e){e.exports=JSON.parse('{"\u0427\u0442\u043e\u0431\u044b \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u0441\u044f \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u0444\u0443\u0442\u0431\u043e\u043b\u043a\u0443":"\u0429\u043e\u0431 \u043f\u0440\u0438\u0454\u0434\u043d\u0430\u0454\u0442\u044c\u0441\u044f \u043d\u0430\u0442\u0438\u0441\u043d\u0456\u0442\u044c \u043d\u0430 \u0444\u0443\u0442\u0431\u043e\u043b\u043a\u0443","\u0427\u0442\u043e\u0431\u044b \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u0441\u044f, \u0437\u0430\u043b\u043e\u0433\u0438\u043d\u0442\u0435\u0441\u044c \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u0444\u0443\u0442\u0431\u043e\u043b\u043a\u0443":"\u0429\u043e\u0431 \u043f\u0440\u0438\u0454\u0434\u043d\u0430\u0454\u0442\u044c\u0441\u044f, \u0437\u0430\u043b\u043e\u0433\u0438\u043d\u0442\u0435\u0441\u044c i \u043d\u0430\u0442\u0438\u0441\u043d\u0456\u0442\u044c \u043d\u0430 \u0444\u0443\u0442\u0431\u043e\u043b\u043a\u0443","\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u0433\u0440\u0443":"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u0433\u0440\u0443","\u0413\u043e\u0440\u043e\u0434":"\u041c\u0456\u0441\u0442\u043e","\u0410\u0434\u0440\u0435\u0441":"\u0410\u0434\u0440\u0435\u0441\u0430","\u0430\u0434\u0440\u0435\u0441":"\u0430\u0434\u0440\u0435\u0441\u0430","\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0438\u0433\u0440\u043e\u043a\u043e\u0432":"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0433\u0440\u0430\u0432\u0446\u0456\u0432","\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e":"\u0414\u043e\u0434\u0430\u0442\u043a\u043e\u0432\u043e","\u0421\u043e\u0437\u0434\u0430\u0442\u044c":"C\u0442\u0432\u043e\u0440\u0438\u0442\u0438","\u0417\u0430\u0431\u044b\u043b\u0438":"\u0417\u0430\u0431\u0443\u043b\u0438","\u0412\u043e\u0439\u0442\u0438":"\u0423\u0432\u0456\u0439\u0442\u0438","\u0413\u043b\u0430\u0432\u043d\u0430\u044f":"\u0413\u043e\u043b\u043e\u0432\u043d\u0430","\u041e \u0441\u0435\u0440\u0432\u0438\u0441\u0435":"\u041f\u0440\u043e \u0441\u0435\u0440\u0432\u0456\u0441","\u0412\u0440\u0435\u043c\u044f":"\u0427\u0430\u0441","\u0441":"\u0437","\u0411\u0443\u0434\u0435\u0442 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u0441\u044f \u0432 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0435":"\u0411\u0443\u0434\u0435 \u0432\u0456\u0434\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u0438\u0441\u044f \u0432 \u0456\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0456","\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c":"\u041f\u043e\u0432\u0442\u043e\u0440\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c","\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442":"\u041f\u0430\u0440\u043e\u043b\u0456 \u043d\u0435 \u0441\u043f\u0456\u0432\u043f\u0430\u0434\u0430\u044e\u0442\u044c","\u041d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c":"\u041d\u0435 \u043c\u043e\u0436\u0435 \u0431\u0443\u0442\u0438 \u043f\u043e\u0440\u043e\u0436\u043d\u0456\u043c","\u041d\u0435 \u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0439 \u0435\u043c\u0435\u0439\u043b":"\u041d\u0435 \u0432\u0430\u043b\u0456\u0434\u043d\u044b\u0439 \u0435\u043c\u0435\u0439\u043b","\u0422\u0430\u043a\u043e\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442":"\u0422\u0430\u043a\u0438\u0439 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447 \u0432\u0436\u0435 \u0456\u0441\u043d\u0443\u0454","\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0442\u0441\u044f":"\u0417\u0430\u0440\u0435\u0435\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044c","\u0418\u0433\u0440\u043e\u043a\u043e\u0432":"\u0413\u0440\u0430\u0432\u0446\u0456\u0432","\u0417\u0430\u043b\u043e\u0433\u0438\u043d\u0442\u0435\u0441\u044c, \u0434\u043b\u044f \u0442\u043e\u0433\u043e \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0441\u043b\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0432 \u0447\u0430\u0442":"\u0417\u0430\u043b\u043e\u0433\u0438\u043d\u0442\u0435\u0441\u044c, \u0434\u043b\u044f \u0442\u043e\u0433\u043e \u0449\u043e\u0431 \u043f\u043e\u0441\u043b\u0430\u0442\u0438 \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f \u0432 \u0447\u0430\u0442","\u041f\u043e\u0441\u043b\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435":"\u041f\u043e\u0441\u043b\u0430\u0442\u0438 \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f","\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f":"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0456\u044f","\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u0433\u0440\u0443":"\u0423\u0432\u0456\u0439\u0434\u0456\u0442\u044c \u0449\u043e\u0431 \u0441\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u0433\u0440\u0443","\u0415\u0441\u043b\u0438 \u0442\u044b \u043d\u0435 \u0437\u043d\u0430\u0435\u0448\u044c, \u0433\u0434\u0435 \u043d\u0430\u0439\u0442\u0438 \u043b\u044e\u0434\u0435\u0439 \u0434\u043b\u044f \u0438\u0433\u0440\u044b \u0432 \u0444\u0443\u0442\u0431\u043e\u043b - \u044d\u0442\u043e \u0441\u0430\u0439\u0442 \u043a\u0430\u043a \u0440\u0430\u0437 \u0434\u043b\u044f \u0442\u0435\u0431\u044f! \u0422\u0443\u0442 \u0442\u044b \u043c\u043e\u0436\u0435\u0448\u044c \u0441\u043e\u0431\u0440\u0430\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u0434\u043b\u044f \u0438\u0433\u0440\u044b \u0432 \u0444\u0443\u0442\u0431\u043e\u043b. \u0422\u0443\u0442 \u0442\u044b \u043c\u043e\u0436\u0435\u0448\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u0433\u0440\u0443 \u043b\u0438\u0431\u043e \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u0441\u044f \u043a \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0439.":"\u042f\u043a\u0449\u043e \u0442\u0438 \u043d\u0435 \u0437\u043d\u0430\u0454\u0448, \u0434\u0435 \u0437\u043d\u0430\u0439\u0442\u0438 \u043b\u044e\u0434\u0435\u0439 \u0434\u043b\u044f \u0433\u0440\u0438 \u0432 \u0444\u0443\u0442\u0431\u043e\u043b - \u0446\u0435 \u0441\u0430\u0439\u0442 \u044f\u043a \u0440\u0430\u0437 \u0434\u043b\u044f \u0442\u0435\u0431\u0435! \u0422\u0443\u0442 \u0442\u0438 \u043c\u043e\u0436\u0435\u0448 \u0437\u0456\u0431\u0440\u0430\u0442\u0438 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u0434\u043b\u044f \u0433\u0440\u0438 \u0432 \u0444\u0443\u0442\u0431\u043e\u043b. \u0422\u0443\u0442 \u0442\u0438 \u043c\u043e\u0436\u0435\u0448 \u0441\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u0433\u0440\u0443 \u0430\u0431\u043e \u043f\u0440\u0438\u0454\u0434\u043d\u0430\u0454\u0442\u044c\u0441\u044f \u0434\u043e \u0432\u0436\u0435 \u0456\u0441\u043d\u0443\u044e\u0447\u043e\u0457."}')},193:function(e,t,a){e.exports=a(348)},202:function(e,t,a){},235:function(e,t,a){},236:function(e,t,a){},237:function(e,t,a){},238:function(e,t,a){},239:function(e,t,a){},240:function(e,t,a){},242:function(e,t,a){},243:function(e,t,a){},304:function(e,t,a){},305:function(e,t,a){},306:function(e,t,a){},307:function(e,t,a){},308:function(e,t,a){},309:function(e,t,a){},310:function(e,t,a){},311:function(e,t,a){},312:function(e,t,a){},313:function(e,t,a){},314:function(e,t,a){},315:function(e,t,a){},316:function(e,t,a){},317:function(e,t,a){},318:function(e,t,a){},320:function(e,t,a){},321:function(e,t,a){},322:function(e,t,a){},323:function(e,t,a){},344:function(e,t){},348:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(22),c=a(400),s=a(14),l=a(7),i=a(8),o=a(10),u=a(9),m=(a(202),a(381)),d=a(11),p=a(12),h=a.n(p),f=a(20),v="_SUCCESS",g=a(108),b=a.n(g),E=a(53),y=a(166),O=a(44),j=a.n(O);var w={user:null,isAuthenticated:!O.isEmpty(null)};function k(e){return O.pick(e,["name"])}var N=a(29),C=new N.c({name:"",country:"",id:null})();function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N.a;return e.reduce((function(e,a){return e.set(a.id,new t(a))}),new N.b({}))}var A=Object(N.c)({loading:!1,entities:new N.b({})}),x=Object(N.c)({id:0,city:"",city_id:0,address:"",date:"",district:null,additional:"",players:0,activePlayers:1}),D=new A,_=new(Object(N.c)({id:null,city:null,address:null,lat:null,district:null,long:null,players:0,city_id:0,active_players:1,date:null,additional:null,loading:!1,fieldNumbersInGame:[]}));function M(e,t){var a=t.fieldNumbersInGame;return e.set("fieldNumbersInGame",a)}function I(e,t){var a=t.fieldNumbersInGame;return e.set("fieldNumbersInGame",a)}var G=Object(N.c)({loading:!1,entities:new N.b({})}),P=Object(N.c)({id:null,text:null,username:null,date:null}),T=new G,L=new N.c({loading:!1,loaded:!1})(),R=Object(E.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(console.log("initial state, auth",t),t.type){case"SET_CURRENT_USER":var a=t.user;return localStorage.setItem("user",JSON.stringify(a)),{user:k(a),isAuthenticated:!O.isEmpty(a)};default:return e}},location:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CITY":return t.payload?e.merge(t.payload):C;default:return e}},games:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"LOAD_GAMES"+v:return n.data?e.update("entities",(function(e){return S(n.data,x).sortBy((function(e){return e.get("date")}))})):D;case"GAME_ADDED_START":return e.set("loading",!0);case"PLAYER_JOINED":console.log("player join in list",n);var r=n.gameId,c=n.activePlayers;return e.updateIn(["entities",r],(function(e){try{return e.set("activePlayers",c)}catch(t){console.log("not connected to list yet")}}));case"GAME_ADDED"+v:var s=n.data,l=s.id,i=s.city_id;return i!==n.store.location.id?e:e.setIn(["entities",l],new x(n.data)).set("loading",!1).update("entities",(function(e){return e.sortBy((function(e){return e.get("date")}))}));default:return e}},game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"LOAD_GAME_START":return e.set("loading",!0);case"LOAD_GAME"+v:return e.merge(n.data).set("loading",!1);case"PLAYER_JOINED":var r=n.gameId,c=n.activePlayers,s=n.info;return e.get("id")===r?"joined"===s.event?I(e,s):"leaved"===s.event?M(e,s):e.set("active_players",c).set("fieldNumbersInGame",s.fieldNumbersInGame):e;default:return e}},gameChat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"GAME_CHAT_MESSAGE_HISTORY":return e.update("entities",(function(e){return S(n,P)}));case"GAME_CHAT_MESSAGE_ADDED":var r=e.setIn(["entities",n.id],new P(n));return r.update("entities",(function(e){return r.entities.sortBy((function(e){return e.get("date")})).reverse()}));default:return e}},loader:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(console.log("TYPE ----",t.type),t.type){case"LOADING":return console.log("loading !!!!"),e.set("loading",!0).set("loaded",!1);case"LOADED":return e.set("loading",!1).set("loaded",!0);default:return e}}}),H=a(167),J=a(179),U=Object(E.createStore)(R,Object(H.composeWithDevTools)(Object(E.applyMiddleware)(y.a,(function(e){return function(t){return function(a){var n=a.callApi,r=a.type,c=Object(J.a)(a,["callApi","type"]);return n?(t(Object(d.a)(Object(d.a)({},c),{},{type:r+"_START"})),Y.get(n).then((function(a){t(Object(d.a)(Object(d.a)({},c),{},{type:r+v,payload:Object(d.a)(Object(d.a)({},a),{},{store:e.getState()})}))}),(function(e){t(Object(d.a)(Object(d.a)({},c),{},{type:r+"_FAIL",error:e}))}))):t(a)}}}))));b.a.defaults.baseURL="/api",b.a.interceptors.response.use((function(e){return e}),(function(e){return 403===e.response.status&&U.dispatch(B({})),Promise.reject(e)}));var Y=b.a;function B(e){return{type:"SET_CURRENT_USER",user:e}}var F=a(82),W=a(83),q=a(18),z=a(124),K=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e;if(console.log("componentDidMount LOGIN WIDGET111"),console.log(z.Base64),window&&window.location.hash)return e=JSON.parse(z.Base64.decode(window.location.hash)),console.log(e),localStorage.setItem("user",JSON.stringify(e)),document.location.href="/",e;try{e=JSON.parse(localStorage.user)}catch(a){e=null}var t=this.props.setCurUsr;console.log(e),t(e)}},{key:"render",value:function(){var e=this.props,t=e.auth,a=e.logout,r=e.t;return n.createElement("div",{className:"absolute-login-widget"},n.createElement("div",null,t.isAuthenticated?t.user.name:"",t.isAuthenticated?n.createElement("a",{onClick:a,href:"#",className:"sign-out"},n.createElement(F.a,{icon:W.b})):n.createElement(m.a,{to:"/login",className:"sign-out"},r("\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f")," ",n.createElement(F.a,{icon:W.b}))))}}]),a}(n.Component),V=Object(s.b)((function(e){return{auth:e.auth}}),{logout:function(){return function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.post("/auth/logout",{});case 2:localStorage.removeItem("user"),t(B({}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setCurUsr:function(e){return function(t){console.log("usr",e),t(B(e))}}})(q.b()(K)),Q=(a(235),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={mobileMenuShowed:!1},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){console.log("HEADER MOUNT")}},{key:"toggleMenu",value:function(){this.setState({mobileMenuShowed:!this.state.mobileMenuShowed})}},{key:"hideMenu",value:function(){this.setState({mobileMenuShowed:!1})}},{key:"render",value:function(){var e=this.props.t;return n.createElement("nav",{className:"main-menu"},n.createElement("div",{className:"container"},n.createElement("div",{className:"mobile-only"},n.createElement("div",{className:"mobile-menu"},n.createElement(F.a,{onClick:this.toggleMenu.bind(this),icon:W.a,size:"2x"}),this.state.mobileMenuShowed&&n.createElement("div",{className:"mobile-menu-items"},n.createElement("ul",{className:"shadow-2"},n.createElement("li",{onClick:this.hideMenu.bind(this)},n.createElement(m.a,{to:"/"},e("\u0413\u043b\u0430\u0432\u043d\u0430\u044f"))),n.createElement("li",{onClick:this.hideMenu.bind(this)},n.createElement(m.a,{to:"/about"},e("\u041e \u0441\u0435\u0440\u0432\u0438\u0441\u0435"))),n.createElement("li",{onClick:this.hideMenu.bind(this)},n.createElement(m.a,{to:"/create-game"},e("\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u0433\u0440\u0443"))))))),n.createElement("ul",{id:"main-menu-ul",className:"desktop-only"},n.createElement("li",{className:"/"===window.location.pathname?"active":""},n.createElement(m.a,{to:"/"},e("\u0413\u043b\u0430\u0432\u043d\u0430\u044f"))),n.createElement("li",{onClick:this.hideMenu.bind(this),className:"/about"===window.location.pathname?"active":""},n.createElement(m.a,{to:"/about"},e("\u041e \u0441\u0435\u0440\u0432\u0438\u0441\u0435"))),n.createElement("li",{className:"/create-game"===window.location.pathname?"active":""},n.createElement(m.a,{to:"/create-game"},e("\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u0433\u0440\u0443")))),n.createElement(V,null)))}}]),a}(n.Component)),X=q.b()(Q),Z=(a(236),a(237),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.country,r=e.id,c=e.doChoice;return n.createElement("div",{className:"city-item",onClick:function(){c({name:t,country:a,id:r})}},this.composeAddress(this.props.name),n.createElement("small",null,this.composeAddress(this.props.region,", ")),n.createElement("small",null,this.composeAddress(this.props.country,", ")))}},{key:"composeAddress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e?n.createElement("span",null,t+e):""}}]),a}(n.Component)),$=Object(s.b)((function(e){return{location:e.location}}),null)(Z),ee=(a(238),n.createContext(null)),te=ee.Provider,ae=ee.Consumer,ne=function(e){return function(t){return n.createElement(ae,null,(function(a){return n.createElement(e,Object.assign({},t,{cityService:a}))}))}},re=n.createContext(null),ce=re.Provider,se=re.Consumer,le=function(e){return function(t){return n.createElement(se,null,(function(a){return n.createElement(e,Object.assign({},t,{gameService:a}))}))}},ie=function(e){var t=function(t){Object(o.a)(r,t);var a=Object(u.a)(r);function r(){return Object(l.a)(this,r),a.apply(this,arguments)}return Object(i.a)(r,[{key:"checkAuth",value:function(){this.props.isAuthenticated||this.props.history.push("/")}},{key:"componentDidMount",value:function(){this.checkAuth()}},{key:"componentDidUpdate",value:function(){this.checkAuth()}},{key:"render",value:function(){return n.createElement(e,this.props)}}]),r}(n.Component);return Object(s.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}))(t)},oe=ne(function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={cities:[],city:"",loading:null},e.handleChange=function(){var t=Object(f.a)(h.a.mark((function t(a){var n,r,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.target.value,e.setState({city:n}),r=e.props.cityService,!(n.length>2)){t.next=11;break}return e.setState({loading:!0}),t.next=7,r.getCities(n);case 7:c=t.sent,console.log(c),e.setState({loading:!1}),e.setState({cities:c});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.pickerDoChoice=function(t){return e.setState({cities:[],city:t.name}),e.props.doChoice(t)},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return n.createElement("div",{className:"city-auto-complete"},n.createElement("input",{type:"text",className:"form-control",autoComplete:"off",placeholder:"\u0413\u043e\u0440\u043e\u0434",onChange:this.handleChange}),this.state.loading&&n.createElement("div",{className:"lds-hourglass"}),this.state.cities.length?n.createElement("div",{className:"list"},this.state.cities.map((function(t){return n.createElement($,Object.assign({key:t.id},t,{doChoice:e.pickerDoChoice}))}))):null)}}]),a}(n.Component));a(239);var ue=function(e){return e.message?n.createElement("div",{className:"common-error-message"},e.message):null},me=a(384),de=(a(240),a(25)),pe=a(387),he=a(402),fe=a(170),ve=(a(241),a(242),a(174)),ge=a.n(ve),be=a(178),Ee=a(383),ye=Object(be.a)({palette:{primary:ge.a}}),Oe=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleDateChange=function(t){(0,e.props.onChange)(t)},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.t;return n.createElement("div",{className:"date"},n.createElement(Ee.a,{theme:ye},n.createElement(de.a,{locale:"ru",utils:fe.a},n.createElement(me.a,{container:!0,justify:"space-around"},n.createElement("div",{className:"customDatePickerWidth"},n.createElement(pe.a,{margin:"normal",id:"date-picker-inline",label:e("\u0414\u0430\u0442\u0430"),cancelLabel:"\u041e\u0442\u043c\u0435\u043d\u0430",okLabel:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c",value:this.props.value,onChange:this.handleDateChange})),n.createElement("div",{className:"customDatePickerWidth"},n.createElement(he.a,{margin:"normal",id:"time-picker",label:e("\u0412\u0440\u0435\u043c\u044f"),ampm:!1,cancelLabel:"\u041e\u0442\u043c\u0435\u043d\u0430",okLabel:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c",value:this.props.value,onChange:this.handleDateChange}))))))}}]),a}(n.Component),je=q.b()(Oe);function we(e){return e?function(t){localStorage.setItem("location",JSON.stringify(e)),t(function(e){return{type:"LOAD_GAMES",callApi:"/game/city/".concat(e.id)}}(e)),t({type:"SET_CITY",payload:e})}:function(t){localStorage.setItem("location",""),t({type:"LOAD_GAMES"+v,payload:{data:null}}),t({type:"SET_CITY",payload:e})}}var ke=a(74);function Ne(){return console.log("ac loading"),{type:"LOADING"}}function Ce(){return console.log("ac loaded"),{type:"LOADED"}}ke.locale("ru");var Se={data:{city:"",city_id:"",address:"",additional:"",players:6,date:ke.now(),district:""},errors:{}},Ae=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state=void 0,n.setCity=function(e){n.setState({data:Object(d.a)(Object(d.a)({},n.state.data),{},{city:e.name,city_id:e.id})})},n.resetCity=function(){n.setState({data:Object(d.a)(Object(d.a)({},n.state.data),{},{city:""})})},n.onChange=function(e){n.setState({data:Object(d.a)(Object(d.a)({},n.state.data),{},{[e.target.name]:e.target.value})})},n.validate=function(e){var t={};for(var a in e)-1===["players","lat","long","additional"].indexOf(a)&&(e[a]||(t[a]="\u041d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"));return t},n.changeDate=function(e){n.setState({data:Object(d.a)(Object(d.a)({},n.state.data),{},{date:e})})},n.onSubmit=function(){var e=Object(f.a)(h.a.mark((function e(t){var a,r,c,s,l,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=n.state.data,n.checkIfAllowedCreate()){e.next=4;break}return e.abrupt("return");case 4:if(n.initCity(a),r=n.validate(a),n.setState({errors:r}),!j.a.isEmpty(r)){e.next=18;break}return c=n.props,s=c.gameService,l=c.loading,i=c.loaded,e.prev=9,l(),e.next=13,s.add(a);case 13:201===e.sent.status&&(n.setState(Se),console.log("red"),n.props.history.push("/"));case 15:return e.prev=15,i(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[9,,15,18]])})));return function(t){return e.apply(this,arguments)}}(),a.setMeta(),n.state=Se,n}return Object(i.a)(a,[{key:"checkIfAllowedCreate",value:function(){var e=this.props,t=e.auth,a=e.t;return t.isAuthenticated||alert(a("\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u0433\u0440\u0443")),t.isAuthenticated}},{key:"initCity",value:function(e){(0,this.props.setCity)({name:e.city,id:e.city_id})}},{key:"render",value:function(){var e=this.state,t=e.data,r=e.errors,c=this.props.t;return n.createElement("div",{className:"row main-content"},n.createElement("div",{className:"left-col create-game-left-col"},n.createElement("form",{className:"game-form",onSubmit:this.onSubmit},n.createElement("fieldset",null,n.createElement("legend",null,c("\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u0433\u0440\u0443")),n.createElement("div",{className:"form-group",id:"gameCitySection"},n.createElement("label",null,c("\u0413\u043e\u0440\u043e\u0434")),!this.state.data.city&&n.createElement(oe,{doChoice:this.setCity,city:this.state.data.city}),this.state.data.city&&n.createElement("div",{className:"success-panel"},this.state.data.city,n.createElement("span",{onClick:this.resetCity},"\u2715")),r.city&&n.createElement(ue,{message:r.city})),n.createElement("div",{className:"form-group"},n.createElement("label",null,c("\u0420\u0430\u0439\u043e\u043d")),n.createElement("input",{type:"text",className:"form-control",name:"district",value:t.district,onChange:this.onChange}),r.district&&n.createElement(ue,{message:r.district})),n.createElement("div",{className:"form-group"},n.createElement("label",null,c("\u0410\u0434\u0440\u0435\u0441")),n.createElement("input",{type:"text",className:"form-control",name:"address",value:t.address,onChange:this.onChange}),r.address&&n.createElement(ue,{message:r.address})),n.createElement("div",{className:"form-group date"},n.createElement(je,{onChange:this.changeDate,value:t.date}),r.date&&n.createElement(ue,{message:r.date})),n.createElement("div",{className:"form-group"},n.createElement("label",null,c("\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0438\u0433\u0440\u043e\u043a\u043e\u0432")),n.createElement("select",{className:"form-control col-2",onChange:this.onChange,value:t.players,name:"players"},a.printFieldPlayersOptionList()),r.players&&n.createElement(ue,{message:r.players}))),n.createElement("div",{className:"form-group"},n.createElement("label",null,c("\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e")),n.createElement("textarea",{className:"form-control",name:"additional",value:t.additional,onChange:this.onChange}),r.additional&&n.createElement(ue,{message:r.additional})),n.createElement("div",{className:"form-group"},n.createElement("button",{type:"submit",className:"btn submit-btn shadow-0"},c("\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))))))}}],[{key:"setMeta",value:function(){document.title="Football for everyone"}},{key:"printFieldPlayersOptionList",value:function(){for(var e=[],t=6;t<23;t++)e.push(t);return e.map((function(e){return n.createElement("option",{key:e},e)}))}}]),a}(n.Component),xe=Object(s.b)((function(e){return{location:e.location,games:e.game,auth:e.auth}}),{setCity:we,setUser:function(e){return console.log("set user"),function(t){t(B(e))}},loading:Ne,loaded:Ce})(le(q.b()(Ae))),De=(a(243),a(77)),_e=a.n(De),Me=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{email:""},loading:!1,backendErrors:[],errors:{email:null}},e.onChange=function(t){e.setState({data:Object(d.a)(Object(d.a)({},e.state.data),{},{[t.target.name]:t.target.value})})},e.submit=function(){var t=Object(f.a)(h.a.mark((function t(n){var r,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.forgotPassword,n.preventDefault(),c=a.validate(e.state.data),j.a.isEmpty(c.email)){t.next=6;break}return e.setState({errors:c}),t.abrupt("return");case 6:return t.next=8,r(e.state.data.email);case 8:window.location.href="/";case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.data.email;return n.createElement("div",null,n.createElement("form",{className:"col-12 col-md-6 col-lg-6 col-xl-6 login-form",onSubmit:this.submit},n.createElement("div",{className:"form-group"},this.state.errors.email&&n.createElement(ue,{message:this.state.errors.email}),n.createElement("label",null,"Email"),n.createElement("input",{value:e,name:"email",onChange:this.onChange,className:"form-control",type:"text"})),n.createElement("p",null,n.createElement("button",{type:"submit",className:"btn submit-btn mb-2"},"\u0412\u043e\u0439\u0442\u0438"))))}}],[{key:"validate",value:function(e){var t={email:""};return e.email&&!_e.a.isEmail(e.email)&&(t.email="\u041d\u0435 \u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0439 \u0435\u043c\u0435\u0439\u043b"),e.email||(t.email="\u041d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"),t}}]),a}(n.Component),Ie=Object(s.b)(null,{forgotPassword:function(e){return function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Y.post("/auth/forgot-password",{email:e});case 3:return n=t.sent,t.abrupt("return",Object(d.a)(Object(d.a)({},n.data),{},{status:n.status}));case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",t.t0.response);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})(Me);a(304),a(305);var Ge=q.b()((function(e){var t=e.t;return n.createElement("a",{href:"/api/auth/google"},n.createElement("div",{className:"loginWithGoogle"},n.createElement("img",{width:"20px",alt:"Google sign-in",src:"/img/Google__G__Logo.svg.webp"}),t("\u0412\u043e\u0439\u0442\u0438")," ",t("\u0441")," google"))})),Pe=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{email:"",password:""},loading:!1,backendErrors:[],errors:{email:null,password:null}},e.goToRegister=function(e){e.preventDefault(),window.location.href="/registration"},e.onChange=function(t){e.setState({data:Object(d.a)(Object(d.a)({},e.state.data),{},{[t.target.name]:t.target.value})})},e.submit=function(){var t=Object(f.a)(h.a.mark((function t(a){var n,r,c,s,l,i,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.login,c=n.loading,s=n.loaded,l=e.state.data,a.preventDefault(),i=e.validate(l),e.setState({errors:i}),i.email||i.password){t.next=15;break}return t.prev=6,c(),t.next=10,r(l);case 10:o=t.sent,e.handleErrors(o.status);case 12:return t.prev=12,s(),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[6,,12,15]])})));return function(e){return t.apply(this,arguments)}}(),e.validate=function(e){var t={password:null,email:null};return e.password||(t.password="\u041d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"),e.email||(t.email="\u041d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"),_e.a.isEmail(e.email)||(t.email="\u041d\u0435 \u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0439 \u0435\u043c\u0435\u0439\u043b"),t},e}return Object(i.a)(a,[{key:"handleErrors",value:function(e){if(e<300)this.props.history.push("/");else switch(e){case 401:this.setState({backendErrors:["\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u043f\u043e\u0447\u0442\u043e\u0432\u044b\u0439 \u0430\u0434\u0440\u0435\u0441\u0441"]});break;case 403:this.setState({backendErrors:["\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"]});break;default:this.setState({backendErrors:["\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u0430\u044f \u043e\u0449\u0438\u0431\u043a\u0430, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443"]})}}},{key:"render",value:function(){var e=this.props.t,t=this.state.data;return n.createElement("div",null,n.createElement("form",{className:"col-md-6 login-form",onSubmit:this.submit},this.state.backendErrors.map((function(e){return n.createElement(ue,{key:e,message:e})})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"E-mail ",e("\u0430\u0434\u0440\u0435\u0441")),n.createElement("input",{type:"email",id:"email",name:"email",placeholder:"example@gmail.com",value:t.email,onChange:this.onChange,className:"form-control"}),this.state.errors.email&&n.createElement(ue,{message:this.state.errors.email})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"\u041f\u0430\u0440\u043e\u043b\u044c"),n.createElement("input",{type:"password",id:"password",name:"password",value:t.password,onChange:this.onChange,className:"form-control",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"}),this.state.errors.password&&n.createElement(ue,{message:this.state.errors.password})),n.createElement("div",{className:"form-group"},n.createElement("div",{className:"forgot-password"},n.createElement(m.a,{to:"/forgot-password"},e("\u0417\u0430\u0431\u044b\u043b\u0438")," \u043f\u0430\u0440\u043e\u043b\u044c ?")),n.createElement("button",{type:"submit",className:"btn submit-btn mb-2"},e("\u0412\u043e\u0439\u0442\u0438")),"\xa0",n.createElement("button",{onClick:this.goToRegister,className:"btn submit-btn mb-2"},e("\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0442\u0441\u044f")),n.createElement("br",null),n.createElement(Ge,null))))}}]),a}(n.Component),Te=Object(s.b)((function(e){return{auth:e.auth}}),{login:function(e){return function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Y.post("/auth/login",e);case 3:return n=t.sent,a(B(n.data)),t.abrupt("return",Object(d.a)(Object(d.a)({},n.data),{},{status:n.status}));case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",t.t0.response);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},loading:Ne,loaded:Ce})(q.b()(Pe)),Le=(a(306),a(398));a(307),a(308);var Re=q.b()((function(e){var t=e.game,a=e.t;return n.createElement("div",{className:"game-info"},n.createElement("div",null,n.createElement("div",null,a("\u0413\u043e\u0440\u043e\u0434")),n.createElement("div",null,t.city)),n.createElement("div",null,n.createElement("div",null,"\u0420\u0430\u0439\u043e\u043d"),n.createElement("div",null,t.district)),n.createElement("div",null,n.createElement("div",null,a("\u0410\u0434\u0440\u0435\u0441")),n.createElement("div",null,t.address)),n.createElement("div",null,n.createElement("div",null,a("\u0418\u0433\u0440\u043e\u043a\u043e\u0432")),n.createElement("div",null,t.players," (",t.active_players,")")),t.additional&&n.createElement("div",null,n.createElement("div",null,a("\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e")),n.createElement("div",null,t.additional)))})),He=(a(309),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return n.createElement("div",{className:"teems-vs-flags"},n.createElement("div",{className:"first-teem"},n.createElement("div",null,n.createElement("img",{alt:"football-teem-first",src:"/img/orange-shirt.svg"}))),n.createElement("div",{className:"vs"},"\u2014"),n.createElement("div",{className:"second-teem"},n.createElement("div",null,n.createElement("img",{alt:"football-teem-second",src:"/img/white-shirt.svg"}))))}}]),a}(n.Component)),Je=(a(310),a(311),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.message,t=e.text,a=e.username,r=e.date;return n.createElement("li",{className:"chatMessage"},n.createElement("div",{className:"message-data"},n.createElement("span",{className:"message-data-name"},a),n.createElement("span",{className:"message-data-time"},new Date(r).toISOString().slice(0,16).replace("T"," "))),n.createElement("div",{className:"message my-message shadow-0"},t))}}]),a}(n.Component)),Ue=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).maintainSocketMessages=function(){var t=Object(f.a)(h.a.mark((function t(a){var n,r,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.props,r=n.addChatMessage,c=n.loadChatHistory,a.on("*",(function(e){switch(console.log(e),e.data[0]){case"GAME_CHAT_MESSAGE_HISTORY":c(e.data[1]);break;case"GAME_CHAT_MESSAGE_ADDED":r(e.data[1])}}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={message:null},e.onChange=function(t){e.setState({[t.target.name]:t.target.value})},e.sendMessage=function(){var t=Object(f.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(13===a.keyCode){t.next=2;break}return t.abrupt("return");case 2:if(""!==a.target.value.trim()){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.submit();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.gameService,n=t.gameId,e.t0=this,e.next=4,a.initChat(n);case 4:return e.t1=e.sent,e.next=7,e.t0.maintainSocketMessages.call(e.t0,e.t1);case 7:return e.next=9,a.getChatHistory(n);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.props.gameService.destroyChat()}},{key:"submit",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t,a,n,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.getElementById("message").value=null,t=this.props,a=t.gameService,n=t.gameId,r=t.t,c=j.a.pick(this.state,["message"]),c.message){e.next=6;break}return alert("\u041d\u0435\u0442 \u0441\u043c\u044b\u0441\u043b\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u043f\u0443\u0441\u0442\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"),e.abrupt("return");case 6:return e.prev=6,e.next=9,a.addChatMessage(Object(d.a)(Object(d.a)({},j.a.pick(this.state,["message"])),{},{gameId:n}));case 9:this.setState({message:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),e.t0.response.status>400&&e.t0.response.status<500&&alert(r("\u0417\u0430\u043b\u043e\u0433\u0438\u043d\u0442\u0435\u0441\u044c, \u0434\u043b\u044f \u0442\u043e\u0433\u043e \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0441\u043b\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0432 \u0447\u0430\u0442"));case 15:case"end":return e.stop()}}),e,this,[[6,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.gameChat,a=e.t;return n.createElement("div",{className:"chat"},n.createElement("hr",null),n.createElement("div",{className:"form-group"},n.createElement("textarea",{onChange:this.onChange,className:"form-control",name:"message",id:"message",onKeyUp:this.sendMessage}),n.createElement("br",null),n.createElement("button",{className:"btn submit-btn mb-2 shadow-0",onClick:this.submit.bind(this)},a("\u041f\u043e\u0441\u043b\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"))),n.createElement("form",null,n.createElement("ul",null,t.entities.valueSeq().map((function(e){return n.createElement(Je,{key:e.id,message:e})})))))}}]),a}(n.Component),Ye=Object(s.b)((function(e){return{gameChat:e.gameChat}}),{addChatMessage:function(e){return{type:"GAME_CHAT_MESSAGE_ADDED",payload:e}},loadChatHistory:function(e){return{type:"GAME_CHAT_MESSAGE_HISTORY",payload:e}}})(le(q.b()(Ue))),Be=(a(312),a(313),a(314),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).applyGame=function(){var t=e.props,a=t.gameService,n=t.game,r=t.index,c=t.loading,s=t.loaded;c(),a.joinGame(n.id,r).catch((function(e){e.response.status>400&&e.response.status<500&&alert("\u0417\u0430\u043b\u043e\u0433\u0438\u043d\u0442\u0435\u0441\u044c \u0441\u043d\u0430\u0447\u0430\u043b\u0430")})).finally(s)},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.teem,a=e.index,r=e.gameRedux,c=r.fieldNumbersInGame&&r.fieldNumbersInGame.length>0&&-1!==r.fieldNumbersInGame.indexOf(a),s="/img/"+t+"-shirt.svg";return n.createElement("div",{className:"relative player",onClick:this.applyGame},n.createElement("div",{className:"number"},a),c?n.createElement("img",{className:"shirt",alt:"active-shirt",src:s}):n.createElement("img",{alt:"grey-shirt",className:"t-shirt-grey shirt",src:"/img/gray-shirt.svg"}))}}]),a}(n.Component)),Fe=le(Object(s.b)((function(e){return{gameRedux:e.game}}),{loading:Ne,loaded:Ce})(Be)),We=function(){function e(t){if(Object(l.a)(this,e),this.players=void 0,this.randomInt=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},this.tacticOrders={2:[1,1],3:[1,2],4:[1,2,1],5:[1,3,1],6:[1,3,2],7:[1,3,2,1],8:[1,3,3,1],9:[1,3,1,3,1],10:[1,3,2,3,1],11:[[1,4,4,2],[1,4,3,3]]},isNaN(t)||t<0)throw Error("Invalid parameter, should be number and > 0");this.players=t}return Object(i.a)(e,[{key:"splitOnTeems",value:function(){if(this.players%2){var e=(this.players-1)/2;return[e+1,e]}var t=this.players/2;return[t,t]}},{key:"formGameOrder",value:function(){var e=this,t=this.splitOnTeems(),a=[];return t.forEach((function(t,n){var r=Array.isArray(e.tacticOrders[t][0])?e.tacticOrders[t][e.randomInt(0,e.tacticOrders[t].length-1)]:e.tacticOrders[t];a.push(r)})),a}}]),e}(),qe=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={gameOrder:[],players:0},e}return Object(i.a)(a,[{key:"render",value:function(){var e=" football-field ";return e+=this.props.auth.isAuthenticated?"active":"regular",n.createElement("div",null,n.createElement("div",{className:"north-socket"},n.createElement("div",{className:"cage"})),n.createElement("div",{className:e},n.createElement("div",{className:"football-field-center"}),n.createElement("div",{className:"left-top-corner"}),n.createElement("div",{className:"right-top-corner"}),n.createElement("div",{className:"center"},n.createElement("div",{className:"point"})),n.createElement("div",{className:"left-bottom-corner"}),n.createElement("div",{className:"right-bottom-corner"}),this.state.gameOrder.length>0&&this.generateLines()),n.createElement("div",{className:"south-socket"},n.createElement("div",{className:"cage"})))}},{key:"generateLines",value:function(){var e=[],t=this.props.game,a=t.players,r=[[],[]],c=[],s=1;return this.state.gameOrder.forEach((function(e,l){e.forEach((function(e){c=[];for(var i=1;i<=e&&a>0;i++)c.push(n.createElement(Fe,{teem:0===l?"orange":"white",key:i,game:t,index:a,isActive:!1})),a--;r[l].push(n.createElement("div",{key:s++,className:"tactic-line "},c))}))})),e.push(n.createElement("div",{key:"north-side",className:"half-field north-side lines-".concat(r[0].length)},n.createElement("div",{className:"penalty-cage"}),n.createElement("div",{className:"penalty-cage-1"}),n.createElement("div",{className:"half-circle-wrapper"},n.createElement("div",{className:"half-circle"})),r[0])),e.push(n.createElement("div",{key:"south-side",className:"half-field south-side lines-".concat(r[1].length)},n.createElement("div",{className:"penalty-cage"}),n.createElement("div",{className:"penalty-cage-1"}),n.createElement("div",{className:"half-circle"}),r[1])),e}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{gameOrder:e.game.players===t.players?t.gameOrder:new We(e.game.players).formGameOrder(),players:e.game.players}}}]),a}(n.Component),ze=Object(s.b)((function(e){return{auth:e.auth}}))(qe),Ke=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={gameOrder:[],players:0},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){document.title="Football for everyone";var e=this.props,t=e.match.params;(0,e.loadGame)(t.id)}},{key:"render",value:function(){var e=this.props,t=e.game,a=e.auth,r=e.t,c=this.props.match.params.id;return n.createElement("div",null,n.createElement("div",{className:"row game"},n.createElement("div",{className:"left-col"},n.createElement("div",null,n.createElement("p",null,a.isAuthenticated?r("\u0427\u0442\u043e\u0431\u044b \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u0441\u044f \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u0444\u0443\u0442\u0431\u043e\u043b\u043a\u0443"):r("\u0427\u0442\u043e\u0431\u044b \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u0441\u044f, \u0437\u0430\u043b\u043e\u0433\u0438\u043d\u0442\u0435\u0441\u044c \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u0444\u0443\u0442\u0431\u043e\u043b\u043a\u0443"))),n.createElement("div",{className:"football-field-wrapper shadow-1"},n.createElement("div",null,n.createElement(ze,{game:t})))),n.createElement("div",{className:"right-col"},n.createElement("div",{className:"flags-info"},n.createElement(Re,{game:t}),n.createElement(He,null)),n.createElement(Ye,{gameId:c}))))}}]),a}(n.Component),Ve=Object(s.b)((function(e){return{game:e.game,auth:e.auth}}),{loadGame:function(e){return{type:"LOAD_GAME",callApi:"/game/".concat(e)}}})(le(Object(q.b)()(Ke))),Qe=(a(315),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){a.setMeta()}},{key:"render",value:function(){var e=this.props.t;return n.createElement("h3",null,n.createElement("article",null,n.createElement("i",null,e("\u0415\u0441\u043b\u0438 \u0442\u044b \u043d\u0435 \u0437\u043d\u0430\u0435\u0448\u044c, \u0433\u0434\u0435 \u043d\u0430\u0439\u0442\u0438 \u043b\u044e\u0434\u0435\u0439 \u0434\u043b\u044f \u0438\u0433\u0440\u044b \u0432 \u0444\u0443\u0442\u0431\u043e\u043b - \u044d\u0442\u043e \u0441\u0430\u0439\u0442 \u043a\u0430\u043a \u0440\u0430\u0437 \u0434\u043b\u044f \u0442\u0435\u0431\u044f! \u0422\u0443\u0442 \u0442\u044b \u043c\u043e\u0436\u0435\u0448\u044c \u0441\u043e\u0431\u0440\u0430\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u0434\u043b\u044f \u0438\u0433\u0440\u044b \u0432 \u0444\u0443\u0442\u0431\u043e\u043b. \u0422\u0443\u0442 \u0442\u044b \u043c\u043e\u0436\u0435\u0448\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u0433\u0440\u0443 \u043b\u0438\u0431\u043e \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u0441\u044f \u043a \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0439."))))}}],[{key:"setMeta",value:function(){document.title="About"}}]),a}(n.Component)),Xe=q.b()(Qe),Ze=(a(316),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{email:"",password:"",name:"",repeatPassword:""},loading:!1,errors:{email:null,repeatPassword:null,password:null,name:null},backendErrors:[]},e.onChange=function(t){e.setState({data:Object(d.a)(Object(d.a)({},e.state.data),{},{[t.target.name]:t.target.value})})},e.validate=function(t){var a=e.props.t,n={password:null,email:null,name:null,repeatPassword:null};return t.password||(n.password=a("\u041d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c")),t.email||(n.email=a("\u041d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c")),t.name||(n.name=a("\u041d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c")),!t.password!==!t.repeatPassword&&(n.repeatPassword=a("\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442")),_e.a.isEmail(t.email)||(n.email=a("\u041d\u0435 \u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0439 \u0435\u043c\u0435\u0439\u043b")),n},e.onSubmit=function(){var t=Object(f.a)(h.a.mark((function t(a){var n,r,c,s,l,i,o,u,m;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.props.t,r=e.state.data,a.preventDefault(),c=e.validate(r),e.setState({errors:c}),t.t0=h.a.keys(c);case 6:if((t.t1=t.t0()).done){t.next=12;break}if(s=t.t1.value,!c[s]){t.next=10;break}return t.abrupt("return");case 10:t.next=6;break;case 12:return l=j.a.pick(r,["name","password","email"]),i=e.props,o=i.registration,u=i.loading,m=i.loaded,t.prev=14,u(),t.next=18,o(l);case 18:e.props.history.push("/complete-registration"),t.next=29;break;case 21:t.prev=21,t.t2=t.catch(14),t.t3=t.t2.status,t.next=403===t.t3?26:28;break;case 26:return e.setState({backendErrors:[n("\u0422\u0430\u043a\u043e\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442")]}),t.abrupt("break",29);case 28:e.setState({backendErrors:t.t2.data.errors});case 29:return t.prev=29,m(),t.finish(29);case 32:case"end":return t.stop()}}),t,null,[[14,21,29,32]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.t,t=this.state.data;return n.createElement("form",{className:" col-12 col-md-12 col-sm-12 col-lg-6 col-xl-6 login-form",onSubmit:this.onSubmit},this.state.backendErrors?this.state.backendErrors.map((function(e){return n.createElement(ue,{key:e,message:e})})):null,n.createElement("div",{className:"form-group"},n.createElement("label",null,"\u041d\u0438\u043a"),n.createElement("input",{type:"name",id:"name",name:"name",value:t.name,placeholder:e("\u0411\u0443\u0434\u0435\u0442 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u0441\u044f \u0432 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0435"),onChange:this.onChange,className:"form-control"}),this.state.errors.name&&n.createElement(ue,{message:this.state.errors.name})),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"exampleInputEmail1"},"E-mail ",e("\u0430\u0434\u0440\u0435\u0441")),n.createElement("input",{type:"email",id:"email",name:"email",placeholder:"example@gmail.com",value:t.email,onChange:this.onChange,className:"form-control"}),this.state.errors.email&&n.createElement(ue,{message:this.state.errors.email})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"\u041f\u0430\u0440\u043e\u043b\u044c"),n.createElement("input",{type:"password",id:"password",name:"password",value:t.password,onChange:this.onChange,className:"form-control",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"}),this.state.errors.password&&n.createElement(ue,{message:this.state.errors.password})),n.createElement("div",{className:"form-group"},n.createElement("input",{type:"password",id:"repeatPassword",name:"repeatPassword",value:t.repeatPassword,onChange:this.onChange,className:"form-control",placeholder:e("\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c")}),this.state.errors.repeatPassword&&n.createElement(ue,{message:this.state.errors.repeatPassword})),n.createElement("div",{className:"form-group"},n.createElement("button",{type:"submit",className:"btn submit-btn mb-2"},e("\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0442\u0441\u044f"))))}}]),a}(n.Component)),$e=Object(s.b)(null,{registration:function(e){return function(t){return new Promise((function(a,n){Y.post("/auth/registration",e).then((function(e){a(e)})).catch((function(e){console.log(e.response.data),t(B({})),n(e.response)}))}))}},loading:Ne,loaded:Ce})(q.b()(Ze)),et=a(401),tt=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return n.createElement("div",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430")}}]),a}(n.Component),at=(a(317),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{password:"",confirmPassword:""},loading:!1,backendErrors:[],errors:{password:"",confirmPassword:""}},e.onChange=function(t){e.setState({data:Object(d.a)(Object(d.a)({},e.state.data),{},{[t.target.name]:t.target.value})})},e.onSubmit=function(){var t=Object(f.a)(h.a.mark((function t(n){var r,c,s,l,i,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,c=r.loaded,s=r.loading,l=r.changePassword,s(),n.preventDefault(),t.prev=3,i=a.validate(e.state.data),o=i.password,e.setState(Object(d.a)(Object(d.a)({},e.state),{},{errors:{password:"",confirmPassword:""}})),t.next=8,l(o);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),e.setState(Object(d.a)(Object(d.a)({},e.state),{},{errors:{password:t.t0.toString().slice(7,100),confirmPassword:t.t0.toString().slice(7,100)}}));case 13:return t.prev=13,c(),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[3,10,13,16]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated||(window.location.href="/")}},{key:"render",value:function(){var e=this.props.auth.user;return"google"===e.type?n.createElement("div",null,n.createElement("h3",null,e.name),n.createElement("p",null,"google account")):n.createElement("form",{className:"col-12 col-md-12 col-sm-12 col-lg-6 col-xl-6 login-form",onSubmit:this.onSubmit},this.state.errors.password&&n.createElement(ue,{message:this.state.errors.password}),n.createElement("h2",null,e.name),n.createElement("h3",null,"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"),n.createElement("div",null,n.createElement("label",null,"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c")),n.createElement("div",null,n.createElement("input",{onChange:this.onChange,name:"password",className:"form-control"})),this.state.errors.confirmPassword&&n.createElement(ue,{message:this.state.errors.confirmPassword}),n.createElement("div",null,n.createElement("label",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c")),n.createElement("div",null,n.createElement("input",{onChange:this.onChange,name:"confirmPassword",className:"form-control"})),n.createElement("br",null),n.createElement("div",{className:"form-group"},n.createElement("button",{type:"submit",className:"btn submit-btn shadow-0"},"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c")),n.createElement("br",null))}}],[{key:"validate",value:function(e){var t=e.password,a=e.confirmPassword;if(!t||!a||t!==a)throw Error("\u041d\u0435 \u0432\u0430\u043b\u0438\u0434\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435");return{password:t,confirmPassword:a}}}]),a}(n.Component)),nt=Object(s.b)((function(e){return{auth:e.auth}}),{loaded:Ce,loading:Ne,changePassword:function(e){return function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Y.post("/auth/change-password",{password:e});case 3:return n=t.sent,t.abrupt("return",Object(d.a)(Object(d.a)({},n.data),{},{status:n.status}));case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",t.t0.response);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})(at),rt=a(391),ct=(a(318),a(392)),st=a(393),lt=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).click=function(){e.props.history.push("/game/".concat(e.props.item.id))},e}return Object(i.a)(a,[{key:"dateToReadable",value:function(){var e=this.props.item.date;return new Date(e).toISOString().slice(0,16).replace("T"," ")}},{key:"render",value:function(){var e=this.props.item,t=e.address,a=e.district,r=e.players,c=e.activePlayers,s=e.id;return this.props.item?n.createElement(ct.a,{key:s,onClick:this.click},n.createElement(st.a,null,a),n.createElement(st.a,null,t),n.createElement(st.a,null,this.dateToReadable()),n.createElement(st.a,null,r," (",c,")")):null}}]),a}(n.Component),it=Object(et.a)(lt),ot=(a(320),a(321),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).onChange=function(t){e.props.onChange(t)},e}return Object(i.a)(a,[{key:"render",value:function(){return n.createElement("div",{className:"input-barrette-wrap"},n.createElement("div",{className:"input-barrette shadow-1"},n.createElement("div",null,n.createElement("input",{type:"text",className:"form-control",onChange:this.onChange,placeholder:"\u0440\u0430\u0439\u043e\u043d"}))))}}]),a}(n.Component)),ut=a(395),mt=a(397),dt=a(396),pt=a(394),ht=a(388),ft=(a(322),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).resetCity=function(){(0,e.props.setCity)(null)},e.setCity=function(t){(0,e.props.setCity)(t)},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){if(localStorage.getItem("location")){var e=this.props.setCity;try{e(JSON.parse(localStorage.getItem("location")))}catch(t){console.error(t)}}}},{key:"render",value:function(){return n.createElement("div",{className:"city-widget"},this.props.location.id?n.createElement("span",{onClick:this.resetCity,className:"city-name shadow-1"},this.props.location.name):n.createElement("div",{className:"table-city-picker shadow-1"},n.createElement(oe,{doChoice:this.setCity})))}}]),a}(n.Component)),vt=Object(s.b)((function(e){return{location:e.location}}),{setCity:we})(ft),gt=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={district:null},e.filterDistrict=function(t){e.setState({district:t.target.value})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.games,r=t.t;return a.entities.valueSeq().size?n.createElement("div",{className:"game-sessions-greed"},n.createElement(vt,null),n.createElement("div",{className:"head-game-list"},n.createElement("div",{className:"district"},n.createElement(ot,{onChange:this.filterDistrict}))),n.createElement(pt.a,{component:ht.a},n.createElement(ut.a,{"aria-label":"simple table"},n.createElement(dt.a,null,n.createElement(ct.a,null,n.createElement(st.a,null,"\u0420\u0430\u0439\u043e\u043d"),n.createElement(st.a,{align:"right"},r("\u0410\u0434\u0440\u0435\u0441")),n.createElement(st.a,{align:"right"},r("\u0412\u0440\u0435\u043c\u044f")),n.createElement(st.a,{align:"right"},r("\u0418\u0433\u0440\u043e\u043a\u043e\u0432")))),n.createElement(mt.a,null,a.entities.valueSeq().filter((function(t){return!e.state.district||t.district.includes(e.state.district)})).map((function(e){return n.createElement(it,{key:e.id,item:e})})))))):n.createElement(vt,null)}}]),a}(n.Component),bt=Object(s.b)((function(e){return{location:e.location,games:e.games}}),null)(le(q.b()(gt))),Et=a(125),yt={ua:{translation:a(177)}};Et.a.use(q.a).init({resources:yt,lng:"ru",keySeparator:!1,interpolation:{escapeValue:!1}});var Ot=Et.a,jt=(a(323),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"setLocale",value:function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ot.changeLanguage(t);case 2:return e.abrupt("return",null);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.createElement("div",{className:"locales"},n.createElement("a",{href:"#","data-loc":"ua",onClick:this.setLocale.bind(null,"ua")},n.createElement("img",{src:"/locales/ua-32.png"})),n.createElement("span",null,"  "),n.createElement("a",{href:"#","data-loc":"ru",onClick:this.setLocale.bind(null,"ru")},n.createElement("img",{src:"/locales/ru-32.png"})))}}]),a}(n.Component)),wt=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.location,a=e.loader.loading,r=this.props.checkIfLogged;return console.log("loading1",a),r().then(console.log),n.createElement("div",{className:t.id&&"city-picked"},n.createElement(X,null),n.createElement(jt,null),a&&n.createElement(rt.a,{className:"loader-spinner",color:"primary",size:400,thickness:.3}),n.createElement("div",{className:"container main-content"},n.createElement(Le.a,{path:"/about",exact:!0,component:Xe}),n.createElement(Le.a,{path:"/account",exact:!0,component:ie(nt)}),n.createElement(Le.a,{path:"/login",exact:!0,component:Te}),n.createElement(Le.a,{path:"/game/:id",exact:!0,component:Ve}),n.createElement(Le.a,{path:"/forgot-password",exact:!0,component:Ie}),n.createElement(Le.a,{path:"/registration",exact:!0,component:$e}),n.createElement(Le.a,{path:"/create-game",exact:!0,component:xe}),n.createElement(Le.a,{path:"/complete-registration",exact:!0,component:tt}),n.createElement(Le.a,{path:"/",exact:!0,component:bt})))}}]),a}(n.Component),kt=Object(et.a)(Object(s.b)((function(e){return{location:e.location,loader:e.loader}}),{checkIfLogged:function(){return function(){var e=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.get("/auth/ping");case 3:a=e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),-1!==e.t0.message.indexOf("code 401")&&t(B(null)),a=e.t0.message;case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}})(wt)),Nt=function(){function e(){Object(l.a)(this,e)}return Object(i.a)(e,[{key:"getCities",value:function(e){return e?Y.get("/cities/getByName/".concat(e)).then((function(e){return e.data})):new Promise((function(e){e([])}))}}]),e}(),Ct=a(69),St=a.n(Ct),At=a(164)(St.a.Manager),xt=function(){function e(){Object(l.a)(this,e),this._gameSocket=void 0}return Object(i.a)(e,[{key:"add",value:function(e){return e.date=e.date.format().split("+")[0]+"+0000",Y.post("/game",e)}},{key:"initChat",value:function(e){var t=this;return new Promise((function(a){t._gameSocket=St()({path:"/chat/game"}),At(t._gameSocket),t._gameSocket.on("connect",(function(){t._gameSocket.emit("join","game".concat(e),a(t._gameSocket))}))}))}},{key:"destroyChat",value:function(){this._gameSocket.disconnect()}},{key:"addChatMessage",value:function(e){return Y.post("/game/chat",e)}},{key:"getChatHistory",value:function(e){return Y.get("/game/chat/history/".concat(e))}},{key:"joinGame",value:function(e,t){return Y.post("/game/join",{gameId:e,playerNumber:t})}}]),e}(),Dt=a(164)(St.a.Manager),_t=St()({path:"/chat/game"}),Mt=St()({path:"/chat/general"});Dt(Mt),Dt(_t),Mt.on("*",(function(e){switch(e.data[0]){case"GAME_ADDED":console.log("game added"),U.dispatch((c=e.data[1],{type:"GAME_ADDED",callApi:"/game/".concat(c)}));break;case"PLAYER_JOINED":console.log("pl joined");var t=e.data[1],a=t.gameId,n=t.players,r=t.info;U.dispatch(function(e,t,a){return{type:"PLAYER_JOINED",payload:{gameId:e,activePlayers:t,info:a}}}(a,n,r));break;default:console.log("unknown action")}var c})),r.hydrate(n.createElement(c.a,null,n.createElement(s.a,{store:U},n.createElement(te,{value:new Nt},n.createElement(ce,{value:new xt},n.createElement(kt,null))))),document.getElementById("root"))}},[[193,1,2]]]);
//# sourceMappingURL=main.5ef62c7f.chunk.js.map