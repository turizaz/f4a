{"version":3,"sources":["reducer/auth.ts","reducer/location.ts","helpers/helpers.ts","reducer/games.ts","reducer/game.ts","reducer/game-chat.ts","reducer/loader.ts","reducer/index.ts","constants.ts","store/index.ts","middlewares/api.ts","libs/axios.ts","ac/auth.ts","components/header/login-widget/login-widget.tsx","components/header/login-widget/index.tsx","components/header/header.tsx","components/header/index.tsx","components/common/city-picker/set-city-item/set-city-item.tsx","components/common/city-picker/set-city-item/index.tsx","context/city-service-context/city-service-context.ts","HOCs/with-city-service.tsx","context/game-service-context/game-service-context.ts","HOCs/with-game-service.tsx","HOCs/authGuard.tsx","components/common/city-picker/city-picker.tsx","components/common/city-picker/index.tsx","components/common/messages/error-message/error-message.tsx","components/common/messages/error-message/index.tsx","components/common/date-time/date-time.tsx","components/common/date-time/index.tsx","ac/location.ts","ac/games.ts","ac/loader.ts","components/create-game/create-game.tsx","components/create-game/index.tsx","components/auth/forgot-password/forgot-password.tsx","components/auth/forgot-password/index.tsx","components/auth/login/oauth/google.tsx","components/auth/login/login.tsx","components/auth/login/index.tsx","components/game/game-info/game-info.tsx","components/game/game-info/index.tsx","components/game/teems-vs-flags/teems-vs-flags.tsx","components/game/teems-vs-flags/index.tsx","components/game/chat/chat-message/chat-message.tsx","components/game/chat/chat-message/index.tsx","components/game/chat/chat.tsx","components/game/chat/index.tsx","components/game/field-player/field-player.tsx","components/game/field-player/index.tsx","services/teems.ts","components/game/football-field/football-field.tsx","components/game/football-field/index.tsx","components/game/game.tsx","components/game/index.tsx","components/about/about.tsx","components/about/index.tsx","components/auth/registration/registration.tsx","components/auth/registration/index.tsx","components/auth/complete-registration/complete-registration.tsx","components/auth/complete-registration/index.tsx","components/account/account.tsx","components/account/index.tsx","components/games-list/game-item/game-item.tsx","components/games-list/game-item/index.tsx","components/common/input-barrette/input-barrette.tsx","components/common/input-barrette/index.tsx","components/common/set-city-widget/set-city-widget.tsx","components/common/set-city-widget/index.tsx","components/games-list/games-list.tsx","components/games-list/index.tsx","i18n.ts","components/locales/locales.tsx","components/locales/index.tsx","App.tsx","services/city.ts","services/game.ts","sockets.ts","index.tsx"],"names":["user","initialState","isAuthenticated","_","pickUser","Record","name","country","id","arrToMap","arr","DataRecord","Map","reduce","acc","item","set","OrderedMap","ReducerState","loading","entities","GameRecord","city","city_id","address","date","district","additional","players","activePlayers","defaultState","lat","long","active_players","fieldNumbersInGame","MessageRecord","text","username","loaded","combineReducers","auth","state","action","console","log","type","localStorage","setItem","JSON","stringify","location","payload","merge","games","gameState","LOAD_GAMES","data","update","sortBy","f","get","GAME_ADDED","gameId","updateIn","gameRecord","e","store","setIn","game","LOAD_GAME","info","event","joinGame","gameChat","gameChatState","messages","it","reverse","loader","createStore","reducer","composeWithDevTools","applyMiddleware","thunk","next","callApi","rest","axios","then","response","getState","error","defaults","baseURL","interceptors","use","status","dispatch","setCurrentUser","Promise","reject","LoginWidget","React","render","this","props","logout","t","className","onClick","href","icon","faSignInAlt","Link","to","connect","a","post","removeItem","withNamespaces","Header","mobileMenuShowed","toggleMenu","setState","hideMenu","bind","faBars","size","window","pathname","SetCityItem","doChoice","composeAddress","region","value","delimiter","CityServiceProvider","Provider","CityServiceConsumer","Consumer","withCityService","WrappedComponent","cityService","GameServiceProvider","GameServiceConsumer","withGameService","gameService","OriginalComponent","MixedComponent","checkAuth","history","push","componentDidMount","componentDidUpdate","CityPicker","cities","handleChange","target","length","getCities","pickerDoChoice","autoComplete","placeholder","onChange","map","key","ErrorMessage","message","materialTheme","createMuiTheme","palette","primary","green","DateTimeComponent","handleDateChange","theme","locale","utils","MomentUtils","Grid","container","justify","disableToolbar","variant","margin","label","KeyboardButtonProps","ampm","cancelLabel","okLabel","setCity","loadGames","moment","Date","setHours","getHours","errors","CreateGame","constructor","super","resetCity","validate","i","indexOf","changeDate","onSubmit","preventDefault","checkIfAllowedCreate","initCity","isEmpty","add","setMeta","document","title","alert","out","printFieldPlayersOptionList","setUser","ForgotPassword","email","backendErrors","submit","forgotPassword","Validator","isEmail","width","alt","src","Login","password","goToRegister","login","res","handleErrors","credentials","GameInfo","TeemsVsFlags","ChatMessage","toISOString","slice","replace","Chat","maintainSocketMessages","socket","addChatMessage","loadChatHistory","on","sendMessage","keyCode","trim","initChat","getChatHistory","componentWillUnmount","destroyChat","getElementById","pick","onKeyUp","valueSeq","FieldPlayer","applyGame","index","catch","finally","teem","gameRedux","isActive","activeShirt","Teems","randomInt","min","max","Math","floor","random","tacticOrders","2","3","4","5","6","7","8","9","10","11","isNaN","Error","splitOnTeems","oddPlayers","evenPlayers","formGameOrder","teems","orders","forEach","order","Array","isArray","FootballField","gameOrder","nextProps","prevState","fieldClass","generateLines","lines","total","teemsOnField","row","rowNum","Game","params","match","loadGame","About","Registration","repeatPassword","registrationData","registration","htmlFor","resolve","err","CompleteRegistration","Account","confirmPassword","changePassword","toString","GameItem","click","dateToReadable","TableRow","TableCell","withRouter","InputBarrette","SetCityWidget","getItem","parse","GamesList","filterDistrict","TableContainer","component","Paper","Table","aria-label","TableHead","align","TableBody","filter","includes","resources","ua","translation","i18n","reactI18nextModule","init","lng","keySeparator","interpolation","escapeValue","Locales","setLocale","changeLanguage","data-loc","App","checkIfLogged","CircularProgress","color","thickness","Route","path","exact","authGuard","CityService","patch","require","io","Manager","GameService","_gameSocket","format","split","emit","disconnect","playerNumber","gameSocket","generalSocket","playerJoined","ReactDOM","BrowserRouter"],"mappings":"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","file":"static/js/main.ee42f474.chunk.js","sourcesContent":["import {SET_CURRENT_USER} from '../constants'\nimport * as _ from 'lodash'\nimport { Base64 } from 'js-base64'\nlet user: {name: string, type?: string} | null\n\nuser = assignUser()\n\nconst initialState = {\n  user,\n  isAuthenticated: !_.isEmpty(user),\n}\n\nexport default (state = initialState, action: any) => {\n  console.log('initial state, auth', action)\n  switch (action.type) {\n    case SET_CURRENT_USER:\n      const {user} = action\n      localStorage.setItem('user', JSON.stringify(user))\n      return {\n        user: pickUser(user), isAuthenticated: !_.isEmpty(user)\n      }\n    default:\n      return state\n  }\n};\n\nfunction pickUser(user: any) {\n  return _.pick(user, ['name'])\n}\n\nfunction assignUser(): {name: string} | null {\n  return null\n  // let user;\n  // if (window.location.hash) {\n  //   user = JSON.parse(Base64.decode(window.location.hash))\n  //   localStorage.setItem('user', JSON.stringify(user))\n  //   return user\n  // } else {\n  //   try {\n  //     user = JSON.parse(localStorage.user)\n  //   } catch (e) {\n  //     user = null\n  //   }\n  // }\n  // return user\n}\n","// @ts-nocheck\nimport {SET_CITY} from '../constants'\nimport {Record} from 'immutable'\n\nconst initialState = new Record({\n  name: '',\n  country: '',\n  id: null,\n})();\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case SET_CITY:\n      return action.payload ? state.merge(action.payload) : initialState\n    default:\n      return state\n  }\n};\n","import {OrderedMap, Map} from 'immutable';\n\n/**\n * @param {Array} arr\n * @param {function} DataRecord\n * @return {*}\n */\nexport function arrToMap(arr: any, DataRecord = Map) {\n  return arr.reduce(\n      // @ts-ignore\n      (acc: any, item: any) => acc.set(item.id, new DataRecord(item)),\n      // @ts-ignore\n      new OrderedMap({})\n  );\n}\n\n/**\n * @param {object} obj\n * @return {Array<T>}\n */\nexport function mapToArr(obj: any) {\n  return obj.valueSeq().toArray()\n}\n","/* eslint camelcase: 0 */\n// @ts-nocheck\nimport {\n  LOAD_GAMES,\n  SUCCESS,\n  GAME_ADDED,\n  START,\n  PLAYER_JOINED,\n} from '../constants';\nimport {OrderedMap, Record} from 'immutable';\nimport {arrToMap} from '../helpers/helpers';\n\nconst ReducerState = Record({\n  loading: false,\n  entities: new OrderedMap({}),\n});\n\nconst GameRecord = Record({\n  id: 0,\n  city: '',\n  city_id: 0,\n  address: '',\n  date: '',\n  district: null,\n  additional: '',\n  players: 0,\n  activePlayers: 1,\n});\n\nconst defaultState = new ReducerState();\n\nexport default (gameState = defaultState, action) => {\n  const {type, payload} = action;\n  switch (type) {\n    case LOAD_GAMES + SUCCESS:\n      if (!payload.data) {\n        return defaultState;\n      }\n      return gameState.update('entities', (entities) => {\n        return arrToMap(payload.data, GameRecord).sortBy(\n            (f) => f.get('date')\n        );\n      });\n    case GAME_ADDED + START:\n      return gameState.set('loading', true);\n    case PLAYER_JOINED:\n      console.log('player join in list', payload);\n      const {gameId, activePlayers} = payload;\n      return gameState.updateIn(['entities', gameId], (gameRecord) => {\n        try {\n          return gameRecord.set('activePlayers', activePlayers);\n        } catch (e) {\n          console.log('not connected to list yet');\n        }\n      });\n    case GAME_ADDED + SUCCESS:\n      const {id, city_id} = payload.data;\n      if (city_id !== payload.store.location.id) {\n        return gameState;\n      }\n      return gameState\n          .setIn(['entities', id], new GameRecord(payload.data))\n          .set('loading', false)\n          .update('entities', (entities) => {\n            return entities.sortBy((f) => f.get('date'));\n          });\n    default:\n      return gameState;\n  }\n};\n","import {Record} from 'immutable';\nimport {LOAD_GAME, SUCCESS, START, PLAYER_JOINED} from '../constants';\n\nconst GameRecord = Record({\n  id: null,\n  city: null,\n  address: null,\n  lat: null,\n  district: null,\n  long: null,\n  players: 0,\n  city_id: 0,\n  active_players: 1,\n  date: null,\n  additional: null,\n  loading: false,\n  fieldNumbersInGame: [],\n});\n\nconst defaultState = new GameRecord();\n\nexport default (gameState = defaultState, action: any) => {\n  const {type, payload} = action;\n  switch (type) {\n    case LOAD_GAME + START:\n      return gameState.set('loading', true)\n    case LOAD_GAME + SUCCESS:\n      return gameState.merge(payload.data).set('loading', false)\n    case PLAYER_JOINED:\n      const {gameId, activePlayers, info} = payload\n      if (gameState.get('id') === gameId) {\n        if (info.event === 'joined') {\n          return joinGame(gameState, info)\n        }\n        if (info.event === 'leaved') {\n          return leaveGame(gameState, info)\n        }\n        return gameState\n            .set('active_players', activePlayers)\n            .set('fieldNumbersInGame', info.fieldNumbersInGame)\n      }\n      return gameState;\n    default:\n      return gameState;\n  }\n};\n\n/**\n * @param {object} gameState\n * @param {number} playerFieldNumber\n * @return {object}\n */\nfunction leaveGame(gameState: any, {fieldNumbersInGame}: any) {\n  return gameState.set('fieldNumbersInGame', fieldNumbersInGame);\n}\n/**\n * @param {object} gameState\n * @param {number} playerFieldNumber\n * @return {*}\n */\nfunction joinGame(gameState: any, {fieldNumbersInGame}: any) {\n  return gameState.set('fieldNumbersInGame', fieldNumbersInGame)\n}\n","// @ts-nocheck\nimport {OrderedMap, Record} from 'immutable';\nimport {GAME_CHAT_MESSAGE_ADDED, GAME_CHAT_MESSAGE_HISTORY} from '../constants';\nimport {arrToMap} from '../helpers/helpers';\n\nconst ReducerState = Record({\n  loading: false,\n  entities: new OrderedMap({}),\n});\n\nconst MessageRecord = Record({\n  id: null,\n  text: null,\n  username: null,\n  date: null,\n});\n\nconst defaultState = new ReducerState();\n\nexport default (gameChatState = defaultState, action) => {\n  const {type, payload} = action;\n  switch (type) {\n    case GAME_CHAT_MESSAGE_HISTORY:\n      return gameChatState.update('entities', (entities) => {\n        return arrToMap(payload, MessageRecord);\n      });\n    case GAME_CHAT_MESSAGE_ADDED:\n      const messages = gameChatState.setIn(\n          ['entities', payload.id],\n          new MessageRecord(payload));\n      return messages.update('entities', (entities)=> {\n        return messages.entities.sortBy((it)=>it.get('date')).reverse();\n      });\n    default:\n      return gameChatState;\n  }\n};\n\n","// @ts-nocheck\nimport {LOADING, LOADED} from '../constants'\nimport {Record} from 'immutable'\n\nconst initialState = new Record({\n    loading: false,\n    loaded: false\n})();\n\nexport default (state = initialState, action) => {\n    console.log('TYPE ----', action.type)\n    switch (action.type) {\n        case LOADING:\n            console.log('loading !!!!')\n            return state.set('loading', true).set('loaded', false)\n        case LOADED:\n            return state.set('loading', false).set('loaded', true)\n        default:\n            return state\n    }\n};\n","import {combineReducers} from 'redux';\nimport auth from './auth';\nimport location from './location';\nimport games from './games';\nimport game from './game';\nimport gameChat from './game-chat';\nimport loader from './loader'\nexport default combineReducers({\n  auth, location, games, game, gameChat, loader\n});\n","export const START = '_START'\nexport const SUCCESS = '_SUCCESS'\nexport const FAIL = '_FAIL'\n\nexport const SET_CURRENT_USER = 'SET_CURRENT_USER'\nexport const SET_CITY = 'SET_CITY'\nexport const NOTIFY_CUSTOMER='NOTIFY_CUSTOMER'\nexport const WARN_USER='WARN_USER'\n\nexport const LOAD_GAMES = 'LOAD_GAMES'\nexport const LOAD_GAME = 'LOAD_GAME'\nexport const GAME_ADDED = 'GAME_ADDED'\nexport const PLAYER_JOINED = 'PLAYER_JOINED'\nexport const PLAYER_LEAVE = 'PLAYER_LEAVE'\n\nexport const GAME_CHAT_MESSAGE_ADDED = 'GAME_CHAT_MESSAGE_ADDED'\nexport const GAME_CHAT_MESSAGE_HISTORY = 'GAME_CHAT_MESSAGE_HISTORY'\n\nexport const LOADING = 'LOADING'\nexport const LOADED = 'LOADED'\n","import {createStore, applyMiddleware} from 'redux';\nimport thunk from 'redux-thunk';\nimport reducer from '../reducer';\nimport {composeWithDevTools} from 'redux-devtools-extension';\nimport api from '../middlewares/api';\n\nconst store = createStore(\n    reducer,\n    composeWithDevTools(applyMiddleware(thunk, api))\n);\nexport default store;\n","import {START, SUCCESS, FAIL} from '../constants'\nimport axios from '../libs/axios'\n\nexport default (store: any) => (next: any) => (action: any) => {\n  const {callApi, type, ...rest} = action\n  if (!callApi) return next(action)\n\n  next({\n    ...rest,\n    type: type + START,\n  });\n  return axios.get(callApi).then(\n      (response) => {\n        next({...rest, type: type + SUCCESS, payload:\n            {...response, store: store.getState()}})\n      },\n      (error) => {\n        next({...rest, type: type + FAIL, error})\n      }\n  );\n};\n","import axios from 'axios'\nimport {setCurrentUser} from '../ac/auth'\nimport store from '../store'\naxios.defaults.baseURL = '/api'\naxios.interceptors.response.use((response) => {\n    return response\n}, (error) => {\n    if (error.response.status === 403) {\n        store.dispatch(setCurrentUser({}))\n    }\n    return Promise.reject(error)\n})\nexport default axios\n","import {SET_CURRENT_USER} from '../constants'\nimport axios from '../libs/axios'\n\nexport function setCurrentUser(user: any) {\n  return {\n    type: SET_CURRENT_USER,\n    user,\n  }\n}\nexport function checkIfLogged() {\n  return async (dispatch: any) => {\n    let response;\n    try {\n      response = await axios.get(`/auth/ping`);\n    } catch (e) {\n      if (e.message.indexOf('code 401') !== -1) {\n        dispatch(setCurrentUser(null))\n      }\n      response = e.message\n    }\n    return response\n  }\n}\nexport function login(credentials: any): any {\n  return async (dispatch: any) => {\n    try {\n      const response = await axios.post(`/auth/login`, credentials)\n      dispatch(setCurrentUser(response.data))\n      return {...response.data, status: response.status}\n    } catch (e) {\n      return e.response\n    }\n  }\n}\n\nexport function forgotPassword(email: string) {\n  return async (dispatch: any) => {\n    try{\n      const response = await axios.post(`/auth/forgot-password`, {email})\n      return {...response.data, status: response.status}\n    } catch (e) {\n      return e.response\n    }\n  }\n}\n\nexport function changePassword(password: string) {\n  return async (dispatch: any) => {\n    try {\n      const response = await axios.post(`/auth/change-password`, {password})\n      return {...response.data, status: response.status}\n    } catch (e) {\n      return e.response\n    }\n  }\n}\nexport function registration(user: any) {\n  return (dispatch: any) => {\n    return new Promise((resolve, reject)=> {\n      axios\n          .post(`/auth/registration`, user)\n          .then((res) => {\n            resolve(res)\n          })\n          .catch((err) => {\n            console.log(err.response.data)\n            dispatch(setCurrentUser({}))\n            reject(err.response)\n          });\n    });\n  };\n}\n\nexport function logout() {\n  return async (dispatch: any) => {\n    await axios.post(`/auth/logout`, {})\n    localStorage.removeItem('user')\n    dispatch(setCurrentUser({}))\n  };\n}\n\nexport function setUser(user: any) {\n  console.log(`set user`)\n  return (dispatch: any) => {\n    dispatch(setCurrentUser(user))\n  };\n}\n","import * as React from 'react'\nimport './login-widget.scss'\nimport {Link} from 'react-router-dom'\nimport {connect} from 'react-redux'\nimport {logout} from '../../../ac/auth'\nimport Locales from \"../../locales\"\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faUser, faSignInAlt} from \"@fortawesome/free-solid-svg-icons\";\nimport {withNamespaces} from \"react-i18next\";\ninterface Props {\n    auth: any,\n    logout: any,\n    t: any\n}\n\nclass LoginWidget extends React.Component<Props> {\n\n  render() {\n    const {auth, logout, t} = this.props\n\n    return (\n      <div className=\"absolute-login-widget\">\n          <div>\n              {auth.isAuthenticated ? auth.user.name: ''}\n              {/*<FontAwesomeIcon icon={faUser} className='user-icon'/>*/}\n              { auth.isAuthenticated ? <a onClick={logout} href='#' className='sign-out'>\n                  <FontAwesomeIcon icon={faSignInAlt}/>\n              </a> :\n              <Link to=\"/login\" className='sign-out'>\n                  {t('Авторизация')} <FontAwesomeIcon icon={faSignInAlt}/>\n              </Link>}\n          </div>\n      </div>\n    );\n\n    // return auth.isAuthenticated ? (\n    //   <div className=\"absolute-login-widget\">\n    //       <div>\n    //           {auth.user.name}\n    //       </div>\n    //       <FontAwesomeIcon icon={faUser}/>\n    //       <Link to=\"/logout\">\n    //           <FontAwesomeIcon icon={faSignInAlt}/>\n    //       </Link>\n    //       <i onClick={logout} className=\"fas fa-sign-out-alt\"/>\n    //   </div>\n    // ) : (\n    //   <div className=\"absolute-login-widget\">\n    //     <div>\n    //         <FontAwesomeIcon icon={faUser}/>\n    //         <Link to=\"/login\">\n    //             <FontAwesomeIcon icon={faSignInAlt}/>\n    //         </Link>\n    //     </div>\n    //   </div>\n    // )\n  }\n}\n\n\nexport default connect((state: any) => {\n  return {\n    auth: state.auth,\n  };\n    // @ts-ignore\n}, {logout})(withNamespaces()(LoginWidget))\n","import LoginWidget from './login-widget';\nexport default LoginWidget;\n","import * as React from 'react';\nimport LoginWidget from './login-widget';\nimport {Link} from 'react-router-dom';\nimport './header.scss';\nimport {withNamespaces} from \"react-i18next\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faBars } from '@fortawesome/free-solid-svg-icons'\nimport { faGlobe } from '@fortawesome/free-solid-svg-icons'\ninterface Props {\n  t:any\n}\nclass Header extends React.Component<Props> {\n  state = {mobileMenuShowed: false}\n  toggleMenu() {\n    this.setState({mobileMenuShowed: !this.state.mobileMenuShowed})\n  }\n  hideMenu() {\n    this.setState({mobileMenuShowed: false})\n  }\n  /**\n   * Render app general header\n   * @return {string} - HTML markup for the component\n   */\n  render() {\n    const {t} = this.props\n    return (\n      <nav className=\"main-menu\">\n        <div className=\"container\">\n          <div className='mobile-only'>\n             <div className='mobile-menu'>\n              <FontAwesomeIcon onClick={this.toggleMenu.bind(this)} icon={faBars} size='2x'/>\n               {this.state.mobileMenuShowed && <div className='mobile-menu-items'>\n                <ul className='shadow-2'>\n                  <li onClick={this.hideMenu.bind(this)}><Link to=\"/\"\n                  >{t('Главная')}</Link></li>\n                  <li onClick={this.hideMenu.bind(this)}><Link to=\"/about\"\n                  >{t('О сервисе')}</Link></li>\n                  <li onClick={this.hideMenu.bind(this)}><Link to=\"/create-game\"\n                  >{t('Создать игру')}</Link></li>\n                </ul>\n              </div>}\n            </div>\n          </div>\n          <ul id=\"main-menu-ul\" className='desktop-only'>\n            <li className={\n              window.location.pathname === '/' ? 'active' : ''\n            }>\n              <Link to=\"/\">{t('Главная')}</Link>\n            </li>\n            <li onClick={this.hideMenu.bind(this)} className={window.location.pathname === '/about' ? 'active' : ''}>\n              <Link to=\"/about\"\n            >{t('О сервисе')}</Link></li>\n            <li className={window.location.pathname === '/create-game' ? 'active' : ''}>\n              <Link to=\"/create-game\"\n                    >{t('Создать игру')}</Link></li>\n          </ul>\n          <LoginWidget/>\n        </div>\n      </nav>\n    );\n  }\n}\n\n// @ts-ignore\nexport default withNamespaces()(Header);\n","import Header from './header';\nexport default Header;\n","import * as React from 'react'\nimport './set-city-item.scss'\nimport {connect} from 'react-redux'\n\ninterface Props {\n  name?: string,\n  country?: string,\n  region?: string,\n  doChoice: any,\n  id: number,\n}\n\n/**\n * Item for autocomplete list\n */\nclass SetCityItem extends React.Component<Props> {\n  /**\n   * @return {string} html\n   */\n  render() {\n    const {name, country, id, doChoice} = this.props;\n    return (\n      <div className=\"city-item\" onClick={\n        () => {\n          doChoice({name: name, country: country, id: id})\n        }}>\n        { this.composeAddress(this.props.name) }\n        <small>{ this.composeAddress(this.props.region, ', ') }</small>\n        <small>{ this.composeAddress(this.props.country, ', ') }</small>\n      </div>\n    )\n  }\n\n  /**\n   * @param {string} value\n   * @param {string} delimiter\n   * @return {*}\n   */\n  composeAddress(value: any, delimiter = '') {\n    if (!value) return ''\n    return <span>{delimiter + value}</span>\n  }\n}\n\nexport default connect(\n    (state: {location: any}) => {\n      return {\n        location: state.location,\n      }\n    }, null\n)(SetCityItem)\n","import SetCityItem from './set-city-item';\nexport default SetCityItem;\n","import * as React from 'react'\n\nconst {\n  Provider: CityServiceProvider,\n  Consumer: CityServiceConsumer,\n} = React.createContext(null)\n\nexport {CityServiceConsumer, CityServiceProvider}\n","import * as React from 'react'\nimport {CityServiceConsumer} from '../context/city-service-context'\n\nconst withCityService = (WrappedComponent: any) => {\n  return function WithCityService(props: any) {\n    return (\n      <CityServiceConsumer>\n        {(cityService) => {\n          return <WrappedComponent {...props} cityService={cityService} />\n        }}\n      </CityServiceConsumer>\n    )\n  }\n}\nexport default withCityService\n","import * as React from 'react';\n\nconst {\n  Provider: GameServiceProvider,\n  Consumer: GameServiceConsumer,\n} = React.createContext(null);\n\nexport {GameServiceProvider, GameServiceConsumer};\n","import * as React from 'react'\nimport {GameServiceConsumer} from '../context/game-service-context'\n\nconst withGameService = (WrappedComponent: any) => {\n  return function WithGameService(props: any) {\n    return (\n      <GameServiceConsumer>\n        {(gameService) => {\n          return <WrappedComponent {...props} gameService={gameService} />\n        }}\n      </GameServiceConsumer>\n    )\n  }\n}\nexport default withGameService\n","import * as React from 'react';\nimport { connect } from 'react-redux';\ninterface Props {\n  isAuthenticated: any,\n  history: any,\n}\nexport default (OriginalComponent:any) => {\n  class MixedComponent extends React.Component<Props> {\n\n    checkAuth() {\n      if (!this.props.isAuthenticated) {\n        this.props.history.push('/');\n      }\n    }\n\n    componentDidMount() {\n      this.checkAuth();\n    }\n\n    componentDidUpdate() {\n      this.checkAuth();\n    }\n\n    render() {\n      return <OriginalComponent {...this.props} />;\n    }\n  }\n\n  function mapStateToProps(state: {auth: Props}) {\n    return {\n      isAuthenticated: state.auth.isAuthenticated,\n    }\n  }\n\n  return connect(mapStateToProps)(MixedComponent);\n};\n\n\n","import * as React from 'react'\nimport SetCityItem from './set-city-item'\nimport './city-picker.scss'\nimport {withCityService} from '../../../HOCs'\ninterface Props {\n  doChoice: any;\n  city: string;\n  cityService: any;\n}\n\n/**\n * Input which select city\n */\nclass CityPicker extends React.Component<Props> {\n  state = {\n    cities: [],\n    city: '',\n    loading: null,\n  };\n\n  handleChange = async (event: any) => {\n    const city = event.target.value;\n    this.setState({city});\n    const {cityService} = this.props;\n    if (city.length > 2) {\n      this.setState({loading: true});\n      const cities = await cityService.getCities(city);\n      console.log(cities)\n      this.setState({loading: false});\n      this.setState({cities});\n    }\n  }\n\n  pickerDoChoice = (city: any) => {\n    this.setState({cities: [],city: city.name})\n    return this.props.doChoice(city);\n  };\n\n  render() {\n    return (\n      <div className=\"city-auto-complete\">\n        <input\n          type=\"text\"\n          className=\"form-control\"\n          autoComplete=\"off\"\n          placeholder=\"Город\"\n          onChange={this.handleChange}\n        />\n        {this.state.loading && <div className=\"lds-hourglass\"/>}\n        {this.state.cities.length ? (\n          <div className=\"list\">\n            {this.state.cities.map((city: {id: number}) => {\n              return (\n                <SetCityItem\n                  key={city.id}\n                  {...city}\n                  doChoice={this.pickerDoChoice}\n                />\n              )\n            })}\n          </div>\n        ) : null}\n      </div>\n    )\n  }\n}\n\nexport default withCityService(CityPicker)\n","import CityPicker from './city-picker';\nexport default CityPicker;\n","import * as React from 'react'\nimport './error-message.scss'\n\nfunction ErrorMessage(props: any) {\n  return props.message ? (\n      <div className=\"common-error-message\">{props.message}</div>\n  ) : null\n}\nexport default ErrorMessage\n","import ErrorMessage from './error-message';\nexport default ErrorMessage;\n","import * as React from 'react'\nimport 'date-fns';\n\nimport Grid from '@material-ui/core/Grid';\nimport './customDatePickerWidth.scss'\nimport {\n  MuiPickersUtilsProvider,\n  KeyboardTimePicker,\n  KeyboardDatePicker,\n} from '@material-ui/pickers'\nimport MomentUtils from \"@date-io/moment\";\nimport \"moment/locale/ru\"\nimport './date-time.scss'\nimport green from '@material-ui/core/colors/green'\nimport {MuiThemeProvider, createMuiTheme} from '@material-ui/core'\nimport {withNamespaces} from \"react-i18next\";\ninterface Props {\n  onChange: any,\n  value: any,\n  t: any\n}\nconst materialTheme = createMuiTheme({\n    palette: {\n        primary: green\n    },\n});\n\nclass DateTimeComponent extends React.Component<Props> {\n  handleDateChange = (e: any) => {\n    const {onChange}: any = this.props\n    onChange(e)\n  }\n\n  render() {\n    const {t} = this.props\n    return (\n        <div className=\"date\">\n            <MuiThemeProvider theme={materialTheme}>\n                <MuiPickersUtilsProvider locale=\"ru\" utils={MomentUtils}>\n                    <Grid container justify=\"space-around\">\n                        <div className={'customDatePickerWidth'}>\n                        <KeyboardDatePicker\n                            disableToolbar\n                            variant=\"inline\"\n                            margin=\"normal\"\n                            id=\"date-picker-inline\"\n                            label={t('Дата')}\n                            value={this.props.value}\n                            onChange={this.handleDateChange}\n                            KeyboardButtonProps={{\n                                'aria-label': 'change date',\n                            }}\n                        />\n                        </div>\n                        <div className={'customDatePickerWidth'}>\n                        <KeyboardTimePicker\n                            disableToolbar\n                            margin=\"normal\"\n                            id=\"time-picker\"\n                            label={t('Время')}\n                            ampm={false}\n                            cancelLabel=\"Отмена\"\n                            okLabel=\"Подтвердить\"\n                            value={this.props.value}\n                            onChange={this.handleDateChange}\n                            KeyboardButtonProps={{\n                                'aria-label': 'change time',\n                            }}\n                        />\n                        </div>\n                    </Grid>\n                </MuiPickersUtilsProvider>\n            </MuiThemeProvider>\n        </div>\n    )\n  }\n}\n\n\n// @ts-ignore\nexport default withNamespaces()(DateTimeComponent)\n","import DateTimeComponent from './date-time';\nexport default DateTimeComponent;\n","import {LOAD_GAMES, SET_CITY, SUCCESS} from '../constants';\nimport {loadGames} from './games';\n/**\n * Set city action\n * @return {{payload: *, type: string}}\n */\nexport function setCity(city: any) {\n  if (!city) {\n    return (dispatch: any) => {\n      localStorage.setItem('location', '')\n      dispatch({type: LOAD_GAMES+SUCCESS, payload: {data: null}})\n      dispatch({\n        type: SET_CITY,\n        payload: city,\n      })\n    }\n  }\n  return (dispatch: any) => {\n    localStorage.setItem('location', JSON.stringify(city))\n    dispatch(loadGames(city))\n    dispatch({type: SET_CITY, payload: city})\n  }\n}\n","import {LOAD_GAMES, GAME_ADDED, LOAD_GAME, PLAYER_JOINED, GAME_CHAT_MESSAGE_HISTORY, GAME_CHAT_MESSAGE_ADDED} from '../constants'\nimport {ICallApiAc, ICommonAc} from './IAc'\n\n\nexport function loadGames(city: any): ICallApiAc {\n  return {\n    type: LOAD_GAMES,\n    callApi: `/game/city/${city.id}`,\n  };\n}\n\nexport function loadGame(id: number): ICallApiAc {\n  return {\n    type: LOAD_GAME,\n    callApi: `/game/${id}`,\n  };\n}\n\nexport function gameAdded(id: number): ICallApiAc {\n  return {\n    type: GAME_ADDED,\n    callApi: `/game/${id}`,\n  };\n}\n\nexport function playerJoined(\n    gameId: number,\n    activePlayers: number,\n    info: any): ICommonAc {\n  return {\n    type: PLAYER_JOINED,\n    payload: {gameId, activePlayers, info},\n  };\n}\n\nexport function addChatMessage(message: any) {\n  return {\n    type: GAME_CHAT_MESSAGE_ADDED,\n    payload: message,\n  };\n}\n\nexport function loadChatHistory(messages: any) {\n  return {\n    type: GAME_CHAT_MESSAGE_HISTORY,\n    payload: messages,\n  };\n}\n","import {LOADING, LOADED} from \"../constants\";\n\nexport function loading() {\n    console.log('ac loading')\n    return {\n        type: LOADING,\n    }\n}\nexport function loaded() {\n    console.log('ac loaded')\n    return {\n        type: LOADED,\n    }\n}\n","import * as React from 'react'\nimport './create-game.scss'\nimport CityPicker from '../../components/common/city-picker'\nimport ErrorMessage from '../../components/common/messages/error-message'\nimport _ from 'lodash'\nimport {withGameService} from '../../HOCs'\nimport GamesList from '../games-list'\nimport {connect} from 'react-redux'\nimport DateTimeComponent from '../../components/common/date-time'\nimport SetCityWidget from '../../components/common/set-city-widget'\nimport {setCity} from '../../ac/location'\nimport {setUser} from '../../ac/auth'\nimport * as moment from 'moment'\nimport {loading, loaded} from \"../../ac/loader\";\nimport {JSX} from \"@babel/types\";\nimport {withNamespaces} from \"react-i18next\";\nimport { Redirect } from 'react-router-dom'\n\nmoment.locale('ru')\n\nconst initialState = {\n  data: {\n    city: '',\n    city_id: '',\n    address: '',\n    additional: '',\n    players: 6,\n    date: moment.default(new Date().setHours(new Date().getHours() + 4)),\n    district: '',\n  },\n  errors: {},\n}\n\ninterface Props {\n  gameService: any,\n  auth: any,\n  location: any,\n  setCity: any,\n  setUser: any,\n  match: any,\n  history: any,\n  loading:any,\n  loaded: any,\n  t: any\n}\n\nclass CreateGame extends React.Component<Props> {\n  state: {data: any, errors: any}\n\n  constructor(props: any) {\n    super(props)\n    CreateGame.setMeta()\n    this.state = initialState\n  }\n  static setMeta() {\n    document.title = 'Football for everyone'\n  }\n\n  setCity = (city: {name: string, id: number, country: string}) => {\n    this.setState({\n      data: {...this.state.data, city: city.name, city_id: city.id},\n    })\n  }\n\n  resetCity = () => {\n    this.setState({data: {...this.state.data, city: ''}})\n  }\n\n  onChange = (e: any):any => {\n    this.setState({\n      data: {...this.state.data, [e.target.name]: e.target.value},\n    });\n  };\n\n  validate = (data: any) => {\n    const errors:any = {}\n    for (const i in data) {\n      if (['players', 'lat', 'long', 'additional'].indexOf(i) !== -1) {\n        continue;\n      }\n      if (!data[i]) errors[i] = `Не может быть пустым`;\n    }\n    return errors\n  };\n\n  changeDate = (e: any) => {\n    this.setState({\n      data: {\n        ...this.state.data,\n        date: e,\n      },\n    });\n  };\n\n  checkIfAllowedCreate() {\n    const {auth, t} = this.props\n    if (!auth.isAuthenticated) {\n      alert(t('Зарегистрируйтесь чтобы создать игру'))\n    }\n    return auth.isAuthenticated;\n  }\n\n  initCity(data: {city: string, city_id: number}) {\n    const {setCity} = this.props\n    setCity({name: data.city, id: data.city_id});\n  }\n\n  static printFieldPlayersOptionList(): JSX.Element[] {\n    const out = [];\n    for(let i = 6; i<23; i++) { out.push(i) }\n    return out.map((it:number) => <option key={it}>{it}</option>)\n  }\n\n  onSubmit = async (e: any) => {\n    e.preventDefault()\n\n    const {data} = this.state;\n    if (!this.checkIfAllowedCreate()) {\n      return\n    }\n    this.initCity(data)\n    const errors = this.validate(data);\n    this.setState({\n      errors,\n    });\n    if (_.isEmpty(errors)) {\n      const {gameService, loading, loaded} = this.props;\n      try {\n        loading()\n        const res = await gameService.add(data)\n        if (res.status === 201) {\n          this.setState(initialState)\n          console.log('red')\n          this.props.history.push(`/`)\n        }\n      } finally {\n        loaded()\n      }\n    }\n  };\n\n  render() {\n\n    const {data, errors} = this.state\n    const {t} = this.props\n    return (\n      <div className=\"row main-content\">\n        <div className=\"left-col create-game-left-col\">\n          <form className={'game-form' } onSubmit={this.onSubmit}>\n            <fieldset>\n              <legend>{t('Создать игру')}</legend>\n              <div className=\"form-group\" id=\"gameCitySection\">\n                <label>{t('Город')}</label>\n                {!this.state.data.city &&\n                <CityPicker\n                  doChoice={this.setCity}\n                  city={this.state.data.city}\n                />}\n                {\n                  this.state.data.city &&\n                  <div className={'success-panel'}>{this.state.data.city}\n                    <span onClick={this.resetCity}>✕</span>\n                  </div>\n                }\n                {errors.city && <ErrorMessage message={errors.city} />}\n              </div>\n              <div className=\"form-group\">\n                <label>{t('Район')}</label>\n                <input\n                  type=\"text\"\n                  className=\"form-control\"\n                  name=\"district\"\n                  value={data.district}\n                  onChange={this.onChange}\n                />\n                {errors.district && <ErrorMessage message={errors.district} />}\n              </div>\n              <div className=\"form-group\">\n                <label>{t('Адрес')}</label>\n                <input\n                  type=\"text\"\n                  className=\"form-control\"\n                  name=\"address\"\n                  value={data.address}\n                  onChange={this.onChange}\n                />\n                {errors.address && <ErrorMessage message={errors.address} />}\n              </div>\n              <div className=\"form-group date\">\n                <DateTimeComponent\n                  // @ts-ignore\n                  onChange={this.changeDate}\n                  value={data.date}/>\n                {errors.date && <ErrorMessage message={errors.date} />}\n              </div>\n              <div className=\"form-group\">\n                <label>{t('Количество игроков')}</label>\n                <select\n                  className=\"form-control col-2\"\n                  onChange={this.onChange}\n                  value={data.players}\n                  name=\"players\"\n                >\n                  {CreateGame.printFieldPlayersOptionList()}\n                </select>\n                {errors.players && <ErrorMessage message={errors.players} />}\n              </div>\n            </fieldset>\n            <div className=\"form-group\">\n              <label>{t('Дополнительно')}</label>\n              <textarea\n                className=\"form-control\"\n                name=\"additional\"\n                value={data.additional}\n                onChange={this.onChange}\n              />\n              {errors.additional && (\n                <ErrorMessage message={errors.additional} />\n              )}\n            </div>\n            <div className=\"form-group\">\n              <button type=\"submit\" className=\"btn submit-btn shadow-0\">\n                {t('Создать')}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    )\n  }\n}\n\n\nexport default connect(\n    (state: {location: any, game: any, auth: any}) => {\n      return {\n        location: state.location,\n        games: state.game,\n        auth: state.auth,\n      };\n    },\n    {setCity, setUser, loading, loaded}\n    // @ts-ignore\n)(withGameService(withNamespaces()(CreateGame)))\n","import CreateGame from './create-game'\nexport default CreateGame\n","import * as React from 'react'\nimport './forgot-password.scss'\nimport {connect} from 'react-redux'\nimport {forgotPassword} from '../../../ac/auth'\nimport Validator from 'validator'\nimport ErrorMessage from '../../../components/common/messages/error-message'\nimport _ from 'lodash'\n\nclass ForgotPassword extends React.Component<any> {\n    state = {\n        data: {\n            email: ''\n        },\n        loading: false,\n        backendErrors: [],\n        errors: {email: null},\n    }\n\n    onChange = (e: any) => {\n        this.setState({data: {...this.state.data, [e.target.name]: e.target.value}})\n    }\n    static validate(data: any) {\n        const errors = {email: ''}\n        if(data.email && !Validator.isEmail(data.email)) errors.email = 'Не валидный емейл'\n        if(!data.email) errors.email = 'Не может быть пустым'\n        return errors\n    }\n    submit = async (e: any) => {\n        const {forgotPassword} = this.props\n        e.preventDefault()\n        const errors = ForgotPassword.validate(this.state.data)\n        if(!_.isEmpty(errors.email)) {\n            this.setState({errors})\n            return\n        }\n        await forgotPassword(this.state.data.email)\n        window.location.href = '/'\n\n    }\n    render() {\n        const {email} = this.state.data\n        return(\n            <div>\n                <form className=\"col-12 col-md-6 col-lg-6 col-xl-6 login-form\" onSubmit={this.submit}>\n                    <div className=\"form-group\">\n                        {this.state.errors.email && (\n                            <ErrorMessage message={this.state.errors.email} />\n                        )}\n                        <label>Email</label>\n                        <input value={email} name={'email'} onChange={this.onChange} className=\"form-control\" type=\"text\"/>\n                    </div>\n                    <p>\n                        <button type=\"submit\" className=\"btn submit-btn mb-2\">Войти</button>\n                    </p>\n                </form>\n            </div>\n        )\n    }\n}\n\nexport default connect(null, {forgotPassword})(ForgotPassword)\n","import ForgotPassword from './forgot-password'\nexport default ForgotPassword\n","import './style.scss';\nimport * as React from 'react';\nimport {withNamespaces} from \"react-i18next\";\nconst link = `/api/auth/google`;\n\nfunction SingInGoogle({t}:any) {\n    return (\n        <a href={link}><div className='loginWithGoogle'>\n            <img width=\"20px\" alt=\"Google sign-in\"\n                                src=\"/img/Google__G__Logo.svg.webp\"/>{t('Войти')} {t('с')} google\n        </div></a>\n        )\n}\n\n// @ts-ignore\nexport default withNamespaces()(SingInGoogle);\n","import * as React from 'react'\nimport './login.scss'\nimport Validator from 'validator'\nimport ErrorMessage from '../../../components/common/messages/error-message'\nimport {connect} from 'react-redux'\nimport {login} from '../../../ac/auth'\nimport {Link} from 'react-router-dom'\nimport {loaded, loading} from \"../../../ac/loader\";\nimport SingInGoogle from './oauth/google'\nimport {withNamespaces} from \"react-i18next\";\ninterface Props {history: any, login: any, loading: any, loaded: any, t: any}\n\nclass Login extends React.Component<Props> {\n\n  state = {\n    data: {email: '', password: ''},\n    loading: false,\n    backendErrors: [],\n    errors: {email: null, password: null},\n  }\n\n  goToRegister = (e: any) => {\n    e.preventDefault()\n    window.location.href = '/registration'\n  }\n\n  onChange = (e: any) => {\n    this.setState({data: {...this.state.data, [e.target.name]: e.target.value}})\n  }\n\n  handleErrors(status: number){\n    if(status < 300) {\n      this.props.history.push('/')\n      return\n    } else {\n      switch (status) {\n        case 401:\n          this.setState({backendErrors: ['Подтвердите ваш почтовый адресс']})\n          break\n        case 403:\n          this.setState({backendErrors: ['Неверный логин или пароль']})\n          break\n        default:\n          this.setState({backendErrors: ['Произошла серверная ощибка, обратитесь к администратору']})\n      }\n    }\n  }\n\n  submit = async (e: any) => {\n    const {login, loading, loaded} = this.props\n    const {data} = this.state\n    e.preventDefault()\n    const errors = this.validate(data)\n    this.setState({errors})\n    if (!errors.email && !errors.password) {\n      try {\n        loading()\n        const res = await login(data)\n        this.handleErrors(res.status)\n      } finally {\n        loaded()\n      }\n    }\n  }\n\n  validate = (data: any) => {\n    const errors: {password: any, email: any} = {password: null, email: null}\n    if (!data.password) errors.password = `Не может быть пустым`\n    if (!data.email) errors.email = `Не может быть пустым`\n    if (!Validator.isEmail(data.email)) errors.email = `Не валидный емейл`\n    return errors\n  }\n\n  render() {\n    const {t} = this.props\n    const {data} = this.state;\n    return (\n      <div>\n        <form className=\"col-md-6 login-form\" onSubmit={this.submit}>\n          {\n            this.state.backendErrors.map((it) =>\n              <ErrorMessage key={it} message={it}/>)}\n          <div className=\"form-group\">\n            <label>E-mail {t('адрес')}</label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              name=\"email\"\n              placeholder=\"example@gmail.com\"\n              value={data.email}\n              onChange={this.onChange}\n              className=\"form-control\"\n            />\n            {this.state.errors.email && (\n              <ErrorMessage message={this.state.errors.email} />\n            )}\n          </div>\n          <div className=\"form-group\">\n            <label>Пароль</label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              name=\"password\"\n              value={data.password}\n              onChange={this.onChange}\n              className=\"form-control\"\n              placeholder=\"Пароль\"\n            />\n            {this.state.errors.password && (\n              <ErrorMessage message={this.state.errors.password} />\n            )}\n          </div>\n          <div className=\"form-group\">\n            <div className='forgot-password'>\n              <Link to=\"/forgot-password\">{t('Забыли')} пароль ?</Link>\n            </div>\n            <button type=\"submit\" className=\"btn submit-btn mb-2\">{t('Войти')}</button>\n            &nbsp;\n            <button onClick={this.goToRegister} className=\"btn submit-btn mb-2\">{t('Зарегистрировтся')}</button>\n            <br/>\n            <SingInGoogle/>\n          </div>\n        </form>\n      </div>\n    )\n  }\n}\n\n\nexport default connect(\n    (state: {auth: any}) => ({\n      auth: state.auth,\n    }), {login, loading, loaded}\n    // @ts-ignore\n)(withNamespaces()(Login))\n","import Login from './login'\nexport default Login\n","import * as React from 'react'\nimport './game-info.scss'\nimport {withNamespaces} from \"react-i18next\";\n\nfunction GameInfo(props: any) {\n    const {game, t} = props\n    return (\n            <div className=\"game-info\">\n                <div>\n                    <div>{t('Город')}</div>\n                    <div>{game.city}</div>\n                </div>\n                <div>\n                    <div>Район</div>\n                    <div>{game.district}</div>\n                </div>\n                <div>\n                    <div>{t('Адрес')}</div>\n                    <div>{game.address}</div>\n                </div>\n                <div>\n                    <div>{t('Игроков')}</div>\n                    <div>{game.players} ({game.active_players})</div>\n                </div>\n                {game.additional &&\n                <div>\n                    <div>{t('Дополнительно')}</div>\n                    <div>{game.additional}</div>\n                </div>\n                }\n            </div>)\n}\n\nexport default withNamespaces()(GameInfo)\n","import GameInfo from './game-info'\nexport default GameInfo\n","import * as React from 'react';\nimport './teems-vs-flags.scss';\n\n/**\n * Teem flags in game widget\n */\nclass TeemsVsFlags extends React.Component {\n  render() {\n    return (\n      <div className=\"teems-vs-flags\">\n        <div className=\"first-teem\">\n          <div>\n            <img alt='football-teem-first' src='/img/orange-shirt.svg'/>\n          </div>\n        </div>\n        <div className=\"vs\">—</div>\n        <div className=\"second-teem\">\n          <div>\n            <img alt='football-teem-second' src='/img/white-shirt.svg'/>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\nexport default TeemsVsFlags;\n","import TeemsVsFlags from './teems-vs-flags';\nexport default TeemsVsFlags;\n","import * as React from 'react';\nimport './chat-message.scss';\n\ninterface Props {\n    message: {text: string, username: string, date: any}\n}\n\n/**\n * One chat message\n */\nclass ChatMessage extends React.Component<Props> {\n  /**\n   * @return {JSX}\n   */\n  render() {\n    const {text, username, date} = this.props.message\n    return (\n      <li className=\"chatMessage\">\n        <div className=\"message-data\">\n          <span className=\"message-data-name\">{username}\n          </span>\n          <span className=\"message-data-time\">\n            {new Date(date).toISOString().slice(0, 16).replace('T', ' ')}\n          </span>\n        </div>\n        <div className=\"message my-message shadow-0\">{text}</div>\n      </li>\n    );\n  }\n}\n\nexport default ChatMessage\n","import ChatMessage from './chat-message';\nexport default ChatMessage;\n","/* eslint-disable no-invalid-this */\nimport * as React from 'react';\nimport './chat.scss';\nimport ChatMessage from './chat-message';\nimport {connect} from 'react-redux';\nimport {addChatMessage, loadChatHistory} from '../../../ac/games';\nimport _ from 'lodash';\nimport {withGameService} from '../../../HOCs';\nimport {withNamespaces} from \"react-i18next\";\n\ninterface Props {\n  gameId: any,\n  addChatMessage: any,\n  loadChatHistory: any,\n  gameService: any,\n  gameChat: any,\n  t: any\n}\n\n/**\n * Game chat\n */\nclass Chat extends React.Component<Props> {\n  /**\n   * Init, handle socket messages\n   */\n  async componentDidMount() {\n    const {gameService, gameId} = this.props\n    await this.maintainSocketMessages(await gameService.initChat(gameId))\n    await gameService.getChatHistory(gameId)\n  }\n  componentWillUnmount(): void {\n    const {gameService} = this.props\n    gameService.destroyChat()\n  }\n\n  /**\n   * @param {object} socket\n   * @return {Promise<void>}\n   */\n  maintainSocketMessages = async (socket: any) => {\n    const {addChatMessage, loadChatHistory} = this.props;\n    socket.on('*', (message: any)=> {\n      console.log(message)\n      switch (message.data[0]) {\n        case 'GAME_CHAT_MESSAGE_HISTORY':\n          loadChatHistory(message.data[1])\n          break;\n        case 'GAME_CHAT_MESSAGE_ADDED':\n          addChatMessage(message.data[1])\n          break;\n        default:\n          break;\n      }\n    });\n  };\n  /**\n   * @type {{message: null}}\n   */\n  state = {\n    message: null,\n  };\n  /**\n   * Handle all simple text inputs\n   * @param {object} e\n   * @return {void}\n   */\n  onChange = (e: any) => {\n    this.setState({\n      [e.target.name]: e.target.value,\n    });\n  };\n  /**\n   * @param {Event} e\n   */\n  sendMessage = async (e: any) => {\n    if (e.keyCode !== 13) {\n      return\n    }\n    if (e.target.value.trim() === '') {\n      return\n    }\n    await this.submit()\n  };\n  /**\n   * Submit chat message\n   */\n  async submit() {\n    // @ts-ignore\n    document.getElementById('message').value = null\n    const {gameService, gameId, t} = this.props;\n    const {message} = _.pick(this.state, ['message']);\n    if (!message) {\n      alert('Нет смысла отправлять пустое сообщение');\n      return;\n    }\n    try {\n      await gameService.addChatMessage({\n        ..._.pick(this.state, ['message']),\n        gameId,\n      });\n      this.setState({\n        message: null,\n      });\n    } catch (error) {\n      if (error.response.status > 400 && error.response.status < 500) {\n        alert(t('Залогинтесь, для того чтобы послать сообщение в чат'));\n      }\n    }\n  }\n\n  render() {\n    const {gameChat, t} = this.props;\n    return (\n      <div className=\"chat\">\n        <hr/>\n        <div className=\"form-group\">\n          <textarea\n            onChange={this.onChange}\n            className=\"form-control\"\n            name=\"message\"\n            id=\"message\"\n            onKeyUp={this.sendMessage}\n          />\n          <br/>\n          <button\n            className=\"btn submit-btn mb-2 shadow-0\"\n            onClick={this.submit.bind(this)}>{t('Послать сообщение')}</button>\n        </div>\n        <form>\n          <ul>\n            {gameChat.entities.valueSeq().map(\n                (it: any) => {\n                  return <ChatMessage key={it.id} message={it} />\n                }\n            )}\n          </ul>\n        </form>\n      </div>\n    );\n  }\n}\n\n\nexport default connect((state: any) => {\n  return {\n    gameChat: state.gameChat,\n  };\n  // @ts-ignore\n}, {addChatMessage, loadChatHistory})(withGameService(withNamespaces()(Chat)));\n","import Chat from './chat';\nexport default Chat;\n","/* eslint-disable no-invalid-this */\nimport * as React from 'react'\n\nimport './field-player.scss'\nimport {withGameService} from '../../../HOCs'\nimport {connect} from 'react-redux'\nimport {loaded, loading} from \"../../../ac/loader\";\ninterface Props {\n  gameService: any,\n  game: any,\n  index: any,\n  gameRedux: any,\n  teem: any,\n  loading: any,\n  loaded: any\n}\n/**\n * Player ui on football field\n */\nclass FieldPlayer extends React.Component<Props> {\n  applyGame = () => {\n    const {gameService, game, index, loading, loaded} = this.props\n    loading()\n    gameService.joinGame(game.id, index).catch((e: any) => {\n      if (e.response.status > 400 && e.response.status < 500) {\n        alert('Залогинтесь сначала')\n      }\n    }).finally(loaded)\n  };\n  /**\n   * @return {JSX} html\n   */\n  render() {\n    const {teem, index, gameRedux} = this.props;\n    const isActive = gameRedux.fieldNumbersInGame\n      && gameRedux.fieldNumbersInGame.length > 0\n      && gameRedux.fieldNumbersInGame.indexOf(index) !== -1;\n    const activeShirt = '/img/'+teem+'-shirt.svg';\n    return (\n      <div className={'relative player'} onClick={this.applyGame}>\n        <div className={'number'}>{index}</div>\n        {isActive ?\n          <img className='shirt' alt={'active-shirt'} src={activeShirt}/>\n          : <img\n            alt={'grey-shirt'}\n            className={'t-shirt-grey shirt'}\n            src='/img/gray-shirt.svg' />}\n      </div>\n    );\n  }\n}\n\nexport default (withGameService)(\n    connect((state: any)=> {\n      return {\n        gameRedux: state.game,\n      };\n    }, {loading, loaded})(FieldPlayer)\n);\n","import FieldPlayer from './field-player';\nexport default FieldPlayer;\n","// @ts-nocheck\n/**\n * Football teem service\n */\nclass Teems {\n  players: any;\n  /**\n   * Get a random integer between `min` and `max`.\n   *\n   * @param {number} min - min number\n   * @param {number} max - max number\n   * @return {number} a random integer\n   */\n  randomInt = (min: number, max: number) =>\n    Math.floor(Math.random() * (max - min + 1) + min);\n  tacticOrders = {\n    2: [1, 1],\n    3: [1, 2],\n    4: [1, 2, 1],\n    5: [1, 3, 1],\n    6: [1, 3, 2],\n    7: [1, 3, 2, 1],\n    8: [1, 3, 3, 1],\n    9: [1, 3, 1, 3, 1],\n    10: [1, 3, 2, 3, 1],\n    11: [[1, 4, 4, 2], [1, 4, 3, 3]],\n  };\n  /**\n   * Init amount of players\n   * @param {number} players\n   */\n  constructor(players: any) {\n    if (isNaN(players) || players < 0) {\n      throw Error('Invalid parameter, should be number and > 0');\n    }\n    this.players = players\n  }\n  /**\n   * Calculate number of player for each teem\n   * @return {number[]}\n   */\n  splitOnTeems() {\n    if (this.players % 2) {\n      const oddPlayers = (this.players - 1) / 2;\n      return [oddPlayers + 1, oddPlayers];\n    } else {\n      const evenPlayers = this.players / 2;\n      return [evenPlayers, evenPlayers];\n    }\n  }\n\n  /**\n   * Form tactic orders\n   * @return {Array}\n   */\n  formGameOrder() {\n    const teems = this.splitOnTeems()\n    const orders = []\n    teems.forEach((it, index) => {\n      const order = Array.isArray(this.tacticOrders[it][0]) ?\n        this.tacticOrders[it][\n            this.randomInt(0, this.tacticOrders[it].length - 1)\n        ] : this.tacticOrders[it]\n      orders.push(order)\n    });\n    return orders\n  }\n}\n\nexport default Teems\n","import * as React from 'react'\nimport './football-field.scss'\nimport FieldPlayer from '../field-player'\nimport Teems from '../../../services/teems'\nimport {connect} from 'react-redux'\n\ninterface Props {\n  auth: any,\n  game: any\n}\n\nclass FootballField extends React.Component<Props> {\n  state = {\n    gameOrder: [],\n    players: 0,\n  };\n\n  static getDerivedStateFromProps(nextProps: any, prevState: any): {players: number; gameOrder: any} {\n    return ({\n      gameOrder: nextProps.game.players === prevState.players?\n        prevState.gameOrder:\n        new Teems(nextProps.game.players).formGameOrder(),\n      players: nextProps.game.players})\n  }\n\n  render() {\n    const {auth} = this.props;\n    let fieldClass = ` football-field `;\n    fieldClass += auth.isAuthenticated ? `active` : `regular`;\n    return (\n        <div>\n          <div className=\"north-socket\" />\n          <div className={fieldClass}>\n            <div className='football-field-center'/>\n            <div className=\"left-top-corner\"/>\n            <div className=\"right-top-corner\"/>\n            <div className=\"left-bottom-corner\"/>\n            <div className=\"right-bottom-corner\"/>\n            {this.state.gameOrder.length > 0 && this.generateLines()}\n          </div>\n          <div className=\"south-socket\" />\n        </div>\n    );\n  }\n  /**\n   * Generate tactic lines on field, each line contains few players\n   */\n  generateLines() {\n    const lines = [];\n    const {game} = this.props;\n    let total = game.players;\n    const teemsOnField = [[], []];\n    let row = [];\n    let rowNum = 1;\n    this.state.gameOrder.forEach((it: any, index) => {\n      it.forEach((it: any)=> {\n        row = [];\n        for (let i = 1; i <= it && total > 0; i++) {\n          row.push(\n              <FieldPlayer\n                teem={index === 0 ? 'orange' : 'white'}\n                key={i}\n                game={game}\n                index={total}\n                isActive={false}/>);\n          total--\n        }\n        teemsOnField[index].push(\n            // @ts-ignore\n            <div key={rowNum++} className={'tactic-line '}>{row}</div>\n        )\n      })\n    });\n    lines.push(<div\n      key={'north-side'}\n      className={`half-field north-side lines-${teemsOnField[0].length}`}>\n      {teemsOnField[0]}</div>);\n    lines.push(<div\n      key={'south-side'}\n      className={`half-field south-side lines-${teemsOnField[1].length}`}>\n      {teemsOnField[1]}</div>);\n    return lines\n  }\n}\n\nexport default connect((state: any) => {\n  return {\n    auth: state.auth,\n  }\n})(FootballField)\n","import FootballField from './football-field';\nexport default FootballField;\n","import * as React from 'react'\nimport {withGameService} from '../../HOCs'\nimport {loadGame} from '../../ac/games'\nimport {connect} from 'react-redux'\n// import {library} from '@fortawesome/fontawesome-svg-core'\n// import {faFutbol} from '@fortawesome/free-solid-svg-icons'\nimport GameInfo from './game-info'\nimport TeemsVsFlags from './teems-vs-flags'\nimport Chat from './chat'\nimport './game.scss'\nimport FootballField from './football-field';\nimport { withNamespaces } from 'react-i18next';\n// library.add(faFutbol)\n\ninterface Props {\n  match: any,\n  loadGame: any,\n  game: any,\n  auth: any,\n  t: any\n}\n\nclass Game extends React.Component<Props> {\n  state = {\n    gameOrder: [],\n    players: 0,\n  }\n\n  componentDidMount() {\n    document.title = 'Football for everyone';\n    const { match: {params}, loadGame} = this.props;\n    const {id} = params;\n    loadGame(id);\n  }\n\n  render() {\n    const {game, auth, t} = this.props;\n    const {match: {params}} = this.props;\n    const {id} = params;\n    return (\n      <div>\n        <div className=\"row game\">\n          <div className=\"left-col\">\n            <div>\n              <p>\n                {auth.isAuthenticated ? t('Чтобы присоединится нажмите на футболку') : t('Чтобы присоединится, залогинтесь и нажмите на футболку')}\n              </p>\n            </div>\n            <div className=\"football-field-wrapper shadow-1\">\n              <div>\n                // @ts-ignore\n                <FootballField game={game}/>\n              </div>\n            </div>\n          </div>\n          <div className='right-col'>\n              <div className='flags-info'>\n                <GameInfo game={game}/>\n                <TeemsVsFlags/>\n              </div>\n              <Chat gameId={id}/>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(\n    (state: any) => {\n      return {\n        game: state.game,\n        auth: state.auth,\n      };\n    },\n    // @ts-ignore\n    {loadGame})(withGameService(withNamespaces()(Game)));\n","import Game from './game';\nexport default Game;\n","import * as React from 'react';\nimport './about.scss';\nimport {withNamespaces} from \"react-i18next\";\ninterface Props {\n    t: any\n}\n/**\n * About page\n */\nclass About extends React.Component<Props> {\n\n  componentDidMount() {\n    About.setMeta();\n  }\n\n  /**\n   * @return {string} html\n   */\n  render() {\n    const {t} = this.props\n    return (\n      <h3>\n        <article>\n            <i>\n            {t('Если ты не знаешь, где найти людей для игры в футбол - это сайт как раз для тебя! Тут ты можешь собрать команду для игры в футбол. Тут ты можешь создать игру либо присоединится к уже существующей.')}\n            </i>\n            </article>\n      </h3>\n    );\n  }\n\n  static setMeta() {\n    document.title = 'About';\n  }\n}\n\n// @ts-ignore\nexport default withNamespaces()(About);\n","import About from './about';\nexport default About;\n\n","import * as React from 'react'\nimport './registration.scss'\nimport ErrorMessage from '../../../components/common/messages/error-message'\nimport Validator from 'validator'\n\nimport _ from 'lodash'\nimport {registration} from '../../../ac/auth'\nimport {connect} from 'react-redux'\nimport {loaded, loading} from \"../../../ac/loader\";\nimport {withNamespaces} from \"react-i18next\";\n\ninterface Props {\n  registration: any,\n  history: any,\n  loading:any,\n  loaded: any,\n  t: any\n}\n\n/**\n * Registration page\n */\nclass Registration extends React.Component<Props> {\n\n  state = {\n    data: {\n      email: '',\n      password: '',\n      name: '',\n      repeatPassword: '',\n    },\n    loading: false,\n    errors: {email: null, repeatPassword: null, password: null, name: null},\n    backendErrors: [],\n  }\n\n  /**\n   * Handle all simple text inputs\n   * @param {object} e\n   * @return {void}\n   */\n  onChange = (e: any) => {\n    this.setState({\n      data: {...this.state.data, [e.target.name]: e.target.value},\n    })\n  };\n\n  /**\n   * Form validation\n   * @return {object}\n   */\n  validate = (data: any) => {\n    const {t} = this.props\n    const errors : {\n      password: string | null,\n      email: string | null,\n      name: string | null,\n      repeatPassword: string | null\n    } = {password: null, email: null, name: null, repeatPassword: null}\n    if (!data.password) errors.password = t(`Не может быть пустым`)\n    if (!data.email) errors.email = t(`Не может быть пустым`)\n    if (!data.name) errors.name = t(`Не может быть пустым`)\n    if (!data.password !== !data.repeatPassword) {\n      errors.repeatPassword = t(`Пароли не совпадают`)\n    }\n    if (!Validator.isEmail(data.email)) errors.email = t(`Не валидный емейл`)\n    return errors\n  };\n\n  onSubmit = async (e: any) => {\n    const {t} = this.props\n    const {data} = this.state\n    e.preventDefault()\n    const errors: any = this.validate(data)\n    this.setState({errors})\n    for (const i in errors) {\n      if (errors[i]) {\n        return\n      }\n    }\n    const registrationData = _.pick(data, ['name', 'password', 'email'])\n    const { registration, loading, loaded } = this.props\n    try {\n      loading()\n      await registration(registrationData)\n      this.props.history.push(`/complete-registration`)\n    } catch (err) {\n      switch (err.status) {\n        case 403:\n          this.setState({backendErrors: [t('Такой пользователь уже существует')]}\n          )\n          break\n        default:\n          this.setState({backendErrors: err.data.errors})\n      }\n    } finally {\n      loaded()\n    }\n  };\n\n  render() {\n    const {t} = this.props\n    const {data} = this.state;\n    return (\n      <form className=\"\n      col-12\n      col-md-12\n      col-sm-12\n      col-lg-6\n      col-xl-6\n      login-form\" onSubmit={this.onSubmit}>\n        {\n          this.state.backendErrors ? this.state.backendErrors.map(\n              (it) => <ErrorMessage key={it} message={it}/>) : null\n        }\n        <div className=\"form-group\">\n          <label>Ник</label>\n          <input\n            type=\"name\"\n            id=\"name\"\n            name=\"name\"\n            value={data.name}\n            placeholder={t('Будет отображатся в интерфейсе')}\n            onChange={this.onChange}\n            className=\"form-control\"\n          />\n          {this.state.errors.name && (\n            <ErrorMessage message={this.state.errors.name} />\n          )}\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"exampleInputEmail1\">E-mail {t('адрес')}</label>\n          <input\n            type=\"email\"\n            id=\"email\"\n            name=\"email\"\n            placeholder=\"example@gmail.com\"\n            value={data.email}\n            onChange={this.onChange}\n            className=\"form-control\"\n          />\n          {this.state.errors.email && (\n            <ErrorMessage message={this.state.errors.email} />\n          )}\n        </div>\n\n        <div className=\"form-group\">\n          <label>Пароль</label>\n          <input\n            type=\"password\"\n            id=\"password\"\n            name=\"password\"\n            value={data.password}\n            onChange={this.onChange}\n            className=\"form-control\"\n            placeholder=\"Пароль\"\n          />\n          {this.state.errors.password && (\n            <ErrorMessage message={this.state.errors.password} />\n          )}\n        </div>\n        <div className=\"form-group\">\n          <input\n            type=\"password\"\n            id=\"repeatPassword\"\n            name=\"repeatPassword\"\n            value={data.repeatPassword}\n            onChange={this.onChange}\n            className=\"form-control\"\n            placeholder={t(\"Повторите пароль\")}\n          />\n          {this.state.errors.repeatPassword && (\n            <ErrorMessage message={this.state.errors.repeatPassword} />\n          )}\n        </div>\n        <div className=\"form-group\">\n          <button type=\"submit\" className=\"btn submit-btn mb-2\">\n            {t('Зарегистрировтся')}\n          </button>\n        </div>\n      </form>\n    )\n  }\n}\n\n// @ts-ignore\nexport default connect(null, {registration, loading, loaded})(withNamespaces()(Registration))\n","import Registration from './registration';\nexport default Registration;\n","import * as React from 'react';\n\nexport default class CompleteRegistration extends React.Component {\n  render() {\n    return (\n      <div>\n        На вашу почту было отправлено письмо,\n        чтобы закончить регистрацию перейдите по ссылке\n      </div>\n    );\n  }\n}\n","import CompleteRegistration from './complete-registration';\nexport default CompleteRegistration;\n","import * as React from \"react\"\nimport {connect} from 'react-redux'\nimport './account.scss'\nimport ErrorMessage from '../../components/common/messages/error-message'\nimport {loaded, loading} from \"../../ac/loader\";\nimport {changePassword} from \"../../ac/auth\";\ninterface InputPasswords {password: string, confirmPassword: string}\n\ninterface Props {\n    auth: any,\n    loaded: any,\n    loading: any,\n    changePassword: any\n}\nclass Account extends React.Component<Props> {\n    state = {\n        data: {\n            password: '',\n            confirmPassword: ''\n        },\n        loading: false,\n        backendErrors: [],\n        errors: {password: '', confirmPassword: ''},\n    }\n    onChange = (e: any) => {\n        this.setState({data: {...this.state.data, [e.target.name]: e.target.value}})\n    }\n    componentDidMount(): void {\n        const { auth } = this.props;\n        if (!auth.isAuthenticated) {\n            window.location.href  = '/';\n        }\n    }\n\n    static validate({password, confirmPassword}: InputPasswords): InputPasswords {\n        if((!password || !confirmPassword) || password !== confirmPassword) {\n            throw Error('Не валидное значение')\n        }\n        return {password, confirmPassword}\n    }\n\n    onSubmit = async (e: any) => {\n        const {loaded, loading, changePassword} = this.props\n        loading()\n        e.preventDefault();\n        try {\n            const {password} = Account.validate(this.state.data)\n            this.setState({\n                ...this.state,\n                errors: {password: '', confirmPassword: ''}\n            })\n            await changePassword(password)\n        } catch (e) {\n            this.setState({\n                ...this.state,\n                errors: {\n                    password: e.toString().slice(7,100),\n                    confirmPassword: e.toString().slice(7,100)\n                }\n            })\n        } finally {\n           loaded()\n        }\n    }\n    render(): React.ReactNode {\n        const {user} = this.props.auth;\n        if(user.type === 'google') {\n            return (\n              <div>\n                  <h3>{user.name}</h3>\n                  <p>google account</p>\n              </div>\n            )\n        }\n        return (\n            <form className='col-12 col-md-12 col-sm-12 col-lg-6 col-xl-6 login-form'\n                  onSubmit={this.onSubmit}>\n                {this.state.errors.password && (\n                    <ErrorMessage message={this.state.errors.password} />\n                )}\n                <h2>{user.name}</h2>\n                <h3>Сменить пароль</h3>\n                <div>\n                    <label>Новый пароль</label>\n                </div>\n                <div>\n                    <input onChange={this.onChange} name='password' className='form-control'/>\n                </div>\n                {this.state.errors.confirmPassword && (\n                    <ErrorMessage message={this.state.errors.confirmPassword} />\n                )}\n                <div>\n                    <label>Подтвердить пароль</label>\n                </div>\n                <div>\n                    <input onChange={this.onChange} name='confirmPassword' className='form-control'/>\n                </div>\n                <br/>\n                <div className='form-group'>\n                    <button type=\"submit\" className=\"btn submit-btn shadow-0\">Сменить пароль</button>\n                </div>\n                <br/>\n            </form>\n        );\n    }\n}\nexport default connect((state: any) => {\n    return {\n        auth: state.auth,\n    };\n}, {loaded, loading, changePassword})(Account)\n","import Account from './account'\nexport default Account\n","import * as React from 'react'\nimport './game-item.scss'\nimport {withRouter} from 'react-router-dom'\nimport {RouteComponentProps} from 'react-router-dom'\nimport TableRow from '@material-ui/core/TableRow';\nimport TableCell from '@material-ui/core/TableCell';\ninterface Props extends RouteComponentProps<any> {\n  history: any,\n  item: any\n}\n\nclass GameItem extends React.Component<Props> {\n  click = () => {\n    this.props.history.push(`/game/${this.props.item.id}`)\n  }\n  dateToReadable() {\n    const {date} = this.props.item\n    return new Date(date).toISOString().slice(0, 16).replace('T', ' ')\n  }\n  render() {\n    const {address, district, players, activePlayers, id} = this.props.item\n    if (!this.props.item) {return null}\n    return (\n        <TableRow key={id} onClick={this.click}>\n          <TableCell>{district}</TableCell>\n          <TableCell>{address}</TableCell>\n          <TableCell>{this.dateToReadable()}</TableCell>\n          <TableCell>{players} ({activePlayers})</TableCell>\n        </TableRow>\n    )\n  }\n}\nexport default withRouter<Props, any>(GameItem)\n","import GameItem from './game-item';\nexport default GameItem;\n","import * as React from 'react'\nimport './input-barrette.scss'\n\ninterface Props {\n  onChange: any,\n}\nclass InputBarrette extends React.Component<Props> {\n  onChange = (e: any) => {\n    this.props.onChange(e)\n  }\n\n  render() {\n    return (\n      <div className=\"input-barrette-wrap\">\n        <div className=\"input-barrette shadow-1\">\n          <div>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              onChange={this.onChange}\n              placeholder=\"район\"/>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default InputBarrette\n","import InputBarrette from './input-barrette';\nexport default InputBarrette;\n","/* eslint-disable no-invalid-this */\nimport * as React from 'react'\nimport './set-city-widget.scss'\nimport CityPicker from '../../../components/common/city-picker'\nimport {connect} from 'react-redux'\nimport {setCity} from '../../../ac/location'\n\ninterface Props {\n  setCity: any,\n  location: any\n}\n/**\n * Set city on which all further game sessions will be based on\n */\nclass SetCityWidget extends React.Component<Props> {\n\n  componentDidMount() {\n    const strLocation = localStorage.getItem('location');\n    if (!strLocation) {\n      return\n    }\n    const {setCity} = this.props\n    try {\n      // @ts-ignore\n      setCity(JSON.parse(localStorage.getItem('location')));\n    } catch (e) {\n      console.error(e)\n    }\n  }\n  resetCity = () => {\n    const {setCity} = this.props;\n    setCity(null);\n  };\n\n  setCity = (city: any) => {\n    const {setCity} = this.props;\n    setCity(city)\n  };\n\n  render() {\n    return (\n      <div className=\"city-widget\">\n        {this.props.location.id ? (\n          <span onClick={this.resetCity} className=\"city-name shadow-1\">\n            {this.props.location.name}\n          </span>\n        ) : (\n          <div className=\"table-city-picker shadow-1\">\n            <CityPicker doChoice={this.setCity}/>\n          </div>\n        )}\n      </div>\n    )\n  }\n}\n\nexport default connect(\n    (state: {location: any}) => {\n      return {\n        location: state.location,\n      };\n    },\n    {setCity}\n)(SetCityWidget)\n","import SetCityWidget from './set-city-widget';\nexport default SetCityWidget;\n","import * as React from 'react';\nimport {connect} from 'react-redux';\nimport {withGameService} from '../../HOCs';\nimport GameItem from './game-item';\nimport './games-list.scss';\nimport InputBarrette from '../../components/common/input-barrette'\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport Paper from '@material-ui/core/Paper'\nimport {withNamespaces} from \"react-i18next\";\nimport SetCityWidget from \"../common/set-city-widget\";\n\ninterface Props {\n  games: any,\n  t: any\n}\n\n\nclass GamesList extends React.Component<Props> {\n  state = {\n    district: null,\n  };\n\n  filterDistrict = (e: any) => {\n    this.setState({\n      district: e.target.value,\n    });\n  };\n\n  render() {\n    const {games, t} = this.props;\n    if (!games.entities.valueSeq().size) {\n      return <SetCityWidget/>;\n    }\n\n    return (\n        <div className='game-sessions-greed'>\n          <SetCityWidget/>\n          <div className=\"head-game-list\">\n            <div className={'district'}>\n              <InputBarrette onChange={this.filterDistrict}/>\n            </div>\n          </div>\n            <TableContainer component={Paper}>\n              <Table aria-label=\"simple table\">\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Район</TableCell>\n                    <TableCell align=\"right\">{t('Адрес')}</TableCell>\n                    <TableCell align=\"right\">{t('Время')}</TableCell>\n                    <TableCell align=\"right\">{t('Игроков')}</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {games.entities.valueSeq().filter((it: any) => {\n                    if (!this.state.district) return true;\n                    return it.district.includes(this.state.district);\n                  }).map((it: any) => <GameItem key={it.id} item={it}/>)}\n                </TableBody>\n              </Table>\n            </TableContainer>\n        </div>\n    )\n  }\n}\n\n\nexport default connect(\n    (state: any) => {\n      return {\n        location: state.location,\n        games: state.games,\n      };\n    },\n    null\n)(withGameService(\n    // @ts-ignore\n    withNamespaces()(GamesList)));\n","import GamesList from './games-list';\nexport default GamesList;\n","import * as i18n from \"i18next\";\nimport { reactI18nextModule } from \"react-i18next\";\n\nimport translationUA from './locales/ua/translation.json';\n\n// the translations\nconst resources = {\n    ua: {\n        translation: translationUA\n    }\n};\n// @ts-ignore\ni18n.default.use(reactI18nextModule) // passes i18n down to react-i18next\n    .init({\n        resources,\n        lng: \"ru\",\n\n        keySeparator: false, // we do not use keys in form messages.welcome\n\n        interpolation: {\n            escapeValue: false // react already safes from xss\n        }\n    });\n\nexport default i18n.default;\n","import * as React from 'react';\nimport * as i18n from \"../../i18n\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faGlobe} from \"@fortawesome/free-solid-svg-icons\";\nimport './locales.scss'\nexport default class Locales extends React.Component {\n    async setLocale(locale: string) {\n        await i18n.default.changeLanguage(locale)\n        return null\n    }\n    render(): React.ReactNode {\n        return (\n            <div className='locales'>\n                {/*<FontAwesomeIcon icon={faGlobe} size='2x'/>*/}\n                <a href=\"#\" data-loc=\"ua\" onClick={this.setLocale.bind(null, 'ua')}>\n                    <img src='/locales/ua-32.png'/>\n                </a>\n                <span>  </span>\n                <a href=\"#\" data-loc=\"ru\" onClick={this.setLocale.bind(null, 'ru')}>\n                    <img src='/locales/ru-32.png'/>\n                </a>\n            </div>\n        )\n    }\n}\n","import Locales from './locales';\nexport default Locales;\n","import * as React from 'react'\nimport Header from './components/header'\nimport CreateGame from './components/create-game'\nimport ForgotPassword from './components/auth/forgot-password'\nimport Login from './components/auth/login'\nimport './bootstrap.css'\nimport {Route} from 'react-router-dom'\nimport './app.scss'\nimport Game from './components/game'\nimport About from './components/about'\nimport Registration from './components/auth/registration'\nimport {connect} from 'react-redux'\nimport {withRouter} from 'react-router-dom'\nimport CompleteRegistration from './components/auth/complete-registration'\nimport Account from \"./components/account\";\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport {authGuard} from './HOCs'\nimport GamesList from './components/games-list'\nimport {checkIfLogged} from \"./ac/auth\";\nimport Locales from './components/locales'\nimport './i18n';\ninterface Props {\n  location: any,\n  loader: any,\n  checkIfLogged: any\n}\n\n/**\n * Root of application\n */\nclass App extends React.Component<Props> {\n  render() {\n    const {location, loader} = this.props\n    const {loading} = loader\n    const {checkIfLogged} = this.props\n    console.log('loading', loading)\n    checkIfLogged().then(console.log)\n    return (\n        <div className={location.id && 'city-picked'}>\n          <Header/>\n          <Locales/>\n          {loading && <CircularProgress className={'loader-spinner'} color='primary' size={400} thickness={0.3}/>}\n          <div className=\"container main-content\">\n            <Route path=\"/about\" exact component={About}/>\n            <Route path=\"/account\" exact component={authGuard(Account)}/>\n            <Route path=\"/login\" exact component={Login}/>\n            <Route path=\"/game/:id\" exact component={Game}/>\n            <Route path=\"/forgot-password\" exact component={ForgotPassword}/>\n            <Route path=\"/registration\" exact component={Registration}/>\n            <Route path=\"/create-game\" exact component={CreateGame}/>\n            <Route path=\"/complete-registration\" exact\n                   // @ts-ignore\n                   component={CompleteRegistration}/>\n            <Route path=\"/\" exact component={GamesList}/>\n          </div>\n        </div>\n    )\n  }\n}\n\n// @ts-ignore\nexport default withRouter(connect((state: { location: any; loader: any }) => {\n  return {\n    location: state.location,\n    loader: state.loader,\n  }\n}, {checkIfLogged})(App));\n\n","import axios from '../libs/axios'\n\n/**\n * Service for working with cities\n */\nclass CityService {\n\n  getCities(city: any) {\n    if (city) {\n      return axios.get(`/cities/getByName/${city}`).then((res) => res.data)\n    }\n    return new Promise((resolve) => {\n      resolve([])\n    })\n  }\n}\n\nexport default CityService\n","import axios from '../libs/axios'\nimport {AxiosPromise} from 'axios'\nimport io from 'socket.io-client'\nconst patch = require('socketio-wildcard')(io.Manager)\n\nclass GameService {\n\n  private _gameSocket!: SocketIOClient.Socket;\n\n  add(game: any): AxiosPromise<{status: number}> {\n    game.date = game.date.format().split('+')[0]+'+0000'\n    return axios.post(`/game`, game)\n  }\n\n  initChat(id: number): Promise<SocketIOClient.Socket> {\n    return new Promise((resolve) => {\n      this._gameSocket = io({path: `/chat/game`})\n      patch(this._gameSocket)\n      this._gameSocket.on('connect', () => {\n        this._gameSocket.emit('join', `game${id}`, resolve(this._gameSocket))\n      })\n    })\n  }\n\n  destroyChat() {\n    this._gameSocket.disconnect()\n  }\n\n  addChatMessage(message: any) {\n    return axios.post(`/game/chat`, message)\n  }\n\n  getChatHistory(gameId: number) {\n    return axios.get(`/game/chat/history/${gameId}`)\n  }\n\n  joinGame(gameId: number, playerNumber: number) {\n    return axios.post(`/game/join`, {gameId, playerNumber})\n  }\n}\nexport default GameService\n","import io from 'socket.io-client'\nimport store from './store'\nimport {GAME_ADDED, PLAYER_JOINED} from './constants'\nimport {gameAdded, playerJoined} from './ac/games'\nconst patch = require('socketio-wildcard')(io.Manager)\nconst gameSocket =\n  io({path: '/chat/game'})\nconst generalSocket =\n  io({path: '/chat/general'})\npatch(generalSocket)\npatch(gameSocket)\n\n/**\n * Common sockets func\n */\nfunction sockets() {\n  generalSocket.on('*', (message: any) => {\n    switch (message.data[0]) {\n      case GAME_ADDED:\n        console.log('game added');\n        store.dispatch(gameAdded(message.data[1]));\n        break;\n      case PLAYER_JOINED:\n        console.log('pl joined');\n        const {gameId, players, info} = message.data[1];\n        store.dispatch(playerJoined(gameId, players, info));\n        break;\n      default:\n        console.log('unknown action');\n        break;\n    }\n  });\n}\nexport {sockets, gameSocket, generalSocket};\n","// @ts-nocheck\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport {BrowserRouter} from 'react-router-dom';\nimport {Provider} from 'react-redux';\nimport App from './App';\nimport store from './store';\nimport CityService from './services/city';\nimport {CityServiceProvider} from './context/city-service-context';\nimport {GameServiceProvider} from './context/game-service-context';\nimport GameService from './services/game';\nimport {sockets} from './sockets';\nsockets();\nReactDOM.hydrate(\n    <BrowserRouter>\n      <Provider store={store}>\n        <CityServiceProvider value={new CityService()}>\n        <GameServiceProvider value={new GameService()}>\n          <App />\n        </GameServiceProvider>\n        </CityServiceProvider>\n      </Provider>\n    </BrowserRouter>,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}