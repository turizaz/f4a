{"ast":null,"code":"import{SET_CURRENT_USER}from'../constants';import*as _ from'lodash';let user;user=assignUser();const initialState={user,isAuthenticated:!_.isEmpty(user)};export default((state=initialState,action)=>{console.log('initial state, auth',action);switch(action.type){case SET_CURRENT_USER:const user=action.user;localStorage.setItem('user',JSON.stringify(user));return{user:pickUser(user),isAuthenticated:!_.isEmpty(user)};default:return state;}});function pickUser(user){return _.pick(user,['name']);}function assignUser(){return null;// let user;\n// if (window.location.hash) {\n//   user = JSON.parse(Base64.decode(window.location.hash))\n//   localStorage.setItem('user', JSON.stringify(user))\n//   return user\n// } else {\n//   try {\n//     user = JSON.parse(localStorage.user)\n//   } catch (e) {\n//     user = null\n//   }\n// }\n// return user\n}","map":{"version":3,"sources":["/Users/yaroslavudodov/Code/f4e/ssr/client/src/reducer/auth.ts"],"names":["SET_CURRENT_USER","_","user","assignUser","initialState","isAuthenticated","isEmpty","state","action","console","log","type","localStorage","setItem","JSON","stringify","pickUser","pick"],"mappings":"AAAA,OAAQA,gBAAR,KAA+B,cAA/B,CACA,MAAO,GAAKC,CAAAA,CAAZ,KAAmB,QAAnB,CAEA,GAAIC,CAAAA,IAAJ,CAEAA,IAAI,CAAGC,UAAU,EAAjB,CAEA,KAAMC,CAAAA,YAAY,CAAG,CACnBF,IADmB,CAEnBG,eAAe,CAAE,CAACJ,CAAC,CAACK,OAAF,CAAUJ,IAAV,CAFC,CAArB,CAKA,eAAe,CAACK,KAAK,CAAGH,YAAT,CAAuBI,MAAvB,GAAuC,CACpDC,OAAO,CAACC,GAAR,CAAY,qBAAZ,CAAmCF,MAAnC,EACA,OAAQA,MAAM,CAACG,IAAf,EACE,IAAKX,CAAAA,gBAAL,MACSE,CAAAA,IADT,CACiBM,MADjB,CACSN,IADT,CAEEU,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA6BC,IAAI,CAACC,SAAL,CAAeb,IAAf,CAA7B,EACA,MAAO,CACLA,IAAI,CAAEc,QAAQ,CAACd,IAAD,CADT,CACiBG,eAAe,CAAE,CAACJ,CAAC,CAACK,OAAF,CAAUJ,IAAV,CADnC,CAAP,CAGF,QACE,MAAOK,CAAAA,KAAP,CARJ,CAUD,CAZD,EAcA,QAASS,CAAAA,QAAT,CAAkBd,IAAlB,CAA6B,CAC3B,MAAOD,CAAAA,CAAC,CAACgB,IAAF,CAAOf,IAAP,CAAa,CAAC,MAAD,CAAb,CAAP,CACD,CAED,QAASC,CAAAA,UAAT,EAA6C,CAC3C,MAAO,KAAP,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD","sourcesContent":["import {SET_CURRENT_USER} from '../constants'\nimport * as _ from 'lodash'\nimport { Base64 } from 'js-base64'\nlet user: {name: string, type?: string} | null\n\nuser = assignUser()\n\nconst initialState = {\n  user,\n  isAuthenticated: !_.isEmpty(user),\n}\n\nexport default (state = initialState, action: any) => {\n  console.log('initial state, auth', action)\n  switch (action.type) {\n    case SET_CURRENT_USER:\n      const {user} = action\n      localStorage.setItem('user', JSON.stringify(user))\n      return {\n        user: pickUser(user), isAuthenticated: !_.isEmpty(user)\n      }\n    default:\n      return state\n  }\n};\n\nfunction pickUser(user: any) {\n  return _.pick(user, ['name'])\n}\n\nfunction assignUser(): {name: string} | null {\n  return null\n  // let user;\n  // if (window.location.hash) {\n  //   user = JSON.parse(Base64.decode(window.location.hash))\n  //   localStorage.setItem('user', JSON.stringify(user))\n  //   return user\n  // } else {\n  //   try {\n  //     user = JSON.parse(localStorage.user)\n  //   } catch (e) {\n  //     user = null\n  //   }\n  // }\n  // return user\n}\n"]},"metadata":{},"sourceType":"module"}