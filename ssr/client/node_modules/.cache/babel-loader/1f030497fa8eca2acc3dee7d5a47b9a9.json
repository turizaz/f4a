{"ast":null,"code":"import*as React from'react';import'./football-field.scss';import FieldPlayer from'../field-player';import Teems from'../../../services/teems';import{connect}from'react-redux';class FootballField extends React.Component{constructor(...args){super(...args);this.state={gameOrder:[],players:0};}static getDerivedStateFromProps(nextProps,prevState){return{gameOrder:nextProps.game.players===prevState.players?prevState.gameOrder:new Teems(nextProps.game.players).formGameOrder(),players:nextProps.game.players};}render(){const auth=this.props.auth;let fieldClass=\" football-field \";fieldClass+=auth.isAuthenticated?\"active\":\"regular\";return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"north-socket\"}),/*#__PURE__*/React.createElement(\"div\",{className:fieldClass},/*#__PURE__*/React.createElement(\"div\",{className:\"football-field-center\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"left-top-corner\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"right-top-corner\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"left-bottom-corner\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"right-bottom-corner\"}),this.state.gameOrder.length>0&&this.generateLines()),/*#__PURE__*/React.createElement(\"div\",{className:\"south-socket\"}));}/**\n   * Generate tactic lines on field, each line contains few players\n   */generateLines(){const lines=[];const game=this.props.game;let total=game.players;const teemsOnField=[[],[]];let row=[];let rowNum=1;this.state.gameOrder.forEach((it,index)=>{it.forEach(it=>{row=[];for(let i=1;i<=it&&total>0;i++){row.push(/*#__PURE__*/React.createElement(FieldPlayer,{teem:index===0?'orange':'white',key:i,game:game,index:total,isActive:false}));total--;}teemsOnField[index].push(/*#__PURE__*/ // @ts-ignore\nReact.createElement(\"div\",{key:rowNum++,className:'tactic-line '},row));});});lines.push(/*#__PURE__*/React.createElement(\"div\",{key:'north-side',className:\"half-field north-side lines-\".concat(teemsOnField[0].length)},teemsOnField[0]));lines.push(/*#__PURE__*/React.createElement(\"div\",{key:'south-side',className:\"half-field south-side lines-\".concat(teemsOnField[1].length)},teemsOnField[1]));return lines;}}export default connect(state=>{return{auth:state.auth};})(FootballField);","map":{"version":3,"sources":["/Users/yaroslavudodov/Code/f4e/ssr/client/src/components/game/football-field/football-field.tsx"],"names":["React","FieldPlayer","Teems","connect","FootballField","Component","state","gameOrder","players","getDerivedStateFromProps","nextProps","prevState","game","formGameOrder","render","auth","props","fieldClass","isAuthenticated","length","generateLines","lines","total","teemsOnField","row","rowNum","forEach","it","index","i","push"],"mappings":"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","sourcesContent":["import * as React from 'react'\nimport './football-field.scss'\nimport FieldPlayer from '../field-player'\nimport Teems from '../../../services/teems'\nimport {connect} from 'react-redux'\n\ninterface Props {\n  auth: any,\n  game: any\n}\n\nclass FootballField extends React.Component<Props> {\n  state = {\n    gameOrder: [],\n    players: 0,\n  };\n\n  static getDerivedStateFromProps(nextProps: any, prevState: any): {players: number; gameOrder: any} {\n    return ({\n      gameOrder: nextProps.game.players === prevState.players?\n        prevState.gameOrder:\n        new Teems(nextProps.game.players).formGameOrder(),\n      players: nextProps.game.players})\n  }\n\n  render() {\n    const {auth} = this.props;\n    let fieldClass = ` football-field `;\n    fieldClass += auth.isAuthenticated ? `active` : `regular`;\n    return (\n        <div>\n          <div className=\"north-socket\" />\n          <div className={fieldClass}>\n            <div className='football-field-center'/>\n            <div className=\"left-top-corner\"/>\n            <div className=\"right-top-corner\"/>\n            <div className=\"left-bottom-corner\"/>\n            <div className=\"right-bottom-corner\"/>\n            {this.state.gameOrder.length > 0 && this.generateLines()}\n          </div>\n          <div className=\"south-socket\" />\n        </div>\n    );\n  }\n  /**\n   * Generate tactic lines on field, each line contains few players\n   */\n  generateLines() {\n    const lines = [];\n    const {game} = this.props;\n    let total = game.players;\n    const teemsOnField = [[], []];\n    let row = [];\n    let rowNum = 1;\n    this.state.gameOrder.forEach((it: any, index) => {\n      it.forEach((it: any)=> {\n        row = [];\n        for (let i = 1; i <= it && total > 0; i++) {\n          row.push(\n              <FieldPlayer\n                teem={index === 0 ? 'orange' : 'white'}\n                key={i}\n                game={game}\n                index={total}\n                isActive={false}/>);\n          total--\n        }\n        teemsOnField[index].push(\n            // @ts-ignore\n            <div key={rowNum++} className={'tactic-line '}>{row}</div>\n        )\n      })\n    });\n    lines.push(<div\n      key={'north-side'}\n      className={`half-field north-side lines-${teemsOnField[0].length}`}>\n      {teemsOnField[0]}</div>);\n    lines.push(<div\n      key={'south-side'}\n      className={`half-field south-side lines-${teemsOnField[1].length}`}>\n      {teemsOnField[1]}</div>);\n    return lines\n  }\n}\n\nexport default connect((state: any) => {\n  return {\n    auth: state.auth,\n  }\n})(FootballField)\n"]},"metadata":{},"sourceType":"module"}