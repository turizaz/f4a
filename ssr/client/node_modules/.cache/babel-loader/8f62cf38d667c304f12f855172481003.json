{"ast":null,"code":"import io from'socket.io-client';import store from'./store';import{GAME_ADDED,PLAYER_JOINED}from'./constants';import{gameAdded,playerJoined}from'./ac/games';const patch=require('socketio-wildcard')(io.Manager);const gameSocket=io({path:'/chat/game'});const generalSocket=io({path:'/chat/general'});patch(generalSocket);patch(gameSocket);/**\n * Common sockets func\n */function sockets(){generalSocket.on('*',message=>{switch(message.data[0]){case GAME_ADDED:console.log('game added');store.dispatch(gameAdded(message.data[1]));break;case PLAYER_JOINED:console.log('pl joined');const _message$data$=message.data[1],gameId=_message$data$.gameId,players=_message$data$.players,info=_message$data$.info;store.dispatch(playerJoined(gameId,players,info));break;default:console.log('unknown action');break;}});}export{sockets,gameSocket,generalSocket};","map":{"version":3,"sources":["/Users/yaroslavudodov/Code/f4e/ssr/client/src/sockets.ts"],"names":["io","store","GAME_ADDED","PLAYER_JOINED","gameAdded","playerJoined","patch","require","Manager","gameSocket","path","generalSocket","sockets","on","message","data","console","log","dispatch","gameId","players","info"],"mappings":"AAAA,MAAOA,CAAAA,EAAP,KAAe,kBAAf,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,OAAQC,UAAR,CAAoBC,aAApB,KAAwC,aAAxC,CACA,OAAQC,SAAR,CAAmBC,YAAnB,KAAsC,YAAtC,CACA,KAAMC,CAAAA,KAAK,CAAGC,OAAO,CAAC,mBAAD,CAAP,CAA6BP,EAAE,CAACQ,OAAhC,CAAd,CACA,KAAMC,CAAAA,UAAU,CACdT,EAAE,CAAC,CAACU,IAAI,CAAE,YAAP,CAAD,CADJ,CAEA,KAAMC,CAAAA,aAAa,CACjBX,EAAE,CAAC,CAACU,IAAI,CAAE,eAAP,CAAD,CADJ,CAEAJ,KAAK,CAACK,aAAD,CAAL,CACAL,KAAK,CAACG,UAAD,CAAL,CAEA;;GAGA,QAASG,CAAAA,OAAT,EAAmB,CACjBD,aAAa,CAACE,EAAd,CAAiB,GAAjB,CAAuBC,OAAD,EAAkB,CACtC,OAAQA,OAAO,CAACC,IAAR,CAAa,CAAb,CAAR,EACE,IAAKb,CAAAA,UAAL,CACEc,OAAO,CAACC,GAAR,CAAY,YAAZ,EACAhB,KAAK,CAACiB,QAAN,CAAed,SAAS,CAACU,OAAO,CAACC,IAAR,CAAa,CAAb,CAAD,CAAxB,EACA,MACF,IAAKZ,CAAAA,aAAL,CACEa,OAAO,CAACC,GAAR,CAAY,WAAZ,EADF,qBAEkCH,OAAO,CAACC,IAAR,CAAa,CAAb,CAFlC,CAESI,MAFT,gBAESA,MAFT,CAEiBC,OAFjB,gBAEiBA,OAFjB,CAE0BC,IAF1B,gBAE0BA,IAF1B,CAGEpB,KAAK,CAACiB,QAAN,CAAeb,YAAY,CAACc,MAAD,CAASC,OAAT,CAAkBC,IAAlB,CAA3B,EACA,MACF,QACEL,OAAO,CAACC,GAAR,CAAY,gBAAZ,EACA,MAZJ,CAcD,CAfD,EAgBD,CACD,OAAQL,OAAR,CAAiBH,UAAjB,CAA6BE,aAA7B","sourcesContent":["import io from 'socket.io-client'\nimport store from './store'\nimport {GAME_ADDED, PLAYER_JOINED} from './constants'\nimport {gameAdded, playerJoined} from './ac/games'\nconst patch = require('socketio-wildcard')(io.Manager)\nconst gameSocket =\n  io({path: '/chat/game'})\nconst generalSocket =\n  io({path: '/chat/general'})\npatch(generalSocket)\npatch(gameSocket)\n\n/**\n * Common sockets func\n */\nfunction sockets() {\n  generalSocket.on('*', (message: any) => {\n    switch (message.data[0]) {\n      case GAME_ADDED:\n        console.log('game added');\n        store.dispatch(gameAdded(message.data[1]));\n        break;\n      case PLAYER_JOINED:\n        console.log('pl joined');\n        const {gameId, players, info} = message.data[1];\n        store.dispatch(playerJoined(gameId, players, info));\n        break;\n      default:\n        console.log('unknown action');\n        break;\n    }\n  });\n}\nexport {sockets, gameSocket, generalSocket};\n"]},"metadata":{},"sourceType":"module"}