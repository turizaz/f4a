{"ast":null,"code":"import _regeneratorRuntime from\"/Users/yaroslavudodov/Code/f4e/ssr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/yaroslavudodov/Code/f4e/ssr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import*as React from'react';import SetCityItem from'./set-city-item';import'./city-picker.scss';import{withCityService}from'../../../HOCs';/**\n * Input which select city\n */class CityPicker extends React.Component{constructor(...args){var _this;super(...args);_this=this;this.state={cities:[],city:'',loading:null};this.handleChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var city,cityService,cities;return _regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:city=event.target.value;_this.setState({city});cityService=_this.props.cityService;if(!(city.length>2)){_context.next=11;break;}_this.setState({loading:true});_context.next=7;return cityService.getCities(city);case 7:cities=_context.sent;console.log(cities);_this.setState({loading:false});_this.setState({cities});case 11:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();this.pickerDoChoice=city=>{this.setState({cities:[],city:city.name});return this.props.doChoice(city);};}render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"city-auto-complete\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",autoComplete:\"off\",placeholder:\"\\u0413\\u043E\\u0440\\u043E\\u0434\",onChange:this.handleChange}),this.state.loading&&/*#__PURE__*/React.createElement(\"div\",{className:\"lds-hourglass\"}),this.state.cities.length?/*#__PURE__*/React.createElement(\"div\",{className:\"list\"},this.state.cities.map(city=>{return/*#__PURE__*/React.createElement(SetCityItem,Object.assign({key:city.id},city,{doChoice:this.pickerDoChoice}));})):null);}}export default withCityService(CityPicker);","map":{"version":3,"sources":["/Users/yaroslavudodov/Code/f4e/ssr/client/src/components/common/city-picker/city-picker.tsx"],"names":["React","SetCityItem","withCityService","CityPicker","Component","state","cities","city","loading","handleChange","event","target","value","setState","cityService","props","length","getCities","console","log","pickerDoChoice","name","doChoice","render","map","id"],"mappings":"6TAAA,MAAO,GAAKA,CAAAA,KAAZ,KAAuB,OAAvB,CACA,MAAOC,CAAAA,WAAP,KAAwB,iBAAxB,CACA,MAAO,oBAAP,CACA,OAAQC,eAAR,KAA8B,eAA9B,CAOA;;GAGA,KAAMC,CAAAA,UAAN,QAAyBH,CAAAA,KAAK,CAACI,SAAiB,+DAC9CC,KAD8C,CACtC,CACNC,MAAM,CAAE,EADF,CAENC,IAAI,CAAE,EAFA,CAGNC,OAAO,CAAE,IAHH,CADsC,MAO9CC,YAP8C,0FAO/B,iBAAOC,KAAP,6IACPH,IADO,CACAG,KAAK,CAACC,MAAN,CAAaC,KADb,CAEb,KAAI,CAACC,QAAL,CAAc,CAACN,IAAD,CAAd,EACOO,WAHM,CAGS,KAAI,CAACC,KAHd,CAGND,WAHM,MAITP,IAAI,CAACS,MAAL,CAAc,CAJL,2BAKX,KAAI,CAACH,QAAL,CAAc,CAACL,OAAO,CAAE,IAAV,CAAd,EALW,sBAMUM,CAAAA,WAAW,CAACG,SAAZ,CAAsBV,IAAtB,CANV,QAMLD,MANK,eAOXY,OAAO,CAACC,GAAR,CAAYb,MAAZ,EACA,KAAI,CAACO,QAAL,CAAc,CAACL,OAAO,CAAE,KAAV,CAAd,EACA,KAAI,CAACK,QAAL,CAAc,CAACP,MAAD,CAAd,EATW,sDAP+B,oEAoB9Cc,cApB8C,CAoB5Bb,IAAD,EAAe,CAC9B,KAAKM,QAAL,CAAc,CAACP,MAAM,CAAE,EAAT,CAAYC,IAAI,CAAEA,IAAI,CAACc,IAAvB,CAAd,EACA,MAAO,MAAKN,KAAL,CAAWO,QAAX,CAAoBf,IAApB,CAAP,CACD,CAvB6C,EAyB9CgB,MAAM,EAAG,CACP,mBACE,2BAAK,SAAS,CAAC,oBAAf,eACE,6BACE,IAAI,CAAC,MADP,CAEE,SAAS,CAAC,cAFZ,CAGE,YAAY,CAAC,KAHf,CAIE,WAAW,CAAC,gCAJd,CAKE,QAAQ,CAAE,KAAKd,YALjB,EADF,CAQG,KAAKJ,KAAL,CAAWG,OAAX,eAAsB,2BAAK,SAAS,CAAC,eAAf,EARzB,CASG,KAAKH,KAAL,CAAWC,MAAX,CAAkBU,MAAlB,cACC,2BAAK,SAAS,CAAC,MAAf,EACG,KAAKX,KAAL,CAAWC,MAAX,CAAkBkB,GAAlB,CAAuBjB,IAAD,EAAwB,CAC7C,mBACE,oBAAC,WAAD,gBACE,GAAG,CAAEA,IAAI,CAACkB,EADZ,EAEMlB,IAFN,EAGE,QAAQ,CAAE,KAAKa,cAHjB,GADF,CAOD,CARA,CADH,CADD,CAYG,IArBN,CADF,CAyBD,CAnD6C,CAsDhD,cAAelB,CAAAA,eAAe,CAACC,UAAD,CAA9B","sourcesContent":["import * as React from 'react'\nimport SetCityItem from './set-city-item'\nimport './city-picker.scss'\nimport {withCityService} from '../../../HOCs'\ninterface Props {\n  doChoice: any;\n  city: string;\n  cityService: any;\n}\n\n/**\n * Input which select city\n */\nclass CityPicker extends React.Component<Props> {\n  state = {\n    cities: [],\n    city: '',\n    loading: null,\n  };\n\n  handleChange = async (event: any) => {\n    const city = event.target.value;\n    this.setState({city});\n    const {cityService} = this.props;\n    if (city.length > 2) {\n      this.setState({loading: true});\n      const cities = await cityService.getCities(city);\n      console.log(cities)\n      this.setState({loading: false});\n      this.setState({cities});\n    }\n  }\n\n  pickerDoChoice = (city: any) => {\n    this.setState({cities: [],city: city.name})\n    return this.props.doChoice(city);\n  };\n\n  render() {\n    return (\n      <div className=\"city-auto-complete\">\n        <input\n          type=\"text\"\n          className=\"form-control\"\n          autoComplete=\"off\"\n          placeholder=\"Город\"\n          onChange={this.handleChange}\n        />\n        {this.state.loading && <div className=\"lds-hourglass\"/>}\n        {this.state.cities.length ? (\n          <div className=\"list\">\n            {this.state.cities.map((city: {id: number}) => {\n              return (\n                <SetCityItem\n                  key={city.id}\n                  {...city}\n                  doChoice={this.pickerDoChoice}\n                />\n              )\n            })}\n          </div>\n        ) : null}\n      </div>\n    )\n  }\n}\n\nexport default withCityService(CityPicker)\n"]},"metadata":{},"sourceType":"module"}