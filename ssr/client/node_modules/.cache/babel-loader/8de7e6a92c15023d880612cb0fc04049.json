{"ast":null,"code":"import _regeneratorRuntime from\"/Users/yaroslavudodov/Code/f4e/ssr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/yaroslavudodov/Code/f4e/ssr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/yaroslavudodov/Code/f4e/ssr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import*as React from'react';import'./forgot-password.scss';import{connect}from'react-redux';import{forgotPassword}from'../../../ac/auth';import Validator from'validator';import ErrorMessage from'../../../components/common/messages/error-message';import _ from'lodash';class ForgotPassword extends React.Component{constructor(...args){var _this;super(...args);_this=this;this.state={data:{email:''},loading:false,backendErrors:[],errors:{email:null}};this.onChange=e=>{this.setState({data:_objectSpread(_objectSpread({},this.state.data),{},{[e.target.name]:e.target.value})});};this.submit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var forgotPassword,errors;return _regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:forgotPassword=_this.props.forgotPassword;e.preventDefault();errors=ForgotPassword.validate(_this.state.data);if(_.isEmpty(errors.email)){_context.next=6;break;}_this.setState({errors});return _context.abrupt(\"return\");case 6:_context.next=8;return forgotPassword(_this.state.data.email);case 8:window.location.href='/';case 9:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();}static validate(data){const errors={email:''};if(data.email&&!Validator.isEmail(data.email))errors.email='Не валидный емейл';if(!data.email)errors.email='Не может быть пустым';return errors;}render(){const email=this.state.data.email;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",{className:\"col-12 col-md-6 col-lg-6 col-xl-6 login-form\",onSubmit:this.submit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},this.state.errors.email&&/*#__PURE__*/React.createElement(ErrorMessage,{message:this.state.errors.email}),/*#__PURE__*/React.createElement(\"label\",null,\"Email\"),/*#__PURE__*/React.createElement(\"input\",{value:email,name:'email',onChange:this.onChange,className:\"form-control\",type:\"text\"})),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn submit-btn mb-2\"},\"\\u0412\\u043E\\u0439\\u0442\\u0438\"))));}}export default connect(null,{forgotPassword})(ForgotPassword);","map":{"version":3,"sources":["/Users/yaroslavudodov/Code/f4e/ssr/client/src/components/auth/forgot-password/forgot-password.tsx"],"names":["React","connect","forgotPassword","Validator","ErrorMessage","_","ForgotPassword","Component","state","data","email","loading","backendErrors","errors","onChange","e","setState","target","name","value","submit","props","preventDefault","validate","isEmpty","window","location","href","isEmail","render"],"mappings":"4dAAA,MAAO,GAAKA,CAAAA,KAAZ,KAAuB,OAAvB,CACA,MAAO,wBAAP,CACA,OAAQC,OAAR,KAAsB,aAAtB,CACA,OAAQC,cAAR,KAA6B,kBAA7B,CACA,MAAOC,CAAAA,SAAP,KAAsB,WAAtB,CACA,MAAOC,CAAAA,YAAP,KAAyB,mDAAzB,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CAEA,KAAMC,CAAAA,cAAN,QAA6BN,CAAAA,KAAK,CAACO,SAAe,+DAC9CC,KAD8C,CACtC,CACJC,IAAI,CAAE,CACFC,KAAK,CAAE,EADL,CADF,CAIJC,OAAO,CAAE,KAJL,CAKJC,aAAa,CAAE,EALX,CAMJC,MAAM,CAAE,CAACH,KAAK,CAAE,IAAR,CANJ,CADsC,MAU9CI,QAV8C,CAUlCC,CAAD,EAAY,CACnB,KAAKC,QAAL,CAAc,CAACP,IAAI,gCAAM,KAAKD,KAAL,CAAWC,IAAjB,MAAuB,CAACM,CAAC,CAACE,MAAF,CAASC,IAAV,EAAiBH,CAAC,CAACE,MAAF,CAASE,KAAjD,EAAL,CAAd,EACH,CAZ6C,MAmB9CC,MAnB8C,0FAmBrC,iBAAOL,CAAP,2IACEb,cADF,CACoB,KAAI,CAACmB,KADzB,CACEnB,cADF,CAELa,CAAC,CAACO,cAAF,GACMT,MAHD,CAGUP,cAAc,CAACiB,QAAf,CAAwB,KAAI,CAACf,KAAL,CAAWC,IAAnC,CAHV,IAIDJ,CAAC,CAACmB,OAAF,CAAUX,MAAM,CAACH,KAAjB,CAJC,yBAKD,KAAI,CAACM,QAAL,CAAc,CAACH,MAAD,CAAd,EALC,8DAQCX,CAAAA,cAAc,CAAC,KAAI,CAACM,KAAL,CAAWC,IAAX,CAAgBC,KAAjB,CARf,QASLe,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,GAAvB,CATK,qDAnBqC,gEAa9C,MAAOJ,CAAAA,QAAP,CAAgBd,IAAhB,CAA2B,CACvB,KAAMI,CAAAA,MAAM,CAAG,CAACH,KAAK,CAAE,EAAR,CAAf,CACA,GAAGD,IAAI,CAACC,KAAL,EAAc,CAACP,SAAS,CAACyB,OAAV,CAAkBnB,IAAI,CAACC,KAAvB,CAAlB,CAAiDG,MAAM,CAACH,KAAP,CAAe,mBAAf,CACjD,GAAG,CAACD,IAAI,CAACC,KAAT,CAAgBG,MAAM,CAACH,KAAP,CAAe,sBAAf,CAChB,MAAOG,CAAAA,MAAP,CACH,CAaDgB,MAAM,EAAG,MACEnB,CAAAA,KADF,CACW,KAAKF,KAAL,CAAWC,IADtB,CACEC,KADF,CAEL,mBACI,4CACI,4BAAM,SAAS,CAAC,8CAAhB,CAA+D,QAAQ,CAAE,KAAKU,MAA9E,eACI,2BAAK,SAAS,CAAC,YAAf,EACK,KAAKZ,KAAL,CAAWK,MAAX,CAAkBH,KAAlB,eACG,oBAAC,YAAD,EAAc,OAAO,CAAE,KAAKF,KAAL,CAAWK,MAAX,CAAkBH,KAAzC,EAFR,cAII,yCAJJ,cAKI,6BAAO,KAAK,CAAEA,KAAd,CAAqB,IAAI,CAAE,OAA3B,CAAoC,QAAQ,CAAE,KAAKI,QAAnD,CAA6D,SAAS,CAAC,cAAvE,CAAsF,IAAI,CAAC,MAA3F,EALJ,CADJ,cAQI,0CACI,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,qBAAhC,mCADJ,CARJ,CADJ,CADJ,CAgBH,CAjD6C,CAoDlD,cAAeb,CAAAA,OAAO,CAAC,IAAD,CAAO,CAACC,cAAD,CAAP,CAAP,CAAgCI,cAAhC,CAAf","sourcesContent":["import * as React from 'react'\nimport './forgot-password.scss'\nimport {connect} from 'react-redux'\nimport {forgotPassword} from '../../../ac/auth'\nimport Validator from 'validator'\nimport ErrorMessage from '../../../components/common/messages/error-message'\nimport _ from 'lodash'\n\nclass ForgotPassword extends React.Component<any> {\n    state = {\n        data: {\n            email: ''\n        },\n        loading: false,\n        backendErrors: [],\n        errors: {email: null},\n    }\n\n    onChange = (e: any) => {\n        this.setState({data: {...this.state.data, [e.target.name]: e.target.value}})\n    }\n    static validate(data: any) {\n        const errors = {email: ''}\n        if(data.email && !Validator.isEmail(data.email)) errors.email = 'Не валидный емейл'\n        if(!data.email) errors.email = 'Не может быть пустым'\n        return errors\n    }\n    submit = async (e: any) => {\n        const {forgotPassword} = this.props\n        e.preventDefault()\n        const errors = ForgotPassword.validate(this.state.data)\n        if(!_.isEmpty(errors.email)) {\n            this.setState({errors})\n            return\n        }\n        await forgotPassword(this.state.data.email)\n        window.location.href = '/'\n\n    }\n    render() {\n        const {email} = this.state.data\n        return(\n            <div>\n                <form className=\"col-12 col-md-6 col-lg-6 col-xl-6 login-form\" onSubmit={this.submit}>\n                    <div className=\"form-group\">\n                        {this.state.errors.email && (\n                            <ErrorMessage message={this.state.errors.email} />\n                        )}\n                        <label>Email</label>\n                        <input value={email} name={'email'} onChange={this.onChange} className=\"form-control\" type=\"text\"/>\n                    </div>\n                    <p>\n                        <button type=\"submit\" className=\"btn submit-btn mb-2\">Войти</button>\n                    </p>\n                </form>\n            </div>\n        )\n    }\n}\n\nexport default connect(null, {forgotPassword})(ForgotPassword)\n"]},"metadata":{},"sourceType":"module"}